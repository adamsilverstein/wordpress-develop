<!DOCTYPE html>

<html>
<head>
  <title>editor-expand.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="accordion.html">
                  accordion.js
                </a>
              
                
                <a class="source" href="bookmarklet.html">
                  bookmarklet.js
                </a>
              
                
                <a class="source" href="bookmarklet.min.html">
                  bookmarklet.min.js
                </a>
              
                
                <a class="source" href="color-picker.html">
                  color-picker.js
                </a>
              
                
                <a class="source" href="comment.html">
                  comment.js
                </a>
              
                
                <a class="source" href="common.html">
                  common.js
                </a>
              
                
                <a class="source" href="custom-background.html">
                  custom-background.js
                </a>
              
                
                <a class="source" href="custom-header.html">
                  custom-header.js
                </a>
              
                
                <a class="source" href="customize-controls.html">
                  customize-controls.js
                </a>
              
                
                <a class="source" href="customize-nav-menus.html">
                  customize-nav-menus.js
                </a>
              
                
                <a class="source" href="customize-widgets.html">
                  customize-widgets.js
                </a>
              
                
                <a class="source" href="dashboard.html">
                  dashboard.js
                </a>
              
                
                <a class="source" href="edit-comments.html">
                  edit-comments.js
                </a>
              
                
                <a class="source" href="editor-expand.html">
                  editor-expand.js
                </a>
              
                
                <a class="source" href="editor.html">
                  editor.js
                </a>
              
                
                <a class="source" href="farbtastic.html">
                  farbtastic.js
                </a>
              
                
                <a class="source" href="gallery.html">
                  gallery.js
                </a>
              
                
                <a class="source" href="image-edit.html">
                  image-edit.js
                </a>
              
                
                <a class="source" href="inline-edit-post.html">
                  inline-edit-post.js
                </a>
              
                
                <a class="source" href="inline-edit-tax.html">
                  inline-edit-tax.js
                </a>
              
                
                <a class="source" href="iris.min.html">
                  iris.min.js
                </a>
              
                
                <a class="source" href="language-chooser.html">
                  language-chooser.js
                </a>
              
                
                <a class="source" href="link.html">
                  link.js
                </a>
              
                
                <a class="source" href="media-gallery.html">
                  media-gallery.js
                </a>
              
                
                <a class="source" href="media-upload.html">
                  media-upload.js
                </a>
              
                
                <a class="source" href="media.html">
                  media.js
                </a>
              
                
                <a class="source" href="nav-menu.html">
                  nav-menu.js
                </a>
              
                
                <a class="source" href="password-strength-meter.html">
                  password-strength-meter.js
                </a>
              
                
                <a class="source" href="plugin-install.html">
                  plugin-install.js
                </a>
              
                
                <a class="source" href="post.html">
                  post.js
                </a>
              
                
                <a class="source" href="postbox.html">
                  postbox.js
                </a>
              
                
                <a class="source" href="press-this.html">
                  press-this.js
                </a>
              
                
                <a class="source" href="revisions.html">
                  revisions.js
                </a>
              
                
                <a class="source" href="set-post-thumbnail.html">
                  set-post-thumbnail.js
                </a>
              
                
                <a class="source" href="svg-painter.html">
                  svg-painter.js
                </a>
              
                
                <a class="source" href="tags-box.html">
                  tags-box.js
                </a>
              
                
                <a class="source" href="tags-suggest.html">
                  tags-suggest.js
                </a>
              
                
                <a class="source" href="tags.html">
                  tags.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="updates.html">
                  updates.js
                </a>
              
                
                <a class="source" href="user-profile.html">
                  user-profile.js
                </a>
              
                
                <a class="source" href="user-suggest.html">
                  user-suggest.js
                </a>
              
                
                <a class="source" href="widgets.html">
                  widgets.js
                </a>
              
                
                <a class="source" href="media-audio-widget.html">
                  media-audio-widget.js
                </a>
              
                
                <a class="source" href="media-image-widget.html">
                  media-image-widget.js
                </a>
              
                
                <a class="source" href="media-video-widget.html">
                  media-video-widget.js
                </a>
              
                
                <a class="source" href="media-widgets.html">
                  media-widgets.js
                </a>
              
                
                <a class="source" href="text-widgets.html">
                  text-widgets.js
                </a>
              
                
                <a class="source" href="word-count.html">
                  word-count.js
                </a>
              
                
                <a class="source" href="wp-fullscreen-stub.html">
                  wp-fullscreen-stub.js
                </a>
              
                
                <a class="source" href="xfn.html">
                  xfn.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="theme-options.html">
                  theme-options.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="showcase.html">
                  showcase.js
                </a>
              
                
                <a class="source" href="color-scheme-control.html">
                  color-scheme-control.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="keyboard-image-navigation.html">
                  keyboard-image-navigation.js
                </a>
              
                
                <a class="source" href="skip-link-focus-fix.html">
                  skip-link-focus-fix.js
                </a>
              
                
                <a class="source" href="customizer.html">
                  customizer.js
                </a>
              
                
                <a class="source" href="featured-content-admin.html">
                  featured-content-admin.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="keyboard-image-navigation.html">
                  keyboard-image-navigation.js
                </a>
              
                
                <a class="source" href="slider.html">
                  slider.js
                </a>
              
                
                <a class="source" href="customize-controls.html">
                  customize-controls.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="global.html">
                  global.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="jquery.scrollTo.html">
                  jquery.scrollTo.js
                </a>
              
                
                <a class="source" href="navigation.html">
                  navigation.js
                </a>
              
                
                <a class="source" href="skip-link-focus-fix.html">
                  skip-link-focus-fix.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="navigation.html">
                  navigation.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="admin-bar.html">
                  admin-bar.js
                </a>
              
                
                <a class="source" href="autosave.html">
                  autosave.js
                </a>
              
                
                <a class="source" href="backbone.html">
                  backbone.js
                </a>
              
                
                <a class="source" href="backbone.min.html">
                  backbone.min.js
                </a>
              
                
                <a class="source" href="colorpicker.html">
                  colorpicker.js
                </a>
              
                
                <a class="source" href="comment-reply.html">
                  comment-reply.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="customize-base.html">
                  customize-base.js
                </a>
              
                
                <a class="source" href="customize-loader.html">
                  customize-loader.js
                </a>
              
                
                <a class="source" href="customize-models.html">
                  customize-models.js
                </a>
              
                
                <a class="source" href="customize-preview-nav-menus.html">
                  customize-preview-nav-menus.js
                </a>
              
                
                <a class="source" href="customize-preview-widgets.html">
                  customize-preview-widgets.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="customize-selective-refresh.html">
                  customize-selective-refresh.js
                </a>
              
                
                <a class="source" href="customize-views.html">
                  customize-views.js
                </a>
              
                
                <a class="source" href="heartbeat.html">
                  heartbeat.js
                </a>
              
                
                <a class="source" href="hoverIntent.html">
                  hoverIntent.js
                </a>
              
                
                <a class="source" href="imagesloaded.min.html">
                  imagesloaded.min.js
                </a>
              
                
                <a class="source" href="jquery.imgareaselect.html">
                  jquery.imgareaselect.js
                </a>
              
                
                <a class="source" href="jquery.imgareaselect.min.html">
                  jquery.imgareaselect.min.js
                </a>
              
                
                <a class="source" href="jquery.Jcrop.min.html">
                  jquery.Jcrop.min.js
                </a>
              
                
                <a class="source" href="jquery-migrate.html">
                  jquery-migrate.js
                </a>
              
                
                <a class="source" href="jquery-migrate.min.html">
                  jquery-migrate.min.js
                </a>
              
                
                <a class="source" href="jquery.color.min.html">
                  jquery.color.min.js
                </a>
              
                
                <a class="source" href="jquery.form.html">
                  jquery.form.js
                </a>
              
                
                <a class="source" href="jquery.form.min.html">
                  jquery.form.min.js
                </a>
              
                
                <a class="source" href="jquery.hotkeys.html">
                  jquery.hotkeys.js
                </a>
              
                
                <a class="source" href="jquery.hotkeys.min.html">
                  jquery.hotkeys.min.js
                </a>
              
                
                <a class="source" href="jquery.html">
                  jquery.js
                </a>
              
                
                <a class="source" href="jquery.masonry.html">
                  jquery.masonry.js
                </a>
              
                
                <a class="source" href="jquery.masonry.min.html">
                  jquery.masonry.min.js
                </a>
              
                
                <a class="source" href="jquery.query.html">
                  jquery.query.js
                </a>
              
                
                <a class="source" href="jquery.schedule.html">
                  jquery.schedule.js
                </a>
              
                
                <a class="source" href="jquery.serialize-object.html">
                  jquery.serialize-object.js
                </a>
              
                
                <a class="source" href="jquery.table-hotkeys.html">
                  jquery.table-hotkeys.js
                </a>
              
                
                <a class="source" href="jquery.table-hotkeys.min.html">
                  jquery.table-hotkeys.min.js
                </a>
              
                
                <a class="source" href="jquery.ui.touch-punch.html">
                  jquery.ui.touch-punch.js
                </a>
              
                
                <a class="source" href="suggest.html">
                  suggest.js
                </a>
              
                
                <a class="source" href="suggest.min.html">
                  suggest.min.js
                </a>
              
                
                <a class="source" href="accordion.html">
                  accordion.js
                </a>
              
                
                <a class="source" href="autocomplete.html">
                  autocomplete.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="core.html">
                  core.js
                </a>
              
                
                <a class="source" href="datepicker.html">
                  datepicker.js
                </a>
              
                
                <a class="source" href="dialog.html">
                  dialog.js
                </a>
              
                
                <a class="source" href="draggable.html">
                  draggable.js
                </a>
              
                
                <a class="source" href="droppable.html">
                  droppable.js
                </a>
              
                
                <a class="source" href="effect-blind.html">
                  effect-blind.js
                </a>
              
                
                <a class="source" href="effect-bounce.html">
                  effect-bounce.js
                </a>
              
                
                <a class="source" href="effect-clip.html">
                  effect-clip.js
                </a>
              
                
                <a class="source" href="effect-drop.html">
                  effect-drop.js
                </a>
              
                
                <a class="source" href="effect-explode.html">
                  effect-explode.js
                </a>
              
                
                <a class="source" href="effect-fade.html">
                  effect-fade.js
                </a>
              
                
                <a class="source" href="effect-fold.html">
                  effect-fold.js
                </a>
              
                
                <a class="source" href="effect-highlight.html">
                  effect-highlight.js
                </a>
              
                
                <a class="source" href="effect-puff.html">
                  effect-puff.js
                </a>
              
                
                <a class="source" href="effect-pulsate.html">
                  effect-pulsate.js
                </a>
              
                
                <a class="source" href="effect-scale.html">
                  effect-scale.js
                </a>
              
                
                <a class="source" href="effect-shake.html">
                  effect-shake.js
                </a>
              
                
                <a class="source" href="effect-size.html">
                  effect-size.js
                </a>
              
                
                <a class="source" href="effect-slide.html">
                  effect-slide.js
                </a>
              
                
                <a class="source" href="effect-transfer.html">
                  effect-transfer.js
                </a>
              
                
                <a class="source" href="effect.html">
                  effect.js
                </a>
              
                
                <a class="source" href="menu.html">
                  menu.js
                </a>
              
                
                <a class="source" href="mouse.html">
                  mouse.js
                </a>
              
                
                <a class="source" href="position.html">
                  position.js
                </a>
              
                
                <a class="source" href="progressbar.html">
                  progressbar.js
                </a>
              
                
                <a class="source" href="resizable.html">
                  resizable.js
                </a>
              
                
                <a class="source" href="selectable.html">
                  selectable.js
                </a>
              
                
                <a class="source" href="selectmenu.html">
                  selectmenu.js
                </a>
              
                
                <a class="source" href="slider.html">
                  slider.js
                </a>
              
                
                <a class="source" href="sortable.html">
                  sortable.js
                </a>
              
                
                <a class="source" href="spinner.html">
                  spinner.js
                </a>
              
                
                <a class="source" href="tabs.html">
                  tabs.js
                </a>
              
                
                <a class="source" href="tooltip.html">
                  tooltip.js
                </a>
              
                
                <a class="source" href="widget.html">
                  widget.js
                </a>
              
                
                <a class="source" href="json2.html">
                  json2.js
                </a>
              
                
                <a class="source" href="masonry.min.html">
                  masonry.min.js
                </a>
              
                
                <a class="source" href="mce-view.html">
                  mce-view.js
                </a>
              
                
                <a class="source" href="media-audiovideo.html">
                  media-audiovideo.js
                </a>
              
                
                <a class="source" href="media-editor.html">
                  media-editor.js
                </a>
              
                
                <a class="source" href="media-grid.html">
                  media-grid.js
                </a>
              
                
                <a class="source" href="media-models.html">
                  media-models.js
                </a>
              
                
                <a class="source" href="media-views.html">
                  media-views.js
                </a>
              
                
                <a class="source" href="audiovideo.manifest.html">
                  audiovideo.manifest.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="collection-add.html">
                  collection-add.js
                </a>
              
                
                <a class="source" href="collection-edit.html">
                  collection-edit.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="customize-image-cropper.html">
                  customize-image-cropper.js
                </a>
              
                
                <a class="source" href="edit-attachment-metadata.html">
                  edit-attachment-metadata.js
                </a>
              
                
                <a class="source" href="edit-image.html">
                  edit-image.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="featured-image.html">
                  featured-image.js
                </a>
              
                
                <a class="source" href="gallery-add.html">
                  gallery-add.js
                </a>
              
                
                <a class="source" href="gallery-edit.html">
                  gallery-edit.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="library.html">
                  library.js
                </a>
              
                
                <a class="source" href="media-library.html">
                  media-library.js
                </a>
              
                
                <a class="source" href="region.html">
                  region.js
                </a>
              
                
                <a class="source" href="replace-image.html">
                  replace-image.js
                </a>
              
                
                <a class="source" href="site-icon-cropper.html">
                  site-icon-cropper.js
                </a>
              
                
                <a class="source" href="state-machine.html">
                  state-machine.js
                </a>
              
                
                <a class="source" href="state.html">
                  state.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="grid.manifest.html">
                  grid.manifest.js
                </a>
              
                
                <a class="source" href="models.manifest.html">
                  models.manifest.js
                </a>
              
                
                <a class="source" href="attachment.html">
                  attachment.js
                </a>
              
                
                <a class="source" href="attachments.html">
                  attachments.js
                </a>
              
                
                <a class="source" href="post-image.html">
                  post-image.js
                </a>
              
                
                <a class="source" href="post-media.html">
                  post-media.js
                </a>
              
                
                <a class="source" href="query.html">
                  query.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="manage.html">
                  manage.js
                </a>
              
                
                <a class="source" href="selection-sync.html">
                  selection-sync.js
                </a>
              
                
                <a class="source" href="views.manifest.html">
                  views.manifest.js
                </a>
              
                
                <a class="source" href="attachment-compat.html">
                  attachment-compat.js
                </a>
              
                
                <a class="source" href="attachment-filters.html">
                  attachment-filters.js
                </a>
              
                
                <a class="source" href="all.html">
                  all.js
                </a>
              
                
                <a class="source" href="date.html">
                  date.js
                </a>
              
                
                <a class="source" href="uploaded.html">
                  uploaded.js
                </a>
              
                
                <a class="source" href="attachment.html">
                  attachment.js
                </a>
              
                
                <a class="source" href="details-two-column.html">
                  details-two-column.js
                </a>
              
                
                <a class="source" href="details.html">
                  details.js
                </a>
              
                
                <a class="source" href="edit-library.html">
                  edit-library.js
                </a>
              
                
                <a class="source" href="edit-selection.html">
                  edit-selection.js
                </a>
              
                
                <a class="source" href="library.html">
                  library.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="attachments.html">
                  attachments.js
                </a>
              
                
                <a class="source" href="browser.html">
                  browser.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="button-group.html">
                  button-group.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="delete-selected-permanently.html">
                  delete-selected-permanently.js
                </a>
              
                
                <a class="source" href="delete-selected.html">
                  delete-selected.js
                </a>
              
                
                <a class="source" href="select-mode-toggle.html">
                  select-mode-toggle.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="edit-image-details.html">
                  edit-image-details.js
                </a>
              
                
                <a class="source" href="edit-image.html">
                  edit-image.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="image.html">
                  image.js
                </a>
              
                
                <a class="source" href="link.html">
                  link.js
                </a>
              
                
                <a class="source" href="url.html">
                  url.js
                </a>
              
                
                <a class="source" href="focus-manager.html">
                  focus-manager.js
                </a>
              
                
                <a class="source" href="frame.html">
                  frame.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="edit-attachments.html">
                  edit-attachments.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="manage.html">
                  manage.js
                </a>
              
                
                <a class="source" href="media-details.html">
                  media-details.js
                </a>
              
                
                <a class="source" href="post.html">
                  post.js
                </a>
              
                
                <a class="source" href="select.html">
                  select.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="iframe.html">
                  iframe.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="label.html">
                  label.js
                </a>
              
                
                <a class="source" href="media-details.html">
                  media-details.js
                </a>
              
                
                <a class="source" href="media-frame.html">
                  media-frame.js
                </a>
              
                
                <a class="source" href="menu-item.html">
                  menu-item.js
                </a>
              
                
                <a class="source" href="menu.html">
                  menu.js
                </a>
              
                
                <a class="source" href="modal.html">
                  modal.js
                </a>
              
                
                <a class="source" href="priority-list.html">
                  priority-list.js
                </a>
              
                
                <a class="source" href="router-item.html">
                  router-item.js
                </a>
              
                
                <a class="source" href="router.html">
                  router.js
                </a>
              
                
                <a class="source" href="search.html">
                  search.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="settings.html">
                  settings.js
                </a>
              
                
                <a class="source" href="attachment-display.html">
                  attachment-display.js
                </a>
              
                
                <a class="source" href="gallery.html">
                  gallery.js
                </a>
              
                
                <a class="source" href="playlist.html">
                  playlist.js
                </a>
              
                
                <a class="source" href="sidebar.html">
                  sidebar.js
                </a>
              
                
                <a class="source" href="site-icon-cropper.html">
                  site-icon-cropper.js
                </a>
              
                
                <a class="source" href="site-icon-preview.html">
                  site-icon-preview.js
                </a>
              
                
                <a class="source" href="spinner.html">
                  spinner.js
                </a>
              
                
                <a class="source" href="toolbar.html">
                  toolbar.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="select.html">
                  select.js
                </a>
              
                
                <a class="source" href="editor.html">
                  editor.js
                </a>
              
                
                <a class="source" href="inline.html">
                  inline.js
                </a>
              
                
                <a class="source" href="status-error.html">
                  status-error.js
                </a>
              
                
                <a class="source" href="status.html">
                  status.js
                </a>
              
                
                <a class="source" href="window.html">
                  window.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="view.html">
                  view.js
                </a>
              
                
                <a class="source" href="froogaloop.min.html">
                  froogaloop.min.js
                </a>
              
                
                <a class="source" href="mediaelement-and-player.min.html">
                  mediaelement-and-player.min.js
                </a>
              
                
                <a class="source" href="wp-mediaelement.html">
                  wp-mediaelement.js
                </a>
              
                
                <a class="source" href="wp-playlist.html">
                  wp-playlist.js
                </a>
              
                
                <a class="source" href="handlers.html">
                  handlers.js
                </a>
              
                
                <a class="source" href="plupload.full.min.html">
                  plupload.full.min.js
                </a>
              
                
                <a class="source" href="wp-plupload.html">
                  wp-plupload.js
                </a>
              
                
                <a class="source" href="quicktags.html">
                  quicktags.js
                </a>
              
                
                <a class="source" href="shortcode.html">
                  shortcode.js
                </a>
              
                
                <a class="source" href="swfobject.html">
                  swfobject.js
                </a>
              
                
                <a class="source" href="handlers.html">
                  handlers.js
                </a>
              
                
                <a class="source" href="handlers.min.html">
                  handlers.min.js
                </a>
              
                
                <a class="source" href="swfupload.cookies.html">
                  swfupload.cookies.js
                </a>
              
                
                <a class="source" href="swfupload.queue.html">
                  swfupload.queue.js
                </a>
              
                
                <a class="source" href="swfupload.speed.html">
                  swfupload.speed.js
                </a>
              
                
                <a class="source" href="swfupload.swfobject.html">
                  swfupload.swfobject.js
                </a>
              
                
                <a class="source" href="swfupload.html">
                  swfupload.js
                </a>
              
                
                <a class="source" href="thickbox.html">
                  thickbox.js
                </a>
              
                
                <a class="source" href="wp-langs-en.html">
                  wp-langs-en.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="theme.min.html">
                  theme.min.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="theme.min.html">
                  theme.min.js
                </a>
              
                
                <a class="source" href="tiny_mce_popup.html">
                  tiny_mce_popup.js
                </a>
              
                
                <a class="source" href="tinymce.html">
                  tinymce.js
                </a>
              
                
                <a class="source" href="tinymce.min.html">
                  tinymce.min.js
                </a>
              
                
                <a class="source" href="editable_selects.html">
                  editable_selects.js
                </a>
              
                
                <a class="source" href="form_utils.html">
                  form_utils.js
                </a>
              
                
                <a class="source" href="mctabs.html">
                  mctabs.js
                </a>
              
                
                <a class="source" href="validate.html">
                  validate.js
                </a>
              
                
                <a class="source" href="tw-sack.html">
                  tw-sack.js
                </a>
              
                
                <a class="source" href="twemoji.html">
                  twemoji.js
                </a>
              
                
                <a class="source" href="underscore.html">
                  underscore.js
                </a>
              
                
                <a class="source" href="underscore.min.html">
                  underscore.min.js
                </a>
              
                
                <a class="source" href="utils.html">
                  utils.js
                </a>
              
                
                <a class="source" href="wp-a11y.html">
                  wp-a11y.js
                </a>
              
                
                <a class="source" href="wp-ajax-response.html">
                  wp-ajax-response.js
                </a>
              
                
                <a class="source" href="wp-api.html">
                  wp-api.js
                </a>
              
                
                <a class="source" href="wp-auth-check.html">
                  wp-auth-check.js
                </a>
              
                
                <a class="source" href="wp-backbone.html">
                  wp-backbone.js
                </a>
              
                
                <a class="source" href="wp-custom-header.html">
                  wp-custom-header.js
                </a>
              
                
                <a class="source" href="wp-embed-template.html">
                  wp-embed-template.js
                </a>
              
                
                <a class="source" href="wp-embed.html">
                  wp-embed.js
                </a>
              
                
                <a class="source" href="wp-emoji-loader.html">
                  wp-emoji-loader.js
                </a>
              
                
                <a class="source" href="wp-emoji.html">
                  wp-emoji.js
                </a>
              
                
                <a class="source" href="wp-list-revisions.html">
                  wp-list-revisions.js
                </a>
              
                
                <a class="source" href="wp-lists.html">
                  wp-lists.js
                </a>
              
                
                <a class="source" href="wp-pointer.html">
                  wp-pointer.js
                </a>
              
                
                <a class="source" href="wp-util.html">
                  wp-util.js
                </a>
              
                
                <a class="source" href="wpdialog.html">
                  wpdialog.js
                </a>
              
                
                <a class="source" href="wplink.html">
                  wplink.js
                </a>
              
                
                <a class="source" href="zxcvbn-async.html">
                  zxcvbn-async.js
                </a>
              
                
                <a class="source" href="zxcvbn.min.html">
                  zxcvbn.min.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>editor-expand.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> window, $, undefined </span>) </span>{
<span class="hljs-meta">	'use strict'</span>;

	<span class="hljs-keyword">var</span> $<span class="hljs-built_in">window</span> = $( <span class="hljs-built_in">window</span> ),
		$<span class="hljs-built_in">document</span> = $( <span class="hljs-built_in">document</span> ),
		$adminBar = $( <span class="hljs-string">'#wpadminbar'</span> ),
		$footer = $( <span class="hljs-string">'#wpfooter'</span> );

	<span class="hljs-comment">/* Autoresize editor. */</span>
	$( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">var</span> $wrap = $( <span class="hljs-string">'#postdivrich'</span> ),
			$contentWrap = $( <span class="hljs-string">'#wp-content-wrap'</span> ),
			$tools = $( <span class="hljs-string">'#wp-content-editor-tools'</span> ),
			$visualTop = $(),
			$visualEditor = $(),
			$textTop = $( <span class="hljs-string">'#ed_toolbar'</span> ),
			$textEditor = $( <span class="hljs-string">'#content'</span> ),
			textEditor = $textEditor[<span class="hljs-number">0</span>],
			oldTextLength = <span class="hljs-number">0</span>,
			$bottom = $( <span class="hljs-string">'#post-status-info'</span> ),
			$menuBar = $(),
			$statusBar = $(),
			$sideSortables = $( <span class="hljs-string">'#side-sortables'</span> ),
			$postboxContainer = $( <span class="hljs-string">'#postbox-container-1'</span> ),
			$postBody = $(<span class="hljs-string">'#post-body'</span>),
			fullscreen = <span class="hljs-built_in">window</span>.wp.editor &amp;&amp; <span class="hljs-built_in">window</span>.wp.editor.fullscreen,
			mceEditor,
			mceBind = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{},
			mceUnbind = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{},
			fixedTop = <span class="hljs-literal">false</span>,
			fixedBottom = <span class="hljs-literal">false</span>,
			fixedSideTop = <span class="hljs-literal">false</span>,
			fixedSideBottom = <span class="hljs-literal">false</span>,
			scrollTimer,
			lastScrollPosition = <span class="hljs-number">0</span>,
			pageYOffsetAtTop = <span class="hljs-number">130</span>,
			pinnedToolsTop = <span class="hljs-number">56</span>,
			sidebarBottom = <span class="hljs-number">20</span>,
			autoresizeMinHeight = <span class="hljs-number">300</span>,
			initialMode = $contentWrap.hasClass( <span class="hljs-string">'tmce-active'</span> ) ? <span class="hljs-string">'tinymce'</span> : <span class="hljs-string">'html'</span>,
			advanced = !! <span class="hljs-built_in">parseInt</span>( <span class="hljs-built_in">window</span>.getUserSetting( <span class="hljs-string">'hidetb'</span> ), <span class="hljs-number">10</span> ),</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>These are corrected when adjust() runs, except on scrolling if already set.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			heights = {
				<span class="hljs-attr">windowHeight</span>: <span class="hljs-number">0</span>,
				<span class="hljs-attr">windowWidth</span>: <span class="hljs-number">0</span>,
				<span class="hljs-attr">adminBarHeight</span>: <span class="hljs-number">0</span>,
				<span class="hljs-attr">toolsHeight</span>: <span class="hljs-number">0</span>,
				<span class="hljs-attr">menuBarHeight</span>: <span class="hljs-number">0</span>,
				<span class="hljs-attr">visualTopHeight</span>: <span class="hljs-number">0</span>,
				<span class="hljs-attr">textTopHeight</span>: <span class="hljs-number">0</span>,
				<span class="hljs-attr">bottomHeight</span>: <span class="hljs-number">0</span>,
				<span class="hljs-attr">statusBarHeight</span>: <span class="hljs-number">0</span>,
				<span class="hljs-attr">sideSortablesHeight</span>: <span class="hljs-number">0</span>
			};

		<span class="hljs-keyword">var</span> shrinkTextarea = <span class="hljs-built_in">window</span>._.throttle( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> x = <span class="hljs-built_in">window</span>.scrollX || <span class="hljs-built_in">document</span>.documentElement.scrollLeft;
			<span class="hljs-keyword">var</span> y = <span class="hljs-built_in">window</span>.scrollY || <span class="hljs-built_in">document</span>.documentElement.scrollTop;
			<span class="hljs-keyword">var</span> height = <span class="hljs-built_in">parseInt</span>( textEditor.style.height, <span class="hljs-number">10</span> );

			textEditor.style.height = autoresizeMinHeight + <span class="hljs-string">'px'</span>;

			<span class="hljs-keyword">if</span> ( textEditor.scrollHeight &gt; autoresizeMinHeight ) {
				textEditor.style.height = textEditor.scrollHeight + <span class="hljs-string">'px'</span>;
			}

			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> x !== <span class="hljs-string">'undefined'</span> ) {
				<span class="hljs-built_in">window</span>.scrollTo( x, y );
			}

			<span class="hljs-keyword">if</span> ( textEditor.scrollHeight &lt; height ) {
				adjust();
			}
		}, <span class="hljs-number">300</span> );

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">textEditorResize</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> length = textEditor.value.length;

			<span class="hljs-keyword">if</span> ( mceEditor &amp;&amp; ! mceEditor.isHidden() ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span> ( ! mceEditor &amp;&amp; initialMode === <span class="hljs-string">'tinymce'</span> ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span> ( length &lt; oldTextLength ) {
				shrinkTextarea();
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">parseInt</span>( textEditor.style.height, <span class="hljs-number">10</span> ) &lt; textEditor.scrollHeight ) {
				textEditor.style.height = <span class="hljs-built_in">Math</span>.ceil( textEditor.scrollHeight ) + <span class="hljs-string">'px'</span>;
				adjust();
			}

			oldTextLength = length;
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getHeights</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> windowWidth = $<span class="hljs-built_in">window</span>.width();

			heights = {
				<span class="hljs-attr">windowHeight</span>: $<span class="hljs-built_in">window</span>.height(),
				<span class="hljs-attr">windowWidth</span>: windowWidth,
				<span class="hljs-attr">adminBarHeight</span>: ( windowWidth &gt; <span class="hljs-number">600</span> ? $adminBar.outerHeight() : <span class="hljs-number">0</span> ),
				<span class="hljs-attr">toolsHeight</span>: $tools.outerHeight() || <span class="hljs-number">0</span>,
				<span class="hljs-attr">menuBarHeight</span>: $menuBar.outerHeight() || <span class="hljs-number">0</span>,
				<span class="hljs-attr">visualTopHeight</span>: $visualTop.outerHeight() || <span class="hljs-number">0</span>,
				<span class="hljs-attr">textTopHeight</span>: $textTop.outerHeight() || <span class="hljs-number">0</span>,
				<span class="hljs-attr">bottomHeight</span>: $bottom.outerHeight() || <span class="hljs-number">0</span>,
				<span class="hljs-attr">statusBarHeight</span>: $statusBar.outerHeight() || <span class="hljs-number">0</span>,
				<span class="hljs-attr">sideSortablesHeight</span>: $sideSortables.height() || <span class="hljs-number">0</span>
			};</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Adjust for hidden</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( heights.menuBarHeight &lt; <span class="hljs-number">3</span> ) {
				heights.menuBarHeight = <span class="hljs-number">0</span>;
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>We need to wait for TinyMCE to initialize.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$<span class="hljs-built_in">document</span>.on( <span class="hljs-string">'tinymce-editor-init.editor-expand'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event, editor </span>) </span>{
			<span class="hljs-keyword">var</span> VK = <span class="hljs-built_in">window</span>.tinymce.util.VK,
				hideFloatPanels = _.debounce( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					! $( <span class="hljs-string">'.mce-floatpanel:hover'</span> ).length &amp;&amp; <span class="hljs-built_in">window</span>.tinymce.ui.FloatPanel.hideAll();
					$( <span class="hljs-string">'.mce-tooltip'</span> ).hide();
				}, <span class="hljs-number">1000</span>, <span class="hljs-literal">true</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Make sure it’s the main editor.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( editor.id !== <span class="hljs-string">'content'</span> ) {
				<span class="hljs-keyword">return</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Copy the editor instance.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			mceEditor = editor;</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Set the minimum height to the initial viewport height.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			editor.settings.autoresize_min_height = autoresizeMinHeight;</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Get the necessary UI elements.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$visualTop = $contentWrap.find( <span class="hljs-string">'.mce-toolbar-grp'</span> );
			$visualEditor = $contentWrap.find( <span class="hljs-string">'.mce-edit-area'</span> );
			$statusBar = $contentWrap.find( <span class="hljs-string">'.mce-statusbar'</span> );
			$menuBar = $contentWrap.find( <span class="hljs-string">'.mce-menubar'</span> );

			<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mceGetCursorOffset</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> node = editor.selection.getNode(),
					range, view, offset;

				<span class="hljs-keyword">if</span> ( editor.wp &amp;&amp; editor.wp.getView &amp;&amp; ( view = editor.wp.getView( node ) ) ) {
					offset = view.getBoundingClientRect();
				} <span class="hljs-keyword">else</span> {
					range = editor.selection.getRng();

					<span class="hljs-keyword">try</span> {
						offset = range.getClientRects()[<span class="hljs-number">0</span>];
					} <span class="hljs-keyword">catch</span>( er ) {}

					<span class="hljs-keyword">if</span> ( ! offset ) {
						offset = node.getBoundingClientRect();
					}
				}

				<span class="hljs-keyword">return</span> offset.height ? offset : <span class="hljs-literal">false</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Make sure the cursor is always visible.
This is not only necessary to keep the cursor between the toolbars,
but also to scroll the window when the cursor moves out of the viewport to a wpview.
Setting a buffer &gt; 0 will prevent the browser default.
Some browsers will scroll to the middle,
others to the top/bottom of the <em>window</em> when moving the cursor out of the viewport.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mceKeyup</span>(<span class="hljs-params"> event </span>) </span>{
				<span class="hljs-keyword">var</span> key = event.keyCode;</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Bail on special keys.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( key &lt;= <span class="hljs-number">47</span> &amp;&amp; ! ( key === VK.SPACEBAR || key === VK.ENTER || key === VK.DELETE || key === VK.BACKSPACE || key === VK.UP || key === VK.LEFT || key === VK.DOWN || key === VK.UP ) ) {
					<span class="hljs-keyword">return</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>OS keys, function keys, num lock, scroll lock</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( ( key &gt;= <span class="hljs-number">91</span> &amp;&amp; key &lt;= <span class="hljs-number">93</span> ) || ( key &gt;= <span class="hljs-number">112</span> &amp;&amp; key &lt;= <span class="hljs-number">123</span> ) || key === <span class="hljs-number">144</span> || key === <span class="hljs-number">145</span> ) {
					<span class="hljs-keyword">return</span>;
				}

				mceScroll( key );
			}

			<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mceScroll</span>(<span class="hljs-params"> key </span>) </span>{
				<span class="hljs-keyword">var</span> offset = mceGetCursorOffset(),
					buffer = <span class="hljs-number">50</span>,
					cursorTop, cursorBottom, editorTop, editorBottom;

				<span class="hljs-keyword">if</span> ( ! offset ) {
					<span class="hljs-keyword">return</span>;
				}

				cursorTop = offset.top + editor.iframeElement.getBoundingClientRect().top;
				cursorBottom = cursorTop + offset.height;
				cursorTop = cursorTop - buffer;
				cursorBottom = cursorBottom + buffer;
				editorTop = heights.adminBarHeight + heights.toolsHeight + heights.menuBarHeight + heights.visualTopHeight;
				editorBottom = heights.windowHeight - ( advanced ? heights.bottomHeight + heights.statusBarHeight : <span class="hljs-number">0</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Don’t scroll if the node is taller than the visible part of the editor</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( editorBottom - editorTop &lt; offset.height ) {
					<span class="hljs-keyword">return</span>;
				}

				<span class="hljs-keyword">if</span> ( cursorTop &lt; editorTop &amp;&amp; ( key === VK.UP || key === VK.LEFT || key === VK.BACKSPACE ) ) {
					<span class="hljs-built_in">window</span>.scrollTo( <span class="hljs-built_in">window</span>.pageXOffset, cursorTop + <span class="hljs-built_in">window</span>.pageYOffset - editorTop );
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( cursorBottom &gt; editorBottom ) {
					<span class="hljs-built_in">window</span>.scrollTo( <span class="hljs-built_in">window</span>.pageXOffset, cursorBottom + <span class="hljs-built_in">window</span>.pageYOffset - editorBottom );
				}
			}

			<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mceFullscreenToggled</span>(<span class="hljs-params"> event </span>) </span>{
				<span class="hljs-keyword">if</span> ( ! event.state ) {
					adjust();
				}
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Adjust when switching editor modes.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mceShow</span>(<span class="hljs-params"></span>) </span>{
				$<span class="hljs-built_in">window</span>.on( <span class="hljs-string">'scroll.mce-float-panels'</span>, hideFloatPanels );

				setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					editor.execCommand( <span class="hljs-string">'wpAutoResize'</span> );
					adjust();
				}, <span class="hljs-number">300</span> );
			}

			<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mceHide</span>(<span class="hljs-params"></span>) </span>{
				$<span class="hljs-built_in">window</span>.off( <span class="hljs-string">'scroll.mce-float-panels'</span> );

				setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">var</span> top = $contentWrap.offset().top;

					<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">window</span>.pageYOffset &gt; top ) {
						<span class="hljs-built_in">window</span>.scrollTo( <span class="hljs-built_in">window</span>.pageXOffset, top - heights.adminBarHeight );
					}

					textEditorResize();
					adjust();
				}, <span class="hljs-number">100</span> );

				adjust();
			}

			<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toggleAdvanced</span>(<span class="hljs-params"></span>) </span>{
				advanced = ! advanced;
			}

			mceBind = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				editor.on( <span class="hljs-string">'keyup'</span>, mceKeyup );
				editor.on( <span class="hljs-string">'show'</span>, mceShow );
				editor.on( <span class="hljs-string">'hide'</span>, mceHide );
				editor.on( <span class="hljs-string">'wp-toolbar-toggle'</span>, toggleAdvanced );</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Adjust when the editor resizes.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				editor.on( <span class="hljs-string">'setcontent wp-autoresize wp-toolbar-toggle'</span>, adjust );</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Don’t hide the caret after undo/redo.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				editor.on( <span class="hljs-string">'undo redo'</span>, mceScroll );</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Adjust when exiting TinyMCE’s fullscreen mode.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				editor.on( <span class="hljs-string">'FullscreenStateChanged'</span>, mceFullscreenToggled );

				$<span class="hljs-built_in">window</span>.off( <span class="hljs-string">'scroll.mce-float-panels'</span> ).on( <span class="hljs-string">'scroll.mce-float-panels'</span>, hideFloatPanels );
			};

			mceUnbind = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				editor.off( <span class="hljs-string">'keyup'</span>, mceKeyup );
				editor.off( <span class="hljs-string">'show'</span>, mceShow );
				editor.off( <span class="hljs-string">'hide'</span>, mceHide );
				editor.off( <span class="hljs-string">'wp-toolbar-toggle'</span>, toggleAdvanced );
				editor.off( <span class="hljs-string">'setcontent wp-autoresize wp-toolbar-toggle'</span>, adjust );
				editor.off( <span class="hljs-string">'undo redo'</span>, mceScroll );
				editor.off( <span class="hljs-string">'FullscreenStateChanged'</span>, mceFullscreenToggled );

				$<span class="hljs-built_in">window</span>.off( <span class="hljs-string">'scroll.mce-float-panels'</span> );
			};

			<span class="hljs-keyword">if</span> ( $wrap.hasClass( <span class="hljs-string">'wp-editor-expand'</span> ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Adjust “immediately”</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				mceBind();
				initialResize( adjust );
			}
		} );</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Adjust the toolbars based on the active editor mode.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">adjust</span>(<span class="hljs-params"> event </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Make sure we’re not in fullscreen mode.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( fullscreen &amp;&amp; fullscreen.settings.visible ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">var</span> windowPos = $<span class="hljs-built_in">window</span>.scrollTop(),
				type = event &amp;&amp; event.type,
				resize = type !== <span class="hljs-string">'scroll'</span>,
				visual = mceEditor &amp;&amp; ! mceEditor.isHidden(),
				buffer = autoresizeMinHeight,
				postBodyTop = $postBody.offset().top,
				borderWidth = <span class="hljs-number">1</span>,
				contentWrapWidth = $contentWrap.width(),
				$top, $editor, sidebarTop, footerTop, canPin,
				topPos, topHeight, editorPos, editorHeight;</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Refresh the heights</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( resize || ! heights.windowHeight ) {
				getHeights();
			}

			<span class="hljs-keyword">if</span> ( ! visual &amp;&amp; type === <span class="hljs-string">'resize'</span> ) {
				textEditorResize();
			}

			<span class="hljs-keyword">if</span> ( visual ) {
				$top = $visualTop;
				$editor = $visualEditor;
				topHeight = heights.visualTopHeight;
			} <span class="hljs-keyword">else</span> {
				$top = $textTop;
				$editor = $textEditor;
				topHeight = heights.textTopHeight;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>TinyMCE still initializing.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( ! visual &amp;&amp; ! $top.length ) {
				<span class="hljs-keyword">return</span>;
			}

			topPos = $top.parent().offset().top;
			editorPos = $editor.offset().top;
			editorHeight = $editor.outerHeight();</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Should we pin?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			canPin = visual ? autoresizeMinHeight + topHeight : autoresizeMinHeight + <span class="hljs-number">20</span>; <span class="hljs-comment">// 20px from textarea padding</span>
			canPin = editorHeight &gt; ( canPin + <span class="hljs-number">5</span> );

			<span class="hljs-keyword">if</span> ( ! canPin ) {
				<span class="hljs-keyword">if</span> ( resize ) {
					$tools.css( {
						<span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,
						<span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,
						<span class="hljs-attr">width</span>: contentWrapWidth
					} );

					<span class="hljs-keyword">if</span> ( visual &amp;&amp; $menuBar.length ) {
						$menuBar.css( {
							<span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,
							<span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,
							<span class="hljs-attr">width</span>: contentWrapWidth - ( borderWidth * <span class="hljs-number">2</span> )
						} );
					}

					$top.css( {
						<span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,
						<span class="hljs-attr">top</span>: heights.menuBarHeight,
						<span class="hljs-attr">width</span>: contentWrapWidth - ( borderWidth * <span class="hljs-number">2</span> ) - ( visual ? <span class="hljs-number">0</span> : ( $top.outerWidth() - $top.width() ) )
					} );

					$statusBar.attr( <span class="hljs-string">'style'</span>, advanced ? <span class="hljs-string">''</span> : <span class="hljs-string">'visibility: hidden;'</span> );
					$bottom.attr( <span class="hljs-string">'style'</span>, <span class="hljs-string">''</span> );
				}
			} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Maybe pin the top.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( ( ! fixedTop || resize ) &amp;&amp;</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Handle scrolling down.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					( windowPos &gt;= ( topPos - heights.toolsHeight - heights.adminBarHeight ) &amp;&amp;</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Handle scrolling up.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					windowPos &lt;= ( topPos - heights.toolsHeight - heights.adminBarHeight + editorHeight - buffer ) ) ) {
					fixedTop = <span class="hljs-literal">true</span>;

					$tools.css( {
						<span class="hljs-attr">position</span>: <span class="hljs-string">'fixed'</span>,
						<span class="hljs-attr">top</span>: heights.adminBarHeight,
						<span class="hljs-attr">width</span>: contentWrapWidth
					} );

					<span class="hljs-keyword">if</span> ( visual &amp;&amp; $menuBar.length ) {
						$menuBar.css( {
							<span class="hljs-attr">position</span>: <span class="hljs-string">'fixed'</span>,
							<span class="hljs-attr">top</span>: heights.adminBarHeight + heights.toolsHeight,
							<span class="hljs-attr">width</span>: contentWrapWidth - ( borderWidth * <span class="hljs-number">2</span> ) - ( visual ? <span class="hljs-number">0</span> : ( $top.outerWidth() - $top.width() ) )
						} );
					}

					$top.css( {
						<span class="hljs-attr">position</span>: <span class="hljs-string">'fixed'</span>,
						<span class="hljs-attr">top</span>: heights.adminBarHeight + heights.toolsHeight + heights.menuBarHeight,
						<span class="hljs-attr">width</span>: contentWrapWidth - ( borderWidth * <span class="hljs-number">2</span> ) - ( visual ? <span class="hljs-number">0</span> : ( $top.outerWidth() - $top.width() ) )
					} );</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Maybe unpin the top.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( fixedTop || resize ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Handle scrolling up.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( windowPos &lt;= ( topPos - heights.toolsHeight - heights.adminBarHeight ) ) {
						fixedTop = <span class="hljs-literal">false</span>;

						$tools.css( {
							<span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,
							<span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,
							<span class="hljs-attr">width</span>: contentWrapWidth
						} );

						<span class="hljs-keyword">if</span> ( visual &amp;&amp; $menuBar.length ) {
							$menuBar.css( {
								<span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,
								<span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,
								<span class="hljs-attr">width</span>: contentWrapWidth - ( borderWidth * <span class="hljs-number">2</span> )
							} );
						}

						$top.css( {
							<span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,
							<span class="hljs-attr">top</span>: heights.menuBarHeight,
							<span class="hljs-attr">width</span>: contentWrapWidth - ( borderWidth * <span class="hljs-number">2</span> ) - ( visual ? <span class="hljs-number">0</span> : ( $top.outerWidth() - $top.width() ) )
						} );</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Handle scrolling down.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( windowPos &gt;= ( topPos - heights.toolsHeight - heights.adminBarHeight + editorHeight - buffer ) ) {
						fixedTop = <span class="hljs-literal">false</span>;

						$tools.css( {
							<span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,
							<span class="hljs-attr">top</span>: editorHeight - buffer,
							<span class="hljs-attr">width</span>: contentWrapWidth
						} );

						<span class="hljs-keyword">if</span> ( visual &amp;&amp; $menuBar.length ) {
							$menuBar.css( {
								<span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,
								<span class="hljs-attr">top</span>: editorHeight - buffer,
								<span class="hljs-attr">width</span>: contentWrapWidth - ( borderWidth * <span class="hljs-number">2</span> )
							} );
						}

						$top.css( {
							<span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,
							<span class="hljs-attr">top</span>: editorHeight - buffer + heights.menuBarHeight,
							<span class="hljs-attr">width</span>: contentWrapWidth - ( borderWidth * <span class="hljs-number">2</span> ) - ( visual ? <span class="hljs-number">0</span> : ( $top.outerWidth() - $top.width() ) )
						} );
					}
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Maybe adjust the bottom bar.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( ( ! fixedBottom || ( resize &amp;&amp; advanced ) ) &amp;&amp;</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>+[n] for the border around the .wp-editor-container.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						( windowPos + heights.windowHeight ) &lt;= ( editorPos + editorHeight + heights.bottomHeight + heights.statusBarHeight + borderWidth ) ) {

					<span class="hljs-keyword">if</span> ( event &amp;&amp; event.deltaHeight &gt; <span class="hljs-number">0</span> &amp;&amp; event.deltaHeight &lt; <span class="hljs-number">100</span> ) {
						<span class="hljs-built_in">window</span>.scrollBy( <span class="hljs-number">0</span>, event.deltaHeight );
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( visual &amp;&amp; advanced ) {
						fixedBottom = <span class="hljs-literal">true</span>;

						$statusBar.css( {
							<span class="hljs-attr">position</span>: <span class="hljs-string">'fixed'</span>,
							<span class="hljs-attr">bottom</span>: heights.bottomHeight,
							<span class="hljs-attr">visibility</span>: <span class="hljs-string">''</span>,
							<span class="hljs-attr">width</span>: contentWrapWidth - ( borderWidth * <span class="hljs-number">2</span> )
						} );

						$bottom.css( {
							<span class="hljs-attr">position</span>: <span class="hljs-string">'fixed'</span>,
							<span class="hljs-attr">bottom</span>: <span class="hljs-number">0</span>,
							<span class="hljs-attr">width</span>: contentWrapWidth
						} );
					}
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( ( ! advanced &amp;&amp; fixedBottom ) ||
						( ( fixedBottom || resize ) &amp;&amp;
						( windowPos + heights.windowHeight ) &gt; ( editorPos + editorHeight + heights.bottomHeight + heights.statusBarHeight - borderWidth ) ) ) {
					fixedBottom = <span class="hljs-literal">false</span>;

					$statusBar.attr( <span class="hljs-string">'style'</span>, advanced ? <span class="hljs-string">''</span> : <span class="hljs-string">'visibility: hidden;'</span> );
					$bottom.attr( <span class="hljs-string">'style'</span>, <span class="hljs-string">''</span> );
				}
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Sidebar pinning</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( $postboxContainer.width() &lt; <span class="hljs-number">300</span> &amp;&amp; heights.windowWidth &gt; <span class="hljs-number">600</span> &amp;&amp; <span class="hljs-comment">// sidebar position is changed with @media from CSS, make sure it is on the side</span>
				$<span class="hljs-built_in">document</span>.height() &gt; ( $sideSortables.height() + postBodyTop + <span class="hljs-number">120</span> ) &amp;&amp; <span class="hljs-comment">// the sidebar is not the tallest element</span>
				heights.windowHeight &lt; editorHeight ) { <span class="hljs-comment">// the editor is taller than the viewport</span>

				<span class="hljs-keyword">if</span> ( ( heights.sideSortablesHeight + pinnedToolsTop + sidebarBottom ) &gt; heights.windowHeight || fixedSideTop || fixedSideBottom ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Reset when scrolling to the top</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( windowPos + pinnedToolsTop &lt;= postBodyTop ) {
						$sideSortables.attr( <span class="hljs-string">'style'</span>, <span class="hljs-string">''</span> );
						fixedSideTop = fixedSideBottom = <span class="hljs-literal">false</span>;
					} <span class="hljs-keyword">else</span> {
						<span class="hljs-keyword">if</span> ( windowPos &gt; lastScrollPosition ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Scrolling down</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							<span class="hljs-keyword">if</span> ( fixedSideTop ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>let it scroll</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>								fixedSideTop = <span class="hljs-literal">false</span>;
								sidebarTop = $sideSortables.offset().top - heights.adminBarHeight;
								footerTop = $footer.offset().top;</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>don’t get over the footer</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>								<span class="hljs-keyword">if</span> ( footerTop &lt; sidebarTop + heights.sideSortablesHeight + sidebarBottom ) {
									sidebarTop = footerTop - heights.sideSortablesHeight - <span class="hljs-number">12</span>;
								}

								$sideSortables.css({
									<span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,
									<span class="hljs-attr">top</span>: sidebarTop,
									<span class="hljs-attr">bottom</span>: <span class="hljs-string">''</span>
								});
							} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( ! fixedSideBottom &amp;&amp; heights.sideSortablesHeight + $sideSortables.offset().top + sidebarBottom &lt; windowPos + heights.windowHeight ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>pin the bottom</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>								fixedSideBottom = <span class="hljs-literal">true</span>;

								$sideSortables.css({
									<span class="hljs-attr">position</span>: <span class="hljs-string">'fixed'</span>,
									<span class="hljs-attr">top</span>: <span class="hljs-string">'auto'</span>,
									<span class="hljs-attr">bottom</span>: sidebarBottom
								});
							}
						} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( windowPos &lt; lastScrollPosition ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>Scrolling up</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							<span class="hljs-keyword">if</span> ( fixedSideBottom ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>let it scroll</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>								fixedSideBottom = <span class="hljs-literal">false</span>;
								sidebarTop = $sideSortables.offset().top - sidebarBottom;
								footerTop = $footer.offset().top;</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>don’t get over the footer</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>								<span class="hljs-keyword">if</span> ( footerTop &lt; sidebarTop + heights.sideSortablesHeight + sidebarBottom ) {
									sidebarTop = footerTop - heights.sideSortablesHeight - <span class="hljs-number">12</span>;
								}

								$sideSortables.css({
									<span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,
									<span class="hljs-attr">top</span>: sidebarTop,
									<span class="hljs-attr">bottom</span>: <span class="hljs-string">''</span>
								});
							} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( ! fixedSideTop &amp;&amp; $sideSortables.offset().top &gt;= windowPos + pinnedToolsTop ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>pin the top</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>								fixedSideTop = <span class="hljs-literal">true</span>;

								$sideSortables.css({
									<span class="hljs-attr">position</span>: <span class="hljs-string">'fixed'</span>,
									<span class="hljs-attr">top</span>: pinnedToolsTop,
									<span class="hljs-attr">bottom</span>: <span class="hljs-string">''</span>
								});
							}
						}
					}
				} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>if the sidebar container is smaller than the viewport, then pin/unpin the top when scrolling</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( windowPos &gt;= ( postBodyTop - pinnedToolsTop ) ) {

						$sideSortables.css( {
							<span class="hljs-attr">position</span>: <span class="hljs-string">'fixed'</span>,
							<span class="hljs-attr">top</span>: pinnedToolsTop
						} );
					} <span class="hljs-keyword">else</span> {
						$sideSortables.attr( <span class="hljs-string">'style'</span>, <span class="hljs-string">''</span> );
					}

					fixedSideTop = fixedSideBottom = <span class="hljs-literal">false</span>;
				}

				lastScrollPosition = windowPos;
			} <span class="hljs-keyword">else</span> {
				$sideSortables.attr( <span class="hljs-string">'style'</span>, <span class="hljs-string">''</span> );
				fixedSideTop = fixedSideBottom = <span class="hljs-literal">false</span>;
			}

			<span class="hljs-keyword">if</span> ( resize ) {
				$contentWrap.css( {
					<span class="hljs-attr">paddingTop</span>: heights.toolsHeight
				} );

				<span class="hljs-keyword">if</span> ( visual ) {
					$visualEditor.css( {
						<span class="hljs-attr">paddingTop</span>: heights.visualTopHeight + heights.menuBarHeight
					} );
				} <span class="hljs-keyword">else</span> {
					$textEditor.css( {
						<span class="hljs-attr">marginTop</span>: heights.textTopHeight
					} );
				}
			}
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fullscreenHide</span>(<span class="hljs-params"></span>) </span>{
			textEditorResize();
			adjust();
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initialResize</span>(<span class="hljs-params"> callback </span>) </span>{
			<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">6</span>; i++ ) {
				setTimeout( callback, <span class="hljs-number">500</span> * i );
			}
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">afterScroll</span>(<span class="hljs-params"></span>) </span>{
			clearTimeout( scrollTimer );
			scrollTimer = setTimeout( adjust, <span class="hljs-number">100</span> );
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">on</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Scroll to the top when triggering this from JS.
Ensures toolbars are pinned properly.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">window</span>.pageYOffset &amp;&amp; <span class="hljs-built_in">window</span>.pageYOffset &gt; pageYOffsetAtTop ) {
				<span class="hljs-built_in">window</span>.scrollTo( <span class="hljs-built_in">window</span>.pageXOffset, <span class="hljs-number">0</span> );
			}

			$wrap.addClass( <span class="hljs-string">'wp-editor-expand'</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>Adjust when the window is scrolled or resized.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$<span class="hljs-built_in">window</span>.on( <span class="hljs-string">'scroll.editor-expand resize.editor-expand'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
				adjust( event.type );
				afterScroll();
			} );</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Adjust when collapsing the menu, changing the columns, changing the body class.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$<span class="hljs-built_in">document</span>.on( <span class="hljs-string">'wp-collapse-menu.editor-expand postboxes-columnchange.editor-expand editor-classchange.editor-expand'</span>, adjust )
				.on( <span class="hljs-string">'postbox-toggled.editor-expand postbox-moved.editor-expand'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">if</span> ( ! fixedSideTop &amp;&amp; ! fixedSideBottom &amp;&amp; <span class="hljs-built_in">window</span>.pageYOffset &gt; pinnedToolsTop ) {
						fixedSideBottom = <span class="hljs-literal">true</span>;
						<span class="hljs-built_in">window</span>.scrollBy( <span class="hljs-number">0</span>, <span class="hljs-number">-1</span> );
						adjust();
						<span class="hljs-built_in">window</span>.scrollBy( <span class="hljs-number">0</span>, <span class="hljs-number">1</span> );
					}

					adjust();
				}).on( <span class="hljs-string">'wp-window-resized.editor-expand'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">if</span> ( mceEditor &amp;&amp; ! mceEditor.isHidden() ) {
						mceEditor.execCommand( <span class="hljs-string">'wpAutoResize'</span> );
					} <span class="hljs-keyword">else</span> {
						textEditorResize();
					}
				});

			$textEditor.on( <span class="hljs-string">'focus.editor-expand input.editor-expand propertychange.editor-expand'</span>, textEditorResize );
			mceBind();</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>Adjust when entering/exiting fullscreen mode.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			fullscreen &amp;&amp; fullscreen.pubsub.subscribe( <span class="hljs-string">'hidden'</span>, fullscreenHide );

			<span class="hljs-keyword">if</span> ( mceEditor ) {
				mceEditor.settings.wp_autoresize_on = <span class="hljs-literal">true</span>;
				mceEditor.execCommand( <span class="hljs-string">'wpAutoResizeOn'</span> );

				<span class="hljs-keyword">if</span> ( ! mceEditor.isHidden() ) {
					mceEditor.execCommand( <span class="hljs-string">'wpAutoResize'</span> );
				}
			}

			<span class="hljs-keyword">if</span> ( ! mceEditor || mceEditor.isHidden() ) {
				textEditorResize();
			}

			adjust();

			$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'editor-expand-on'</span> );
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">off</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> height = <span class="hljs-built_in">parseInt</span>( <span class="hljs-built_in">window</span>.getUserSetting( <span class="hljs-string">'ed_size'</span>, <span class="hljs-number">300</span> ), <span class="hljs-number">10</span> );

			<span class="hljs-keyword">if</span> ( height &lt; <span class="hljs-number">50</span> ) {
				height = <span class="hljs-number">50</span>;
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( height &gt; <span class="hljs-number">5000</span> ) {
				height = <span class="hljs-number">5000</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>Scroll to the top when triggering this from JS.
Ensures toolbars are reset properly.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">window</span>.pageYOffset &amp;&amp; <span class="hljs-built_in">window</span>.pageYOffset &gt; pageYOffsetAtTop ) {
				<span class="hljs-built_in">window</span>.scrollTo( <span class="hljs-built_in">window</span>.pageXOffset, <span class="hljs-number">0</span> );
			}

			$wrap.removeClass( <span class="hljs-string">'wp-editor-expand'</span> );

			$<span class="hljs-built_in">window</span>.off( <span class="hljs-string">'.editor-expand'</span> );
			$<span class="hljs-built_in">document</span>.off( <span class="hljs-string">'.editor-expand'</span> );
			$textEditor.off( <span class="hljs-string">'.editor-expand'</span> );
			mceUnbind();</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>Adjust when entering/exiting fullscreen mode.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			fullscreen &amp;&amp; fullscreen.pubsub.unsubscribe( <span class="hljs-string">'hidden'</span>, fullscreenHide );</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>Reset all css</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$.each( [ $visualTop, $textTop, $tools, $menuBar, $bottom, $statusBar, $contentWrap, $visualEditor, $textEditor, $sideSortables ], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> i, element </span>) </span>{
				element &amp;&amp; element.attr( <span class="hljs-string">'style'</span>, <span class="hljs-string">''</span> );
			});

			fixedTop = fixedBottom = fixedSideTop = fixedSideBottom = <span class="hljs-literal">false</span>;

			<span class="hljs-keyword">if</span> ( mceEditor ) {
				mceEditor.settings.wp_autoresize_on = <span class="hljs-literal">false</span>;
				mceEditor.execCommand( <span class="hljs-string">'wpAutoResizeOff'</span> );

				<span class="hljs-keyword">if</span> ( ! mceEditor.isHidden() ) {
					$textEditor.hide();

					<span class="hljs-keyword">if</span> ( height ) {
						mceEditor.theme.resizeTo( <span class="hljs-literal">null</span>, height );
					}
				}
			}

			<span class="hljs-keyword">if</span> ( height ) {
				$textEditor.height( height );
			}

			$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'editor-expand-off'</span> );
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>Start on load</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( $wrap.hasClass( <span class="hljs-string">'wp-editor-expand'</span> ) ) {
			on();</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>Ideally we need to resize just after CSS has fully loaded and QuickTags is ready.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( $contentWrap.hasClass( <span class="hljs-string">'html-active'</span> ) ) {
				initialResize( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					adjust();
					textEditorResize();
				} );
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>Show the on/off checkbox</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$( <span class="hljs-string">'#adv-settings .editor-expand'</span> ).show();
		$( <span class="hljs-string">'#editor-expand-toggle'</span> ).on( <span class="hljs-string">'change.editor-expand'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">if</span> ( $(<span class="hljs-keyword">this</span>).prop( <span class="hljs-string">'checked'</span> ) ) {
				on();
				<span class="hljs-built_in">window</span>.setUserSetting( <span class="hljs-string">'editor_expand'</span>, <span class="hljs-string">'on'</span> );
			} <span class="hljs-keyword">else</span> {
				off();
				<span class="hljs-built_in">window</span>.setUserSetting( <span class="hljs-string">'editor_expand'</span>, <span class="hljs-string">'off'</span> );
			}
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>Expose on() and off()</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-built_in">window</span>.editorExpand = {
			<span class="hljs-attr">on</span>: on,
			<span class="hljs-attr">off</span>: off
		};
	} );

	<span class="hljs-comment">/* DFW. */</span>
	$( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">var</span> $body = $( <span class="hljs-built_in">document</span>.body ),
			$wrap = $( <span class="hljs-string">'#wpcontent'</span> ),
			$editor = $( <span class="hljs-string">'#post-body-content'</span> ),
			$title = $( <span class="hljs-string">'#title'</span> ),
			$content = $( <span class="hljs-string">'#content'</span> ),
			$overlay = $( <span class="hljs-built_in">document</span>.createElement( <span class="hljs-string">'DIV'</span> ) ),
			$slug = $( <span class="hljs-string">'#edit-slug-box'</span> ),
			$slugFocusEl = $slug.find( <span class="hljs-string">'a'</span> )
				.add( $slug.find( <span class="hljs-string">'button'</span> ) )
				.add( $slug.find( <span class="hljs-string">'input'</span> ) ),
			$menuWrap = $( <span class="hljs-string">'#adminmenuwrap'</span> ),
			$editorWindow = $(),
			$editorIframe = $(),
			_isActive = <span class="hljs-built_in">window</span>.getUserSetting( <span class="hljs-string">'editor_expand'</span>, <span class="hljs-string">'on'</span> ) === <span class="hljs-string">'on'</span>,
			_isOn = _isActive ? <span class="hljs-built_in">window</span>.getUserSetting( <span class="hljs-string">'post_dfw'</span> ) === <span class="hljs-string">'on'</span> : <span class="hljs-literal">false</span>,
			traveledX = <span class="hljs-number">0</span>,
			traveledY = <span class="hljs-number">0</span>,
			buffer = <span class="hljs-number">20</span>,
			faded, fadedAdminBar, fadedSlug,
			editorRect, x, y, mouseY, scrollY,
			focusLostTimer, overlayTimer, editorHasFocus;

		$body.append( $overlay );

		$overlay.css( {
			<span class="hljs-attr">display</span>: <span class="hljs-string">'none'</span>,
			<span class="hljs-attr">position</span>: <span class="hljs-string">'fixed'</span>,
			<span class="hljs-attr">top</span>: $adminBar.height(),
			<span class="hljs-attr">right</span>: <span class="hljs-number">0</span>,
			<span class="hljs-attr">bottom</span>: <span class="hljs-number">0</span>,
			<span class="hljs-attr">left</span>: <span class="hljs-number">0</span>,
			<span class="hljs-string">'z-index'</span>: <span class="hljs-number">9997</span>
		} );

		$editor.css( {
			<span class="hljs-attr">position</span>: <span class="hljs-string">'relative'</span>
		} );

		$<span class="hljs-built_in">window</span>.on( <span class="hljs-string">'mousemove.focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
			mouseY = event.pageY;
		} );

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">recalcEditorRect</span>(<span class="hljs-params"></span>) </span>{
			editorRect = $editor.offset();
			editorRect.right = editorRect.left + $editor.outerWidth();
			editorRect.bottom = editorRect.top + $editor.outerHeight();
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">activate</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">if</span> ( ! _isActive ) {
				_isActive = <span class="hljs-literal">true</span>;

				$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'dfw-activate'</span> );
				$content.on( <span class="hljs-string">'keydown.focus-shortcut'</span>, toggleViaKeyboard );
			}
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deactivate</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">if</span> ( _isActive ) {
				off();

				_isActive = <span class="hljs-literal">false</span>;

				$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'dfw-deactivate'</span> );
				$content.off( <span class="hljs-string">'keydown.focus-shortcut'</span> );
			}
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isActive</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">return</span> _isActive;
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">on</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">if</span> ( ! _isOn &amp;&amp; _isActive ) {
				_isOn = <span class="hljs-literal">true</span>;

				$content.on( <span class="hljs-string">'keydown.focus'</span>, fadeOut );

				$title.add( $content ).on( <span class="hljs-string">'blur.focus'</span>, maybeFadeIn );

				fadeOut();

				<span class="hljs-built_in">window</span>.setUserSetting( <span class="hljs-string">'post_dfw'</span>, <span class="hljs-string">'on'</span> );

				$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'dfw-on'</span> );
			}
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">off</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">if</span> ( _isOn ) {
				_isOn = <span class="hljs-literal">false</span>;

				$title.add( $content ).off( <span class="hljs-string">'.focus'</span> );

				fadeIn();

				$editor.off( <span class="hljs-string">'.focus'</span> );

				<span class="hljs-built_in">window</span>.setUserSetting( <span class="hljs-string">'post_dfw'</span>, <span class="hljs-string">'off'</span> );

				$<span class="hljs-built_in">document</span>.trigger( <span class="hljs-string">'dfw-off'</span> );
			}
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toggle</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">if</span> ( _isOn ) {
				off();
			} <span class="hljs-keyword">else</span> {
				on();
			}
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isOn</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">return</span> _isOn;
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fadeOut</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">var</span> isMac,
				key = event &amp;&amp; event.keyCode;

			<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">window</span>.navigator.platform ) {
				isMac = ( <span class="hljs-built_in">window</span>.navigator.platform.indexOf( <span class="hljs-string">'Mac'</span> ) &gt; <span class="hljs-number">-1</span> );
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>fadeIn and return on Escape and keyboard shortcut Alt+Shift+W and Ctrl+Opt+W.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( key === <span class="hljs-number">27</span> || ( key === <span class="hljs-number">87</span> &amp;&amp; event.altKey &amp;&amp; ( ( ! isMac &amp;&amp; event.shiftKey ) || ( isMac &amp;&amp; event.ctrlKey ) ) ) ) {
				fadeIn( event );
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span> ( event &amp;&amp; ( event.metaKey || ( event.ctrlKey &amp;&amp; ! event.altKey ) || ( event.altKey &amp;&amp; event.shiftKey ) || ( key &amp;&amp; (</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>Special keys ( tab, ctrl, alt, esc, arrow keys… )</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				( key &lt;= <span class="hljs-number">47</span> &amp;&amp; key !== <span class="hljs-number">8</span> &amp;&amp; key !== <span class="hljs-number">13</span> &amp;&amp; key !== <span class="hljs-number">32</span> &amp;&amp; key !== <span class="hljs-number">46</span> ) ||</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>Windows keys</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				( key &gt;= <span class="hljs-number">91</span> &amp;&amp; key &lt;= <span class="hljs-number">93</span> ) ||</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>F keys</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				( key &gt;= <span class="hljs-number">112</span> &amp;&amp; key &lt;= <span class="hljs-number">135</span> ) ||</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>Num Lock, Scroll Lock, OEM</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				( key &gt;= <span class="hljs-number">144</span> &amp;&amp; key &lt;= <span class="hljs-number">150</span> ) ||</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>OEM or non-printable</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				key &gt;= <span class="hljs-number">224</span>
			) ) ) ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span> ( ! faded ) {
				faded = <span class="hljs-literal">true</span>;

				clearTimeout( overlayTimer );

				overlayTimer = setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					$overlay.show();
				}, <span class="hljs-number">600</span> );

				$editor.css( <span class="hljs-string">'z-index'</span>, <span class="hljs-number">9998</span> );

				$overlay</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>Always recalculate the editor area entering the overlay with the mouse.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					.on( <span class="hljs-string">'mouseenter.focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						recalcEditorRect();

						$<span class="hljs-built_in">window</span>.on( <span class="hljs-string">'scroll.focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
							<span class="hljs-keyword">var</span> nScrollY = <span class="hljs-built_in">window</span>.pageYOffset;

							<span class="hljs-keyword">if</span> ( (
								scrollY &amp;&amp; mouseY &amp;&amp;
								scrollY !== nScrollY
							) &amp;&amp; (
								mouseY &lt; editorRect.top - buffer ||
								mouseY &gt; editorRect.bottom + buffer
							) ) {
								fadeIn();
							}

							scrollY = nScrollY;
						} );
					} )
					.on( <span class="hljs-string">'mouseleave.focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						x = y =  <span class="hljs-literal">null</span>;
						traveledX = traveledY = <span class="hljs-number">0</span>;

						$<span class="hljs-built_in">window</span>.off( <span class="hljs-string">'scroll.focus'</span> );
					} )</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>Fade in when the mouse moves away form the editor area.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					.on( <span class="hljs-string">'mousemove.focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
						<span class="hljs-keyword">var</span> nx = event.clientX,
							ny = event.clientY,
							pageYOffset = <span class="hljs-built_in">window</span>.pageYOffset,
							pageXOffset = <span class="hljs-built_in">window</span>.pageXOffset;

						<span class="hljs-keyword">if</span> ( x &amp;&amp; y &amp;&amp; ( nx !== x || ny !== y ) ) {
							<span class="hljs-keyword">if</span> (
								( ny &lt;= y &amp;&amp; ny &lt; editorRect.top - pageYOffset ) ||
								( ny &gt;= y &amp;&amp; ny &gt; editorRect.bottom - pageYOffset ) ||
								( nx &lt;= x &amp;&amp; nx &lt; editorRect.left - pageXOffset ) ||
								( nx &gt;= x &amp;&amp; nx &gt; editorRect.right - pageXOffset )
							) {
								traveledX += <span class="hljs-built_in">Math</span>.abs( x - nx );
								traveledY += <span class="hljs-built_in">Math</span>.abs( y - ny );

								<span class="hljs-keyword">if</span> ( (
									ny &lt;= editorRect.top - buffer - pageYOffset ||
									ny &gt;= editorRect.bottom + buffer - pageYOffset ||
									nx &lt;= editorRect.left - buffer - pageXOffset ||
									nx &gt;= editorRect.right + buffer - pageXOffset
								) &amp;&amp; (
									traveledX &gt; <span class="hljs-number">10</span> ||
									traveledY &gt; <span class="hljs-number">10</span>
								) ) {
									fadeIn();

									x = y =  <span class="hljs-literal">null</span>;
									traveledX = traveledY = <span class="hljs-number">0</span>;

									<span class="hljs-keyword">return</span>;
								}
							} <span class="hljs-keyword">else</span> {
								traveledX = traveledY = <span class="hljs-number">0</span>;
							}
						}

						x = nx;
						y = ny;
					} )</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>When the overlay is touched, always fade in and cancel the event.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					.on( <span class="hljs-string">'touchstart.focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
						event.preventDefault();
						fadeIn();
					} );

				$editor.off( <span class="hljs-string">'mouseenter.focus'</span> );

				<span class="hljs-keyword">if</span> ( focusLostTimer ) {
					clearTimeout( focusLostTimer );
					focusLostTimer = <span class="hljs-literal">null</span>;
				}

				$body.addClass( <span class="hljs-string">'focus-on'</span> ).removeClass( <span class="hljs-string">'focus-off'</span> );
			}

			fadeOutAdminBar();
			fadeOutSlug();
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fadeIn</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">if</span> ( faded ) {
				faded = <span class="hljs-literal">false</span>;

				clearTimeout( overlayTimer );

				overlayTimer = setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					$overlay.hide();
				}, <span class="hljs-number">200</span> );

				$editor.css( <span class="hljs-string">'z-index'</span>, <span class="hljs-string">''</span> );

				$overlay.off( <span class="hljs-string">'mouseenter.focus mouseleave.focus mousemove.focus touchstart.focus'</span> );

				<span class="hljs-comment">/*
				 * When fading in, temporarily watch for refocus and fade back out - helps
				 * with 'accidental' editor exits with the mouse. When fading in and the event
				 * is a key event (Escape or Alt+Shift+W) don't watch for refocus.
				 */</span>
				<span class="hljs-keyword">if</span> ( <span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> event ) {
					$editor.on( <span class="hljs-string">'mouseenter.focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						<span class="hljs-keyword">if</span> ( $.contains( $editor.get( <span class="hljs-number">0</span> ), <span class="hljs-built_in">document</span>.activeElement ) || editorHasFocus ) {
							fadeOut();
						}
					} );
				}

				focusLostTimer = setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					focusLostTimer = <span class="hljs-literal">null</span>;
					$editor.off( <span class="hljs-string">'mouseenter.focus'</span> );
				}, <span class="hljs-number">1000</span> );

				$body.addClass( <span class="hljs-string">'focus-off'</span> ).removeClass( <span class="hljs-string">'focus-on'</span> );
			}

			fadeInAdminBar();
			fadeInSlug();
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">maybeFadeIn</span>(<span class="hljs-params"></span>) </span>{
			setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> position = <span class="hljs-built_in">document</span>.activeElement.compareDocumentPosition( $editor.get( <span class="hljs-number">0</span> ) );

				<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasFocus</span>(<span class="hljs-params"> $el </span>) </span>{
					<span class="hljs-keyword">return</span> $.contains( $el.get( <span class="hljs-number">0</span> ), <span class="hljs-built_in">document</span>.activeElement );
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>The focused node is before or behind the editor area, and not outside the wrap.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( ( position === <span class="hljs-number">2</span> || position === <span class="hljs-number">4</span> ) &amp;&amp; ( hasFocus( $menuWrap ) || hasFocus( $wrap ) || hasFocus( $footer ) ) ) {
					fadeIn();
				}
			}, <span class="hljs-number">0</span> );
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fadeOutAdminBar</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">if</span> ( ! fadedAdminBar &amp;&amp; faded ) {
				fadedAdminBar = <span class="hljs-literal">true</span>;

				$adminBar
					.on( <span class="hljs-string">'mouseenter.focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						$adminBar.addClass( <span class="hljs-string">'focus-off'</span> );
					} )
					.on( <span class="hljs-string">'mouseleave.focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						$adminBar.removeClass( <span class="hljs-string">'focus-off'</span> );
					} );
			}
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fadeInAdminBar</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">if</span> ( fadedAdminBar ) {
				fadedAdminBar = <span class="hljs-literal">false</span>;

				$adminBar.off( <span class="hljs-string">'.focus'</span> );
			}
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fadeOutSlug</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">if</span> ( ! fadedSlug &amp;&amp; faded &amp;&amp; ! $slug.find( <span class="hljs-string">':focus'</span>).length ) {
				fadedSlug = <span class="hljs-literal">true</span>;

				$slug.stop().fadeTo( <span class="hljs-string">'fast'</span>, <span class="hljs-number">0.3</span> ).on( <span class="hljs-string">'mouseenter.focus'</span>, fadeInSlug ).off( <span class="hljs-string">'mouseleave.focus'</span> );

				$slugFocusEl.on( <span class="hljs-string">'focus.focus'</span>, fadeInSlug ).off( <span class="hljs-string">'blur.focus'</span> );
			}
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fadeInSlug</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">if</span> ( fadedSlug ) {
				fadedSlug = <span class="hljs-literal">false</span>;

				$slug.stop().fadeTo( <span class="hljs-string">'fast'</span>, <span class="hljs-number">1</span> ).on( <span class="hljs-string">'mouseleave.focus'</span>, fadeOutSlug ).off( <span class="hljs-string">'mouseenter.focus'</span> );

				$slugFocusEl.on( <span class="hljs-string">'blur.focus'</span>, fadeOutSlug ).off( <span class="hljs-string">'focus.focus'</span> );
			}
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toggleViaKeyboard</span>(<span class="hljs-params"> event </span>) </span>{
			<span class="hljs-keyword">if</span> ( event.altKey &amp;&amp; event.shiftKey &amp;&amp; <span class="hljs-number">87</span> === event.keyCode ) {
				toggle();
			}
		}

		<span class="hljs-keyword">if</span> ( $( <span class="hljs-string">'#postdivrich'</span> ).hasClass( <span class="hljs-string">'wp-editor-expand'</span> ) ) {
			$content.on( <span class="hljs-string">'keydown.focus-shortcut'</span>, toggleViaKeyboard );
		}

		$<span class="hljs-built_in">document</span>.on( <span class="hljs-string">'tinymce-editor-setup.focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event, editor </span>) </span>{
			editor.addButton( <span class="hljs-string">'dfw'</span>, {
				<span class="hljs-attr">active</span>: _isOn,
				<span class="hljs-attr">classes</span>: <span class="hljs-string">'wp-dfw btn widget'</span>,
				<span class="hljs-attr">disabled</span>: ! _isActive,
				<span class="hljs-attr">onclick</span>: toggle,
				<span class="hljs-attr">onPostRender</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">var</span> button = <span class="hljs-keyword">this</span>;

					$<span class="hljs-built_in">document</span>
					.on( <span class="hljs-string">'dfw-activate.focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						button.disabled( <span class="hljs-literal">false</span> );
					} )
					.on( <span class="hljs-string">'dfw-deactivate.focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						button.disabled( <span class="hljs-literal">true</span> );
					} )
					.on( <span class="hljs-string">'dfw-on.focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						button.active( <span class="hljs-literal">true</span> );
					} )
					.on( <span class="hljs-string">'dfw-off.focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						button.active( <span class="hljs-literal">false</span> );
					} );
				},
				<span class="hljs-attr">tooltip</span>: <span class="hljs-string">'Distraction-free writing mode'</span>,
				<span class="hljs-attr">shortcut</span>: <span class="hljs-string">'Alt+Shift+W'</span>
			} );

			editor.addCommand( <span class="hljs-string">'wpToggleDFW'</span>, toggle );
			editor.addShortcut( <span class="hljs-string">'access+w'</span>, <span class="hljs-string">''</span>, <span class="hljs-string">'wpToggleDFW'</span> );
		} );

		$<span class="hljs-built_in">document</span>.on( <span class="hljs-string">'tinymce-editor-init.focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event, editor </span>) </span>{
			<span class="hljs-keyword">var</span> mceBind, mceUnbind;

			<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">focus</span>(<span class="hljs-params"></span>) </span>{
				editorHasFocus = <span class="hljs-literal">true</span>;
			}

			<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">blur</span>(<span class="hljs-params"></span>) </span>{
				editorHasFocus = <span class="hljs-literal">false</span>;
			}

			<span class="hljs-keyword">if</span> ( editor.id === <span class="hljs-string">'content'</span> ) {
				$editorWindow = $( editor.getWin() );
				$editorIframe = $( editor.getContentAreaContainer() ).find( <span class="hljs-string">'iframe'</span> );

				mceBind = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					editor.on( <span class="hljs-string">'keydown'</span>, fadeOut );
					editor.on( <span class="hljs-string">'blur'</span>, maybeFadeIn );
					editor.on( <span class="hljs-string">'focus'</span>, focus );
					editor.on( <span class="hljs-string">'blur'</span>, blur );
					editor.on( <span class="hljs-string">'wp-autoresize'</span>, recalcEditorRect );
				};

				mceUnbind = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					editor.off( <span class="hljs-string">'keydown'</span>, fadeOut );
					editor.off( <span class="hljs-string">'blur'</span>, maybeFadeIn );
					editor.off( <span class="hljs-string">'focus'</span>, focus );
					editor.off( <span class="hljs-string">'blur'</span>, blur );
					editor.off( <span class="hljs-string">'wp-autoresize'</span>, recalcEditorRect );
				};

				<span class="hljs-keyword">if</span> ( _isOn ) {
					mceBind();
				}

				$<span class="hljs-built_in">document</span>.on( <span class="hljs-string">'dfw-on.focus'</span>, mceBind ).on( <span class="hljs-string">'dfw-off.focus'</span>, mceUnbind );</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>Make sure the body focuses when clicking outside it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				editor.on( <span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
					<span class="hljs-keyword">if</span> ( event.target === editor.getDoc().documentElement ) {
						editor.focus();
					}
				} );
			}
		} );

		$<span class="hljs-built_in">document</span>.on( <span class="hljs-string">'quicktags-init'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event, editor </span>) </span>{
			<span class="hljs-keyword">var</span> $button;

			<span class="hljs-keyword">if</span> ( editor.settings.buttons &amp;&amp; ( <span class="hljs-string">','</span> + editor.settings.buttons + <span class="hljs-string">','</span> ).indexOf( <span class="hljs-string">',dfw,'</span> ) !== <span class="hljs-number">-1</span> ) {
				$button = $( <span class="hljs-string">'#'</span> + editor.name + <span class="hljs-string">'_dfw'</span> );

				$( <span class="hljs-built_in">document</span> )
				.on( <span class="hljs-string">'dfw-activate'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					$button.prop( <span class="hljs-string">'disabled'</span>, <span class="hljs-literal">false</span> );
				} )
				.on( <span class="hljs-string">'dfw-deactivate'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					$button.prop( <span class="hljs-string">'disabled'</span>, <span class="hljs-literal">true</span> );
				} )
				.on( <span class="hljs-string">'dfw-on'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					$button.addClass( <span class="hljs-string">'active'</span> );
				} )
				.on( <span class="hljs-string">'dfw-off'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					$button.removeClass( <span class="hljs-string">'active'</span> );
				} );
			}
		} );

		$<span class="hljs-built_in">document</span>.on( <span class="hljs-string">'editor-expand-on.focus'</span>, activate ).on( <span class="hljs-string">'editor-expand-off.focus'</span>, deactivate );

		<span class="hljs-keyword">if</span> ( _isOn ) {
			$content.on( <span class="hljs-string">'keydown.focus'</span>, fadeOut );

			$title.add( $content ).on( <span class="hljs-string">'blur.focus'</span>, maybeFadeIn );
		}

		<span class="hljs-built_in">window</span>.wp = <span class="hljs-built_in">window</span>.wp || {};
		<span class="hljs-built_in">window</span>.wp.editor = <span class="hljs-built_in">window</span>.wp.editor || {};
		<span class="hljs-built_in">window</span>.wp.editor.dfw = {
			<span class="hljs-attr">activate</span>: activate,
			<span class="hljs-attr">deactivate</span>: deactivate,
			<span class="hljs-attr">isActive</span>: isActive,
			<span class="hljs-attr">on</span>: on,
			<span class="hljs-attr">off</span>: off,
			<span class="hljs-attr">toggle</span>: toggle,
			<span class="hljs-attr">isOn</span>: isOn
		};
	} );
} )( <span class="hljs-built_in">window</span>, <span class="hljs-built_in">window</span>.jQuery );</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
