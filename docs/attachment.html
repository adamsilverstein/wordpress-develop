<!DOCTYPE html>

<html>
<head>
  <title>attachment.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="accordion.html">
                  accordion.js
                </a>
              
                
                <a class="source" href="bookmarklet.html">
                  bookmarklet.js
                </a>
              
                
                <a class="source" href="bookmarklet.min.html">
                  bookmarklet.min.js
                </a>
              
                
                <a class="source" href="color-picker.html">
                  color-picker.js
                </a>
              
                
                <a class="source" href="comment.html">
                  comment.js
                </a>
              
                
                <a class="source" href="common.html">
                  common.js
                </a>
              
                
                <a class="source" href="custom-background.html">
                  custom-background.js
                </a>
              
                
                <a class="source" href="custom-header.html">
                  custom-header.js
                </a>
              
                
                <a class="source" href="customize-controls.html">
                  customize-controls.js
                </a>
              
                
                <a class="source" href="customize-nav-menus.html">
                  customize-nav-menus.js
                </a>
              
                
                <a class="source" href="customize-widgets.html">
                  customize-widgets.js
                </a>
              
                
                <a class="source" href="dashboard.html">
                  dashboard.js
                </a>
              
                
                <a class="source" href="edit-comments.html">
                  edit-comments.js
                </a>
              
                
                <a class="source" href="editor-expand.html">
                  editor-expand.js
                </a>
              
                
                <a class="source" href="editor.html">
                  editor.js
                </a>
              
                
                <a class="source" href="farbtastic.html">
                  farbtastic.js
                </a>
              
                
                <a class="source" href="gallery.html">
                  gallery.js
                </a>
              
                
                <a class="source" href="image-edit.html">
                  image-edit.js
                </a>
              
                
                <a class="source" href="inline-edit-post.html">
                  inline-edit-post.js
                </a>
              
                
                <a class="source" href="inline-edit-tax.html">
                  inline-edit-tax.js
                </a>
              
                
                <a class="source" href="iris.min.html">
                  iris.min.js
                </a>
              
                
                <a class="source" href="language-chooser.html">
                  language-chooser.js
                </a>
              
                
                <a class="source" href="link.html">
                  link.js
                </a>
              
                
                <a class="source" href="media-gallery.html">
                  media-gallery.js
                </a>
              
                
                <a class="source" href="media-upload.html">
                  media-upload.js
                </a>
              
                
                <a class="source" href="media.html">
                  media.js
                </a>
              
                
                <a class="source" href="nav-menu.html">
                  nav-menu.js
                </a>
              
                
                <a class="source" href="password-strength-meter.html">
                  password-strength-meter.js
                </a>
              
                
                <a class="source" href="plugin-install.html">
                  plugin-install.js
                </a>
              
                
                <a class="source" href="post.html">
                  post.js
                </a>
              
                
                <a class="source" href="postbox.html">
                  postbox.js
                </a>
              
                
                <a class="source" href="press-this.html">
                  press-this.js
                </a>
              
                
                <a class="source" href="revisions.html">
                  revisions.js
                </a>
              
                
                <a class="source" href="set-post-thumbnail.html">
                  set-post-thumbnail.js
                </a>
              
                
                <a class="source" href="svg-painter.html">
                  svg-painter.js
                </a>
              
                
                <a class="source" href="tags-box.html">
                  tags-box.js
                </a>
              
                
                <a class="source" href="tags-suggest.html">
                  tags-suggest.js
                </a>
              
                
                <a class="source" href="tags.html">
                  tags.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="updates.html">
                  updates.js
                </a>
              
                
                <a class="source" href="user-profile.html">
                  user-profile.js
                </a>
              
                
                <a class="source" href="user-suggest.html">
                  user-suggest.js
                </a>
              
                
                <a class="source" href="widgets.html">
                  widgets.js
                </a>
              
                
                <a class="source" href="media-audio-widget.html">
                  media-audio-widget.js
                </a>
              
                
                <a class="source" href="media-image-widget.html">
                  media-image-widget.js
                </a>
              
                
                <a class="source" href="media-video-widget.html">
                  media-video-widget.js
                </a>
              
                
                <a class="source" href="media-widgets.html">
                  media-widgets.js
                </a>
              
                
                <a class="source" href="text-widgets.html">
                  text-widgets.js
                </a>
              
                
                <a class="source" href="word-count.html">
                  word-count.js
                </a>
              
                
                <a class="source" href="wp-fullscreen-stub.html">
                  wp-fullscreen-stub.js
                </a>
              
                
                <a class="source" href="xfn.html">
                  xfn.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="theme-options.html">
                  theme-options.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="showcase.html">
                  showcase.js
                </a>
              
                
                <a class="source" href="color-scheme-control.html">
                  color-scheme-control.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="keyboard-image-navigation.html">
                  keyboard-image-navigation.js
                </a>
              
                
                <a class="source" href="skip-link-focus-fix.html">
                  skip-link-focus-fix.js
                </a>
              
                
                <a class="source" href="customizer.html">
                  customizer.js
                </a>
              
                
                <a class="source" href="featured-content-admin.html">
                  featured-content-admin.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="keyboard-image-navigation.html">
                  keyboard-image-navigation.js
                </a>
              
                
                <a class="source" href="slider.html">
                  slider.js
                </a>
              
                
                <a class="source" href="customize-controls.html">
                  customize-controls.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="global.html">
                  global.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="jquery.scrollTo.html">
                  jquery.scrollTo.js
                </a>
              
                
                <a class="source" href="navigation.html">
                  navigation.js
                </a>
              
                
                <a class="source" href="skip-link-focus-fix.html">
                  skip-link-focus-fix.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="navigation.html">
                  navigation.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="admin-bar.html">
                  admin-bar.js
                </a>
              
                
                <a class="source" href="autosave.html">
                  autosave.js
                </a>
              
                
                <a class="source" href="backbone.html">
                  backbone.js
                </a>
              
                
                <a class="source" href="backbone.min.html">
                  backbone.min.js
                </a>
              
                
                <a class="source" href="colorpicker.html">
                  colorpicker.js
                </a>
              
                
                <a class="source" href="comment-reply.html">
                  comment-reply.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="customize-base.html">
                  customize-base.js
                </a>
              
                
                <a class="source" href="customize-loader.html">
                  customize-loader.js
                </a>
              
                
                <a class="source" href="customize-models.html">
                  customize-models.js
                </a>
              
                
                <a class="source" href="customize-preview-nav-menus.html">
                  customize-preview-nav-menus.js
                </a>
              
                
                <a class="source" href="customize-preview-widgets.html">
                  customize-preview-widgets.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="customize-selective-refresh.html">
                  customize-selective-refresh.js
                </a>
              
                
                <a class="source" href="customize-views.html">
                  customize-views.js
                </a>
              
                
                <a class="source" href="heartbeat.html">
                  heartbeat.js
                </a>
              
                
                <a class="source" href="hoverIntent.html">
                  hoverIntent.js
                </a>
              
                
                <a class="source" href="imagesloaded.min.html">
                  imagesloaded.min.js
                </a>
              
                
                <a class="source" href="jquery.imgareaselect.html">
                  jquery.imgareaselect.js
                </a>
              
                
                <a class="source" href="jquery.imgareaselect.min.html">
                  jquery.imgareaselect.min.js
                </a>
              
                
                <a class="source" href="jquery.Jcrop.min.html">
                  jquery.Jcrop.min.js
                </a>
              
                
                <a class="source" href="jquery-migrate.html">
                  jquery-migrate.js
                </a>
              
                
                <a class="source" href="jquery-migrate.min.html">
                  jquery-migrate.min.js
                </a>
              
                
                <a class="source" href="jquery.color.min.html">
                  jquery.color.min.js
                </a>
              
                
                <a class="source" href="jquery.form.html">
                  jquery.form.js
                </a>
              
                
                <a class="source" href="jquery.form.min.html">
                  jquery.form.min.js
                </a>
              
                
                <a class="source" href="jquery.hotkeys.html">
                  jquery.hotkeys.js
                </a>
              
                
                <a class="source" href="jquery.hotkeys.min.html">
                  jquery.hotkeys.min.js
                </a>
              
                
                <a class="source" href="jquery.html">
                  jquery.js
                </a>
              
                
                <a class="source" href="jquery.masonry.html">
                  jquery.masonry.js
                </a>
              
                
                <a class="source" href="jquery.masonry.min.html">
                  jquery.masonry.min.js
                </a>
              
                
                <a class="source" href="jquery.query.html">
                  jquery.query.js
                </a>
              
                
                <a class="source" href="jquery.schedule.html">
                  jquery.schedule.js
                </a>
              
                
                <a class="source" href="jquery.serialize-object.html">
                  jquery.serialize-object.js
                </a>
              
                
                <a class="source" href="jquery.table-hotkeys.html">
                  jquery.table-hotkeys.js
                </a>
              
                
                <a class="source" href="jquery.table-hotkeys.min.html">
                  jquery.table-hotkeys.min.js
                </a>
              
                
                <a class="source" href="jquery.ui.touch-punch.html">
                  jquery.ui.touch-punch.js
                </a>
              
                
                <a class="source" href="suggest.html">
                  suggest.js
                </a>
              
                
                <a class="source" href="suggest.min.html">
                  suggest.min.js
                </a>
              
                
                <a class="source" href="accordion.html">
                  accordion.js
                </a>
              
                
                <a class="source" href="autocomplete.html">
                  autocomplete.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="core.html">
                  core.js
                </a>
              
                
                <a class="source" href="datepicker.html">
                  datepicker.js
                </a>
              
                
                <a class="source" href="dialog.html">
                  dialog.js
                </a>
              
                
                <a class="source" href="draggable.html">
                  draggable.js
                </a>
              
                
                <a class="source" href="droppable.html">
                  droppable.js
                </a>
              
                
                <a class="source" href="effect-blind.html">
                  effect-blind.js
                </a>
              
                
                <a class="source" href="effect-bounce.html">
                  effect-bounce.js
                </a>
              
                
                <a class="source" href="effect-clip.html">
                  effect-clip.js
                </a>
              
                
                <a class="source" href="effect-drop.html">
                  effect-drop.js
                </a>
              
                
                <a class="source" href="effect-explode.html">
                  effect-explode.js
                </a>
              
                
                <a class="source" href="effect-fade.html">
                  effect-fade.js
                </a>
              
                
                <a class="source" href="effect-fold.html">
                  effect-fold.js
                </a>
              
                
                <a class="source" href="effect-highlight.html">
                  effect-highlight.js
                </a>
              
                
                <a class="source" href="effect-puff.html">
                  effect-puff.js
                </a>
              
                
                <a class="source" href="effect-pulsate.html">
                  effect-pulsate.js
                </a>
              
                
                <a class="source" href="effect-scale.html">
                  effect-scale.js
                </a>
              
                
                <a class="source" href="effect-shake.html">
                  effect-shake.js
                </a>
              
                
                <a class="source" href="effect-size.html">
                  effect-size.js
                </a>
              
                
                <a class="source" href="effect-slide.html">
                  effect-slide.js
                </a>
              
                
                <a class="source" href="effect-transfer.html">
                  effect-transfer.js
                </a>
              
                
                <a class="source" href="effect.html">
                  effect.js
                </a>
              
                
                <a class="source" href="menu.html">
                  menu.js
                </a>
              
                
                <a class="source" href="mouse.html">
                  mouse.js
                </a>
              
                
                <a class="source" href="position.html">
                  position.js
                </a>
              
                
                <a class="source" href="progressbar.html">
                  progressbar.js
                </a>
              
                
                <a class="source" href="resizable.html">
                  resizable.js
                </a>
              
                
                <a class="source" href="selectable.html">
                  selectable.js
                </a>
              
                
                <a class="source" href="selectmenu.html">
                  selectmenu.js
                </a>
              
                
                <a class="source" href="slider.html">
                  slider.js
                </a>
              
                
                <a class="source" href="sortable.html">
                  sortable.js
                </a>
              
                
                <a class="source" href="spinner.html">
                  spinner.js
                </a>
              
                
                <a class="source" href="tabs.html">
                  tabs.js
                </a>
              
                
                <a class="source" href="tooltip.html">
                  tooltip.js
                </a>
              
                
                <a class="source" href="widget.html">
                  widget.js
                </a>
              
                
                <a class="source" href="json2.html">
                  json2.js
                </a>
              
                
                <a class="source" href="masonry.min.html">
                  masonry.min.js
                </a>
              
                
                <a class="source" href="mce-view.html">
                  mce-view.js
                </a>
              
                
                <a class="source" href="media-audiovideo.html">
                  media-audiovideo.js
                </a>
              
                
                <a class="source" href="media-editor.html">
                  media-editor.js
                </a>
              
                
                <a class="source" href="media-grid.html">
                  media-grid.js
                </a>
              
                
                <a class="source" href="media-models.html">
                  media-models.js
                </a>
              
                
                <a class="source" href="media-views.html">
                  media-views.js
                </a>
              
                
                <a class="source" href="audiovideo.manifest.html">
                  audiovideo.manifest.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="collection-add.html">
                  collection-add.js
                </a>
              
                
                <a class="source" href="collection-edit.html">
                  collection-edit.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="customize-image-cropper.html">
                  customize-image-cropper.js
                </a>
              
                
                <a class="source" href="edit-attachment-metadata.html">
                  edit-attachment-metadata.js
                </a>
              
                
                <a class="source" href="edit-image.html">
                  edit-image.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="featured-image.html">
                  featured-image.js
                </a>
              
                
                <a class="source" href="gallery-add.html">
                  gallery-add.js
                </a>
              
                
                <a class="source" href="gallery-edit.html">
                  gallery-edit.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="library.html">
                  library.js
                </a>
              
                
                <a class="source" href="media-library.html">
                  media-library.js
                </a>
              
                
                <a class="source" href="region.html">
                  region.js
                </a>
              
                
                <a class="source" href="replace-image.html">
                  replace-image.js
                </a>
              
                
                <a class="source" href="site-icon-cropper.html">
                  site-icon-cropper.js
                </a>
              
                
                <a class="source" href="state-machine.html">
                  state-machine.js
                </a>
              
                
                <a class="source" href="state.html">
                  state.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="grid.manifest.html">
                  grid.manifest.js
                </a>
              
                
                <a class="source" href="models.manifest.html">
                  models.manifest.js
                </a>
              
                
                <a class="source" href="attachment.html">
                  attachment.js
                </a>
              
                
                <a class="source" href="attachments.html">
                  attachments.js
                </a>
              
                
                <a class="source" href="post-image.html">
                  post-image.js
                </a>
              
                
                <a class="source" href="post-media.html">
                  post-media.js
                </a>
              
                
                <a class="source" href="query.html">
                  query.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="manage.html">
                  manage.js
                </a>
              
                
                <a class="source" href="selection-sync.html">
                  selection-sync.js
                </a>
              
                
                <a class="source" href="views.manifest.html">
                  views.manifest.js
                </a>
              
                
                <a class="source" href="attachment-compat.html">
                  attachment-compat.js
                </a>
              
                
                <a class="source" href="attachment-filters.html">
                  attachment-filters.js
                </a>
              
                
                <a class="source" href="all.html">
                  all.js
                </a>
              
                
                <a class="source" href="date.html">
                  date.js
                </a>
              
                
                <a class="source" href="uploaded.html">
                  uploaded.js
                </a>
              
                
                <a class="source" href="attachment.html">
                  attachment.js
                </a>
              
                
                <a class="source" href="details-two-column.html">
                  details-two-column.js
                </a>
              
                
                <a class="source" href="details.html">
                  details.js
                </a>
              
                
                <a class="source" href="edit-library.html">
                  edit-library.js
                </a>
              
                
                <a class="source" href="edit-selection.html">
                  edit-selection.js
                </a>
              
                
                <a class="source" href="library.html">
                  library.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="attachments.html">
                  attachments.js
                </a>
              
                
                <a class="source" href="browser.html">
                  browser.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="button-group.html">
                  button-group.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="delete-selected-permanently.html">
                  delete-selected-permanently.js
                </a>
              
                
                <a class="source" href="delete-selected.html">
                  delete-selected.js
                </a>
              
                
                <a class="source" href="select-mode-toggle.html">
                  select-mode-toggle.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="edit-image-details.html">
                  edit-image-details.js
                </a>
              
                
                <a class="source" href="edit-image.html">
                  edit-image.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="image.html">
                  image.js
                </a>
              
                
                <a class="source" href="link.html">
                  link.js
                </a>
              
                
                <a class="source" href="url.html">
                  url.js
                </a>
              
                
                <a class="source" href="focus-manager.html">
                  focus-manager.js
                </a>
              
                
                <a class="source" href="frame.html">
                  frame.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="edit-attachments.html">
                  edit-attachments.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="manage.html">
                  manage.js
                </a>
              
                
                <a class="source" href="media-details.html">
                  media-details.js
                </a>
              
                
                <a class="source" href="post.html">
                  post.js
                </a>
              
                
                <a class="source" href="select.html">
                  select.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="iframe.html">
                  iframe.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="label.html">
                  label.js
                </a>
              
                
                <a class="source" href="media-details.html">
                  media-details.js
                </a>
              
                
                <a class="source" href="media-frame.html">
                  media-frame.js
                </a>
              
                
                <a class="source" href="menu-item.html">
                  menu-item.js
                </a>
              
                
                <a class="source" href="menu.html">
                  menu.js
                </a>
              
                
                <a class="source" href="modal.html">
                  modal.js
                </a>
              
                
                <a class="source" href="priority-list.html">
                  priority-list.js
                </a>
              
                
                <a class="source" href="router-item.html">
                  router-item.js
                </a>
              
                
                <a class="source" href="router.html">
                  router.js
                </a>
              
                
                <a class="source" href="search.html">
                  search.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="settings.html">
                  settings.js
                </a>
              
                
                <a class="source" href="attachment-display.html">
                  attachment-display.js
                </a>
              
                
                <a class="source" href="gallery.html">
                  gallery.js
                </a>
              
                
                <a class="source" href="playlist.html">
                  playlist.js
                </a>
              
                
                <a class="source" href="sidebar.html">
                  sidebar.js
                </a>
              
                
                <a class="source" href="site-icon-cropper.html">
                  site-icon-cropper.js
                </a>
              
                
                <a class="source" href="site-icon-preview.html">
                  site-icon-preview.js
                </a>
              
                
                <a class="source" href="spinner.html">
                  spinner.js
                </a>
              
                
                <a class="source" href="toolbar.html">
                  toolbar.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="select.html">
                  select.js
                </a>
              
                
                <a class="source" href="editor.html">
                  editor.js
                </a>
              
                
                <a class="source" href="inline.html">
                  inline.js
                </a>
              
                
                <a class="source" href="status-error.html">
                  status-error.js
                </a>
              
                
                <a class="source" href="status.html">
                  status.js
                </a>
              
                
                <a class="source" href="window.html">
                  window.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="view.html">
                  view.js
                </a>
              
                
                <a class="source" href="froogaloop.min.html">
                  froogaloop.min.js
                </a>
              
                
                <a class="source" href="mediaelement-and-player.min.html">
                  mediaelement-and-player.min.js
                </a>
              
                
                <a class="source" href="wp-mediaelement.html">
                  wp-mediaelement.js
                </a>
              
                
                <a class="source" href="wp-playlist.html">
                  wp-playlist.js
                </a>
              
                
                <a class="source" href="handlers.html">
                  handlers.js
                </a>
              
                
                <a class="source" href="plupload.full.min.html">
                  plupload.full.min.js
                </a>
              
                
                <a class="source" href="wp-plupload.html">
                  wp-plupload.js
                </a>
              
                
                <a class="source" href="quicktags.html">
                  quicktags.js
                </a>
              
                
                <a class="source" href="shortcode.html">
                  shortcode.js
                </a>
              
                
                <a class="source" href="swfobject.html">
                  swfobject.js
                </a>
              
                
                <a class="source" href="handlers.html">
                  handlers.js
                </a>
              
                
                <a class="source" href="handlers.min.html">
                  handlers.min.js
                </a>
              
                
                <a class="source" href="swfupload.cookies.html">
                  swfupload.cookies.js
                </a>
              
                
                <a class="source" href="swfupload.queue.html">
                  swfupload.queue.js
                </a>
              
                
                <a class="source" href="swfupload.speed.html">
                  swfupload.speed.js
                </a>
              
                
                <a class="source" href="swfupload.swfobject.html">
                  swfupload.swfobject.js
                </a>
              
                
                <a class="source" href="swfupload.html">
                  swfupload.js
                </a>
              
                
                <a class="source" href="thickbox.html">
                  thickbox.js
                </a>
              
                
                <a class="source" href="wp-langs-en.html">
                  wp-langs-en.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="theme.min.html">
                  theme.min.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="theme.min.html">
                  theme.min.js
                </a>
              
                
                <a class="source" href="tiny_mce_popup.html">
                  tiny_mce_popup.js
                </a>
              
                
                <a class="source" href="tinymce.html">
                  tinymce.js
                </a>
              
                
                <a class="source" href="tinymce.min.html">
                  tinymce.min.js
                </a>
              
                
                <a class="source" href="editable_selects.html">
                  editable_selects.js
                </a>
              
                
                <a class="source" href="form_utils.html">
                  form_utils.js
                </a>
              
                
                <a class="source" href="mctabs.html">
                  mctabs.js
                </a>
              
                
                <a class="source" href="validate.html">
                  validate.js
                </a>
              
                
                <a class="source" href="tw-sack.html">
                  tw-sack.js
                </a>
              
                
                <a class="source" href="twemoji.html">
                  twemoji.js
                </a>
              
                
                <a class="source" href="underscore.html">
                  underscore.js
                </a>
              
                
                <a class="source" href="underscore.min.html">
                  underscore.min.js
                </a>
              
                
                <a class="source" href="utils.html">
                  utils.js
                </a>
              
                
                <a class="source" href="wp-a11y.html">
                  wp-a11y.js
                </a>
              
                
                <a class="source" href="wp-ajax-response.html">
                  wp-ajax-response.js
                </a>
              
                
                <a class="source" href="wp-api.html">
                  wp-api.js
                </a>
              
                
                <a class="source" href="wp-auth-check.html">
                  wp-auth-check.js
                </a>
              
                
                <a class="source" href="wp-backbone.html">
                  wp-backbone.js
                </a>
              
                
                <a class="source" href="wp-custom-header.html">
                  wp-custom-header.js
                </a>
              
                
                <a class="source" href="wp-embed-template.html">
                  wp-embed-template.js
                </a>
              
                
                <a class="source" href="wp-embed.html">
                  wp-embed.js
                </a>
              
                
                <a class="source" href="wp-emoji-loader.html">
                  wp-emoji-loader.js
                </a>
              
                
                <a class="source" href="wp-emoji.html">
                  wp-emoji.js
                </a>
              
                
                <a class="source" href="wp-list-revisions.html">
                  wp-list-revisions.js
                </a>
              
                
                <a class="source" href="wp-lists.html">
                  wp-lists.js
                </a>
              
                
                <a class="source" href="wp-pointer.html">
                  wp-pointer.js
                </a>
              
                
                <a class="source" href="wp-util.html">
                  wp-util.js
                </a>
              
                
                <a class="source" href="wpdialog.html">
                  wpdialog.js
                </a>
              
                
                <a class="source" href="wplink.html">
                  wplink.js
                </a>
              
                
                <a class="source" href="zxcvbn-async.html">
                  zxcvbn-async.js
                </a>
              
                
                <a class="source" href="zxcvbn.min.html">
                  zxcvbn.min.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>attachment.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/**
 * wp.media.view.Attachment
 *
 * @class
 * @augments wp.media.View
 * @augments wp.Backbone.View
 * @augments Backbone.View
 */</span>
<span class="hljs-keyword">var</span> View = wp.media.View,
	$ = jQuery,
	Attachment;

Attachment = View.extend({
	<span class="hljs-attr">tagName</span>:   <span class="hljs-string">'li'</span>,
	<span class="hljs-attr">className</span>: <span class="hljs-string">'attachment'</span>,
	<span class="hljs-attr">template</span>:  wp.template(<span class="hljs-string">'attachment'</span>),

	<span class="hljs-attr">attributes</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">return</span> {
			<span class="hljs-string">'tabIndex'</span>:     <span class="hljs-number">0</span>,
			<span class="hljs-string">'role'</span>:         <span class="hljs-string">'checkbox'</span>,
			<span class="hljs-string">'aria-label'</span>:   <span class="hljs-keyword">this</span>.model.get( <span class="hljs-string">'title'</span> ),
			<span class="hljs-string">'aria-checked'</span>: <span class="hljs-literal">false</span>,
			<span class="hljs-string">'data-id'</span>:      <span class="hljs-keyword">this</span>.model.get( <span class="hljs-string">'id'</span> )
		};
	},

	<span class="hljs-attr">events</span>: {
		<span class="hljs-string">'click .js--select-attachment'</span>:   <span class="hljs-string">'toggleSelectionHandler'</span>,
		<span class="hljs-string">'change [data-setting]'</span>:          <span class="hljs-string">'updateSetting'</span>,
		<span class="hljs-string">'change [data-setting] input'</span>:    <span class="hljs-string">'updateSetting'</span>,
		<span class="hljs-string">'change [data-setting] select'</span>:   <span class="hljs-string">'updateSetting'</span>,
		<span class="hljs-string">'change [data-setting] textarea'</span>: <span class="hljs-string">'updateSetting'</span>,
		<span class="hljs-string">'click .attachment-close'</span>:        <span class="hljs-string">'removeFromLibrary'</span>,
		<span class="hljs-string">'click .check'</span>:                   <span class="hljs-string">'checkClickHandler'</span>,
		<span class="hljs-string">'keydown'</span>:                        <span class="hljs-string">'toggleSelectionHandler'</span>
	},

	<span class="hljs-attr">buttons</span>: {},

	<span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">var</span> selection = <span class="hljs-keyword">this</span>.options.selection,
			options = _.defaults( <span class="hljs-keyword">this</span>.options, {
				<span class="hljs-attr">rerenderOnModelChange</span>: <span class="hljs-literal">true</span>
			} );

		<span class="hljs-keyword">if</span> ( options.rerenderOnModelChange ) {
			<span class="hljs-keyword">this</span>.listenTo( <span class="hljs-keyword">this</span>.model, <span class="hljs-string">'change'</span>, <span class="hljs-keyword">this</span>.render );
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>.listenTo( <span class="hljs-keyword">this</span>.model, <span class="hljs-string">'change:percent'</span>, <span class="hljs-keyword">this</span>.progress );
		}
		<span class="hljs-keyword">this</span>.listenTo( <span class="hljs-keyword">this</span>.model, <span class="hljs-string">'change:title'</span>, <span class="hljs-keyword">this</span>._syncTitle );
		<span class="hljs-keyword">this</span>.listenTo( <span class="hljs-keyword">this</span>.model, <span class="hljs-string">'change:caption'</span>, <span class="hljs-keyword">this</span>._syncCaption );
		<span class="hljs-keyword">this</span>.listenTo( <span class="hljs-keyword">this</span>.model, <span class="hljs-string">'change:artist'</span>, <span class="hljs-keyword">this</span>._syncArtist );
		<span class="hljs-keyword">this</span>.listenTo( <span class="hljs-keyword">this</span>.model, <span class="hljs-string">'change:album'</span>, <span class="hljs-keyword">this</span>._syncAlbum );</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Update the selection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.listenTo( <span class="hljs-keyword">this</span>.model, <span class="hljs-string">'add'</span>, <span class="hljs-keyword">this</span>.select );
		<span class="hljs-keyword">this</span>.listenTo( <span class="hljs-keyword">this</span>.model, <span class="hljs-string">'remove'</span>, <span class="hljs-keyword">this</span>.deselect );
		<span class="hljs-keyword">if</span> ( selection ) {
			selection.on( <span class="hljs-string">'reset'</span>, <span class="hljs-keyword">this</span>.updateSelect, <span class="hljs-keyword">this</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Update the model’s details view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>.listenTo( <span class="hljs-keyword">this</span>.model, <span class="hljs-string">'selection:single selection:unsingle'</span>, <span class="hljs-keyword">this</span>.details );
			<span class="hljs-keyword">this</span>.details( <span class="hljs-keyword">this</span>.model, <span class="hljs-keyword">this</span>.controller.state().get(<span class="hljs-string">'selection'</span>) );
		}

		<span class="hljs-keyword">this</span>.listenTo( <span class="hljs-keyword">this</span>.controller, <span class="hljs-string">'attachment:compat:waiting attachment:compat:ready'</span>, <span class="hljs-keyword">this</span>.updateSave );
	},
	<span class="hljs-comment">/**
	 * @returns {wp.media.view.Attachment} Returns itself to allow chaining
	 */</span>
	dispose: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">var</span> selection = <span class="hljs-keyword">this</span>.options.selection;</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Make sure all settings are saved before removing the view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.updateAll();

		<span class="hljs-keyword">if</span> ( selection ) {
			selection.off( <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-keyword">this</span> );
		}
		<span class="hljs-comment">/**
		 * call 'dispose' directly on the parent class
		 */</span>
		View.prototype.dispose.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	},
	<span class="hljs-comment">/**
	 * @returns {wp.media.view.Attachment} Returns itself to allow chaining
	 */</span>
	render: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">var</span> options = _.defaults( <span class="hljs-keyword">this</span>.model.toJSON(), {
				<span class="hljs-attr">orientation</span>:   <span class="hljs-string">'landscape'</span>,
				<span class="hljs-attr">uploading</span>:     <span class="hljs-literal">false</span>,
				<span class="hljs-attr">type</span>:          <span class="hljs-string">''</span>,
				<span class="hljs-attr">subtype</span>:       <span class="hljs-string">''</span>,
				<span class="hljs-attr">icon</span>:          <span class="hljs-string">''</span>,
				<span class="hljs-attr">filename</span>:      <span class="hljs-string">''</span>,
				<span class="hljs-attr">caption</span>:       <span class="hljs-string">''</span>,
				<span class="hljs-attr">title</span>:         <span class="hljs-string">''</span>,
				<span class="hljs-attr">dateFormatted</span>: <span class="hljs-string">''</span>,
				<span class="hljs-attr">width</span>:         <span class="hljs-string">''</span>,
				<span class="hljs-attr">height</span>:        <span class="hljs-string">''</span>,
				<span class="hljs-attr">compat</span>:        <span class="hljs-literal">false</span>,
				<span class="hljs-attr">alt</span>:           <span class="hljs-string">''</span>,
				<span class="hljs-attr">description</span>:   <span class="hljs-string">''</span>
			}, <span class="hljs-keyword">this</span>.options );

		options.buttons  = <span class="hljs-keyword">this</span>.buttons;
		options.describe = <span class="hljs-keyword">this</span>.controller.state().get(<span class="hljs-string">'describe'</span>);

		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'image'</span> === options.type ) {
			options.size = <span class="hljs-keyword">this</span>.imageSize();
		}

		options.can = {};
		<span class="hljs-keyword">if</span> ( options.nonces ) {
			options.can.remove = !! options.nonces[<span class="hljs-string">'delete'</span>];
			options.can.save = !! options.nonces.update;
		}

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.controller.state().get(<span class="hljs-string">'allowLocalEdits'</span>) ) {
			options.allowLocalEdits = <span class="hljs-literal">true</span>;
		}

		<span class="hljs-keyword">if</span> ( options.uploading &amp;&amp; ! options.percent ) {
			options.percent = <span class="hljs-number">0</span>;
		}

		<span class="hljs-keyword">this</span>.views.detach();
		<span class="hljs-keyword">this</span>.$el.html( <span class="hljs-keyword">this</span>.template( options ) );

		<span class="hljs-keyword">this</span>.$el.toggleClass( <span class="hljs-string">'uploading'</span>, options.uploading );

		<span class="hljs-keyword">if</span> ( options.uploading ) {
			<span class="hljs-keyword">this</span>.$bar = <span class="hljs-keyword">this</span>.$(<span class="hljs-string">'.media-progress-bar div'</span>);
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.$bar;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Check if the model is selected.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.updateSelect();</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Update the save status.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.updateSave();

		<span class="hljs-keyword">this</span>.views.render();

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	},

	<span class="hljs-attr">progress</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.$bar &amp;&amp; <span class="hljs-keyword">this</span>.$bar.length ) {
			<span class="hljs-keyword">this</span>.$bar.width( <span class="hljs-keyword">this</span>.model.get(<span class="hljs-string">'percent'</span>) + <span class="hljs-string">'%'</span> );
		}
	},

	<span class="hljs-comment">/**
	 * @param {Object} event
	 */</span>
	toggleSelectionHandler: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
		<span class="hljs-keyword">var</span> method;</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Don’t do anything inside inputs and on the attachment check and remove buttons.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'INPUT'</span> === event.target.nodeName || <span class="hljs-string">'BUTTON'</span> === event.target.nodeName ) {
			<span class="hljs-keyword">return</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Catch arrow events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-number">37</span> === event.keyCode || <span class="hljs-number">38</span> === event.keyCode || <span class="hljs-number">39</span> === event.keyCode || <span class="hljs-number">40</span> === event.keyCode ) {
			<span class="hljs-keyword">this</span>.controller.trigger( <span class="hljs-string">'attachment:keydown:arrow'</span>, event );
			<span class="hljs-keyword">return</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Catch enter and space events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'keydown'</span> === event.type &amp;&amp; <span class="hljs-number">13</span> !== event.keyCode &amp;&amp; <span class="hljs-number">32</span> !== event.keyCode ) {
			<span class="hljs-keyword">return</span>;
		}

		event.preventDefault();</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>In the grid view, bubble up an edit:attachment event to the controller.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.controller.isModeActive( <span class="hljs-string">'grid'</span> ) ) {
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.controller.isModeActive( <span class="hljs-string">'edit'</span> ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Pass the current target to restore focus when closing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">this</span>.controller.trigger( <span class="hljs-string">'edit:attachment'</span>, <span class="hljs-keyword">this</span>.model, event.currentTarget );
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.controller.isModeActive( <span class="hljs-string">'select'</span> ) ) {
				method = <span class="hljs-string">'toggle'</span>;
			}
		}

		<span class="hljs-keyword">if</span> ( event.shiftKey ) {
			method = <span class="hljs-string">'between'</span>;
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( event.ctrlKey || event.metaKey ) {
			method = <span class="hljs-string">'toggle'</span>;
		}

		<span class="hljs-keyword">this</span>.toggleSelection({
			<span class="hljs-attr">method</span>: method
		});

		<span class="hljs-keyword">this</span>.controller.trigger( <span class="hljs-string">'selection:toggle'</span> );
	},
	<span class="hljs-comment">/**
	 * @param {Object} options
	 */</span>
	toggleSelection: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> options </span>) </span>{
		<span class="hljs-keyword">var</span> collection = <span class="hljs-keyword">this</span>.collection,
			selection = <span class="hljs-keyword">this</span>.options.selection,
			model = <span class="hljs-keyword">this</span>.model,
			method = options &amp;&amp; options.method,
			single, models, singleIndex, modelIndex;

		<span class="hljs-keyword">if</span> ( ! selection ) {
			<span class="hljs-keyword">return</span>;
		}

		single = selection.single();
		method = _.isUndefined( method ) ? selection.multiple : method;</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>If the <code>method</code> is set to <code>between</code>, select all models that
exist between the current and the selected model.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'between'</span> === method &amp;&amp; single &amp;&amp; selection.multiple ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>If the models are the same, short-circuit.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( single === model ) {
				<span class="hljs-keyword">return</span>;
			}

			singleIndex = collection.indexOf( single );
			modelIndex  = collection.indexOf( <span class="hljs-keyword">this</span>.model );

			<span class="hljs-keyword">if</span> ( singleIndex &lt; modelIndex ) {
				models = collection.models.slice( singleIndex, modelIndex + <span class="hljs-number">1</span> );
			} <span class="hljs-keyword">else</span> {
				models = collection.models.slice( modelIndex, singleIndex + <span class="hljs-number">1</span> );
			}

			selection.add( models );
			selection.single( model );
			<span class="hljs-keyword">return</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>If the <code>method</code> is set to <code>toggle</code>, just flip the selection
status, regardless of whether the model is the single model.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'toggle'</span> === method ) {
			selection[ <span class="hljs-keyword">this</span>.selected() ? <span class="hljs-string">'remove'</span> : <span class="hljs-string">'add'</span> ]( model );
			selection.single( model );
			<span class="hljs-keyword">return</span>;
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-string">'add'</span> === method ) {
			selection.add( model );
			selection.single( model );
			<span class="hljs-keyword">return</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Fixes bug that loses focus when selecting a featured image</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( ! method ) {
			method = <span class="hljs-string">'add'</span>;
		}

		<span class="hljs-keyword">if</span> ( method !== <span class="hljs-string">'add'</span> ) {
			method = <span class="hljs-string">'reset'</span>;
		}

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.selected() ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>If the model is the single model, remove it.
If it is not the same as the single model,
it now becomes the single model.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			selection[ single === model ? <span class="hljs-string">'remove'</span> : <span class="hljs-string">'single'</span> ]( model );
		} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>If the model is not selected, run the <code>method</code> on the
selection. By default, we <code>reset</code> the selection, but the
<code>method</code> can be set to <code>add</code> the model to the selection.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			selection[ method ]( model );
			selection.single( model );
		}
	},

	<span class="hljs-attr">updateSelect</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">this</span>[ <span class="hljs-keyword">this</span>.selected() ? <span class="hljs-string">'select'</span> : <span class="hljs-string">'deselect'</span> ]();
	},
	<span class="hljs-comment">/**
	 * @returns {unresolved|Boolean}
	 */</span>
	selected: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">var</span> selection = <span class="hljs-keyword">this</span>.options.selection;
		<span class="hljs-keyword">if</span> ( selection ) {
			<span class="hljs-keyword">return</span> !! selection.get( <span class="hljs-keyword">this</span>.model.cid );
		}
	},
	<span class="hljs-comment">/**
	 * @param {Backbone.Model} model
	 * @param {Backbone.Collection} collection
	 */</span>
	select: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> model, collection </span>) </span>{
		<span class="hljs-keyword">var</span> selection = <span class="hljs-keyword">this</span>.options.selection,
			controller = <span class="hljs-keyword">this</span>.controller;</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Check if a selection exists and if it’s the collection provided.
If they’re not the same collection, bail; we’re in another
selection’s event loop.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( ! selection || ( collection &amp;&amp; collection !== selection ) ) {
			<span class="hljs-keyword">return</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Bail if the model is already selected.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.$el.hasClass( <span class="hljs-string">'selected'</span> ) ) {
			<span class="hljs-keyword">return</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Add ‘selected’ class to model, set aria-checked to true.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.$el.addClass( <span class="hljs-string">'selected'</span> ).attr( <span class="hljs-string">'aria-checked'</span>, <span class="hljs-literal">true</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p> Make the checkbox tabable, except in media grid (bulk select mode).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( ! ( controller.isModeActive( <span class="hljs-string">'grid'</span> ) &amp;&amp; controller.isModeActive( <span class="hljs-string">'select'</span> ) ) ) {
			<span class="hljs-keyword">this</span>.$( <span class="hljs-string">'.check'</span> ).attr( <span class="hljs-string">'tabindex'</span>, <span class="hljs-string">'0'</span> );
		}
	},
	<span class="hljs-comment">/**
	 * @param {Backbone.Model} model
	 * @param {Backbone.Collection} collection
	 */</span>
	deselect: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> model, collection </span>) </span>{
		<span class="hljs-keyword">var</span> selection = <span class="hljs-keyword">this</span>.options.selection;</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Check if a selection exists and if it’s the collection provided.
If they’re not the same collection, bail; we’re in another
selection’s event loop.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( ! selection || ( collection &amp;&amp; collection !== selection ) ) {
			<span class="hljs-keyword">return</span>;
		}
		<span class="hljs-keyword">this</span>.$el.removeClass( <span class="hljs-string">'selected'</span> ).attr( <span class="hljs-string">'aria-checked'</span>, <span class="hljs-literal">false</span> )
			.find( <span class="hljs-string">'.check'</span> ).attr( <span class="hljs-string">'tabindex'</span>, <span class="hljs-string">'-1'</span> );
	},
	<span class="hljs-comment">/**
	 * @param {Backbone.Model} model
	 * @param {Backbone.Collection} collection
	 */</span>
	details: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> model, collection </span>) </span>{
		<span class="hljs-keyword">var</span> selection = <span class="hljs-keyword">this</span>.options.selection,
			details;

		<span class="hljs-keyword">if</span> ( selection !== collection ) {
			<span class="hljs-keyword">return</span>;
		}

		details = selection.single();
		<span class="hljs-keyword">this</span>.$el.toggleClass( <span class="hljs-string">'details'</span>, details === <span class="hljs-keyword">this</span>.model );
	},
	<span class="hljs-comment">/**
	 * @param {string} size
	 * @returns {Object}
	 */</span>
	imageSize: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> size </span>) </span>{
		<span class="hljs-keyword">var</span> sizes = <span class="hljs-keyword">this</span>.model.get(<span class="hljs-string">'sizes'</span>), matched = <span class="hljs-literal">false</span>;

		size = size || <span class="hljs-string">'medium'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Use the provided image size if possible.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( sizes ) {
			<span class="hljs-keyword">if</span> ( sizes[ size ] ) {
				matched = sizes[ size ];
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( sizes.large ) {
				matched = sizes.large;
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( sizes.thumbnail ) {
				matched = sizes.thumbnail;
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( sizes.full ) {
				matched = sizes.full;
			}

			<span class="hljs-keyword">if</span> ( matched ) {
				<span class="hljs-keyword">return</span> _.clone( matched );
			}
		}

		<span class="hljs-keyword">return</span> {
			<span class="hljs-attr">url</span>:         <span class="hljs-keyword">this</span>.model.get(<span class="hljs-string">'url'</span>),
			<span class="hljs-attr">width</span>:       <span class="hljs-keyword">this</span>.model.get(<span class="hljs-string">'width'</span>),
			<span class="hljs-attr">height</span>:      <span class="hljs-keyword">this</span>.model.get(<span class="hljs-string">'height'</span>),
			<span class="hljs-attr">orientation</span>: <span class="hljs-keyword">this</span>.model.get(<span class="hljs-string">'orientation'</span>)
		};
	},
	<span class="hljs-comment">/**
	 * @param {Object} event
	 */</span>
	updateSetting: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
		<span class="hljs-keyword">var</span> $setting = $( event.target ).closest(<span class="hljs-string">'[data-setting]'</span>),
			setting, value;

		<span class="hljs-keyword">if</span> ( ! $setting.length ) {
			<span class="hljs-keyword">return</span>;
		}

		setting = $setting.data(<span class="hljs-string">'setting'</span>);
		value   = event.target.value;

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.model.get( setting ) !== value ) {
			<span class="hljs-keyword">this</span>.save( setting, value );
		}
	},

	<span class="hljs-comment">/**
	 * Pass all the arguments to the model's save method.
	 *
	 * Records the aggregate status of all save requests and updates the
	 * view's classes accordingly.
	 */</span>
	save: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">var</span> view = <span class="hljs-keyword">this</span>,
			save = <span class="hljs-keyword">this</span>._save = <span class="hljs-keyword">this</span>._save || { <span class="hljs-attr">status</span>: <span class="hljs-string">'ready'</span> },
			request = <span class="hljs-keyword">this</span>.model.save.apply( <span class="hljs-keyword">this</span>.model, <span class="hljs-built_in">arguments</span> ),
			requests = save.requests ? $.when( request, save.requests ) : request;</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>If we’re waiting to remove ‘Saved.’, stop.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( save.savedTimer ) {
			clearTimeout( save.savedTimer );
		}

		<span class="hljs-keyword">this</span>.updateSave(<span class="hljs-string">'waiting'</span>);
		save.requests = requests;
		requests.always( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>If we’ve performed another request since this one, bail.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( save.requests !== requests ) {
				<span class="hljs-keyword">return</span>;
			}

			view.updateSave( requests.state() === <span class="hljs-string">'resolved'</span> ? <span class="hljs-string">'complete'</span> : <span class="hljs-string">'error'</span> );
			save.savedTimer = setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				view.updateSave(<span class="hljs-string">'ready'</span>);
				<span class="hljs-keyword">delete</span> save.savedTimer;
			}, <span class="hljs-number">2000</span> );
		});
	},
	<span class="hljs-comment">/**
	 * @param {string} status
	 * @returns {wp.media.view.Attachment} Returns itself to allow chaining
	 */</span>
	updateSave: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> status </span>) </span>{
		<span class="hljs-keyword">var</span> save = <span class="hljs-keyword">this</span>._save = <span class="hljs-keyword">this</span>._save || { <span class="hljs-attr">status</span>: <span class="hljs-string">'ready'</span> };

		<span class="hljs-keyword">if</span> ( status &amp;&amp; status !== save.status ) {
			<span class="hljs-keyword">this</span>.$el.removeClass( <span class="hljs-string">'save-'</span> + save.status );
			save.status = status;
		}

		<span class="hljs-keyword">this</span>.$el.addClass( <span class="hljs-string">'save-'</span> + save.status );
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	},

	<span class="hljs-attr">updateAll</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
		<span class="hljs-keyword">var</span> $settings = <span class="hljs-keyword">this</span>.$(<span class="hljs-string">'[data-setting]'</span>),
			model = <span class="hljs-keyword">this</span>.model,
			changed;

		changed = _.chain( $settings ).map( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> el </span>) </span>{
			<span class="hljs-keyword">var</span> $input = $(<span class="hljs-string">'input, textarea, select, [value]'</span>, el ),
				setting, value;

			<span class="hljs-keyword">if</span> ( ! $input.length ) {
				<span class="hljs-keyword">return</span>;
			}

			setting = $(el).data(<span class="hljs-string">'setting'</span>);
			value = $input.val();</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Record the value if it changed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( model.get( setting ) !== value ) {
				<span class="hljs-keyword">return</span> [ setting, value ];
			}
		}).compact().object().value();

		<span class="hljs-keyword">if</span> ( ! _.isEmpty( changed ) ) {
			model.save( changed );
		}
	},
	<span class="hljs-comment">/**
	 * @param {Object} event
	 */</span>
	removeFromLibrary: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Catch enter and space events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-string">'keydown'</span> === event.type &amp;&amp; <span class="hljs-number">13</span> !== event.keyCode &amp;&amp; <span class="hljs-number">32</span> !== event.keyCode ) {
			<span class="hljs-keyword">return</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Stop propagation so the model isn’t selected.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		event.stopPropagation();

		<span class="hljs-keyword">this</span>.collection.remove( <span class="hljs-keyword">this</span>.model );
	},

	<span class="hljs-comment">/**
	 * Add the model if it isn't in the selection, if it is in the selection,
	 * remove it.
	 *
	 * @param  {[type]} event [description]
	 * @return {[type]}       [description]
	 */</span>
	checkClickHandler: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> event </span>) </span>{
		<span class="hljs-keyword">var</span> selection = <span class="hljs-keyword">this</span>.options.selection;
		<span class="hljs-keyword">if</span> ( ! selection ) {
			<span class="hljs-keyword">return</span>;
		}
		event.stopPropagation();
		<span class="hljs-keyword">if</span> ( selection.where( { <span class="hljs-attr">id</span>: <span class="hljs-keyword">this</span>.model.get( <span class="hljs-string">'id'</span> ) } ).length ) {
			selection.remove( <span class="hljs-keyword">this</span>.model );</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Move focus back to the attachment tile (from the check).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>.$el.focus();
		} <span class="hljs-keyword">else</span> {
			selection.add( <span class="hljs-keyword">this</span>.model );
		}
	}
});</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Ensure settings remain in sync between attachment views.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>_.each({
	<span class="hljs-attr">caption</span>: <span class="hljs-string">'_syncCaption'</span>,
	<span class="hljs-attr">title</span>:   <span class="hljs-string">'_syncTitle'</span>,
	<span class="hljs-attr">artist</span>:  <span class="hljs-string">'_syncArtist'</span>,
	<span class="hljs-attr">album</span>:   <span class="hljs-string">'_syncAlbum'</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> method, setting </span>) </span>{
	<span class="hljs-comment">/**
	 * @param {Backbone.Model} model
	 * @param {string} value
	 * @returns {wp.media.view.Attachment} Returns itself to allow chaining
	 */</span>
	Attachment.prototype[ method ] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> model, value </span>) </span>{
		<span class="hljs-keyword">var</span> $setting = <span class="hljs-keyword">this</span>.$(<span class="hljs-string">'[data-setting="'</span> + setting + <span class="hljs-string">'"]'</span>);

		<span class="hljs-keyword">if</span> ( ! $setting.length ) {
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>If the updated value is in sync with the value in the DOM, there
is no need to re-render. If we’re currently editing the value,
it will automatically be in sync, suppressing the re-render for
the view we’re editing, while updating any others.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( value === $setting.find(<span class="hljs-string">'input, textarea, select, [value]'</span>).val() ) {
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.render();
	};
});

<span class="hljs-built_in">module</span>.exports = Attachment;</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
