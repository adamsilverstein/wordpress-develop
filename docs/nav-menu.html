<!DOCTYPE html>

<html>
<head>
  <title>nav-menu.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="accordion.html">
                  accordion.js
                </a>
              
                
                <a class="source" href="bookmarklet.html">
                  bookmarklet.js
                </a>
              
                
                <a class="source" href="bookmarklet.min.html">
                  bookmarklet.min.js
                </a>
              
                
                <a class="source" href="color-picker.html">
                  color-picker.js
                </a>
              
                
                <a class="source" href="comment.html">
                  comment.js
                </a>
              
                
                <a class="source" href="common.html">
                  common.js
                </a>
              
                
                <a class="source" href="custom-background.html">
                  custom-background.js
                </a>
              
                
                <a class="source" href="custom-header.html">
                  custom-header.js
                </a>
              
                
                <a class="source" href="customize-controls.html">
                  customize-controls.js
                </a>
              
                
                <a class="source" href="customize-nav-menus.html">
                  customize-nav-menus.js
                </a>
              
                
                <a class="source" href="customize-widgets.html">
                  customize-widgets.js
                </a>
              
                
                <a class="source" href="dashboard.html">
                  dashboard.js
                </a>
              
                
                <a class="source" href="edit-comments.html">
                  edit-comments.js
                </a>
              
                
                <a class="source" href="editor-expand.html">
                  editor-expand.js
                </a>
              
                
                <a class="source" href="editor.html">
                  editor.js
                </a>
              
                
                <a class="source" href="farbtastic.html">
                  farbtastic.js
                </a>
              
                
                <a class="source" href="gallery.html">
                  gallery.js
                </a>
              
                
                <a class="source" href="image-edit.html">
                  image-edit.js
                </a>
              
                
                <a class="source" href="inline-edit-post.html">
                  inline-edit-post.js
                </a>
              
                
                <a class="source" href="inline-edit-tax.html">
                  inline-edit-tax.js
                </a>
              
                
                <a class="source" href="iris.min.html">
                  iris.min.js
                </a>
              
                
                <a class="source" href="language-chooser.html">
                  language-chooser.js
                </a>
              
                
                <a class="source" href="link.html">
                  link.js
                </a>
              
                
                <a class="source" href="media-gallery.html">
                  media-gallery.js
                </a>
              
                
                <a class="source" href="media-upload.html">
                  media-upload.js
                </a>
              
                
                <a class="source" href="media.html">
                  media.js
                </a>
              
                
                <a class="source" href="nav-menu.html">
                  nav-menu.js
                </a>
              
                
                <a class="source" href="password-strength-meter.html">
                  password-strength-meter.js
                </a>
              
                
                <a class="source" href="plugin-install.html">
                  plugin-install.js
                </a>
              
                
                <a class="source" href="post.html">
                  post.js
                </a>
              
                
                <a class="source" href="postbox.html">
                  postbox.js
                </a>
              
                
                <a class="source" href="press-this.html">
                  press-this.js
                </a>
              
                
                <a class="source" href="revisions.html">
                  revisions.js
                </a>
              
                
                <a class="source" href="set-post-thumbnail.html">
                  set-post-thumbnail.js
                </a>
              
                
                <a class="source" href="svg-painter.html">
                  svg-painter.js
                </a>
              
                
                <a class="source" href="tags-box.html">
                  tags-box.js
                </a>
              
                
                <a class="source" href="tags-suggest.html">
                  tags-suggest.js
                </a>
              
                
                <a class="source" href="tags.html">
                  tags.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="updates.html">
                  updates.js
                </a>
              
                
                <a class="source" href="user-profile.html">
                  user-profile.js
                </a>
              
                
                <a class="source" href="user-suggest.html">
                  user-suggest.js
                </a>
              
                
                <a class="source" href="widgets.html">
                  widgets.js
                </a>
              
                
                <a class="source" href="media-audio-widget.html">
                  media-audio-widget.js
                </a>
              
                
                <a class="source" href="media-image-widget.html">
                  media-image-widget.js
                </a>
              
                
                <a class="source" href="media-video-widget.html">
                  media-video-widget.js
                </a>
              
                
                <a class="source" href="media-widgets.html">
                  media-widgets.js
                </a>
              
                
                <a class="source" href="text-widgets.html">
                  text-widgets.js
                </a>
              
                
                <a class="source" href="word-count.html">
                  word-count.js
                </a>
              
                
                <a class="source" href="wp-fullscreen-stub.html">
                  wp-fullscreen-stub.js
                </a>
              
                
                <a class="source" href="xfn.html">
                  xfn.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="theme-options.html">
                  theme-options.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="showcase.html">
                  showcase.js
                </a>
              
                
                <a class="source" href="color-scheme-control.html">
                  color-scheme-control.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="keyboard-image-navigation.html">
                  keyboard-image-navigation.js
                </a>
              
                
                <a class="source" href="skip-link-focus-fix.html">
                  skip-link-focus-fix.js
                </a>
              
                
                <a class="source" href="customizer.html">
                  customizer.js
                </a>
              
                
                <a class="source" href="featured-content-admin.html">
                  featured-content-admin.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="keyboard-image-navigation.html">
                  keyboard-image-navigation.js
                </a>
              
                
                <a class="source" href="slider.html">
                  slider.js
                </a>
              
                
                <a class="source" href="customize-controls.html">
                  customize-controls.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="global.html">
                  global.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="jquery.scrollTo.html">
                  jquery.scrollTo.js
                </a>
              
                
                <a class="source" href="navigation.html">
                  navigation.js
                </a>
              
                
                <a class="source" href="skip-link-focus-fix.html">
                  skip-link-focus-fix.js
                </a>
              
                
                <a class="source" href="functions.html">
                  functions.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="html5.html">
                  html5.js
                </a>
              
                
                <a class="source" href="navigation.html">
                  navigation.js
                </a>
              
                
                <a class="source" href="theme-customizer.html">
                  theme-customizer.js
                </a>
              
                
                <a class="source" href="admin-bar.html">
                  admin-bar.js
                </a>
              
                
                <a class="source" href="autosave.html">
                  autosave.js
                </a>
              
                
                <a class="source" href="backbone.html">
                  backbone.js
                </a>
              
                
                <a class="source" href="backbone.min.html">
                  backbone.min.js
                </a>
              
                
                <a class="source" href="colorpicker.html">
                  colorpicker.js
                </a>
              
                
                <a class="source" href="comment-reply.html">
                  comment-reply.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="customize-base.html">
                  customize-base.js
                </a>
              
                
                <a class="source" href="customize-loader.html">
                  customize-loader.js
                </a>
              
                
                <a class="source" href="customize-models.html">
                  customize-models.js
                </a>
              
                
                <a class="source" href="customize-preview-nav-menus.html">
                  customize-preview-nav-menus.js
                </a>
              
                
                <a class="source" href="customize-preview-widgets.html">
                  customize-preview-widgets.js
                </a>
              
                
                <a class="source" href="customize-preview.html">
                  customize-preview.js
                </a>
              
                
                <a class="source" href="customize-selective-refresh.html">
                  customize-selective-refresh.js
                </a>
              
                
                <a class="source" href="customize-views.html">
                  customize-views.js
                </a>
              
                
                <a class="source" href="heartbeat.html">
                  heartbeat.js
                </a>
              
                
                <a class="source" href="hoverIntent.html">
                  hoverIntent.js
                </a>
              
                
                <a class="source" href="imagesloaded.min.html">
                  imagesloaded.min.js
                </a>
              
                
                <a class="source" href="jquery.imgareaselect.html">
                  jquery.imgareaselect.js
                </a>
              
                
                <a class="source" href="jquery.imgareaselect.min.html">
                  jquery.imgareaselect.min.js
                </a>
              
                
                <a class="source" href="jquery.Jcrop.min.html">
                  jquery.Jcrop.min.js
                </a>
              
                
                <a class="source" href="jquery-migrate.html">
                  jquery-migrate.js
                </a>
              
                
                <a class="source" href="jquery-migrate.min.html">
                  jquery-migrate.min.js
                </a>
              
                
                <a class="source" href="jquery.color.min.html">
                  jquery.color.min.js
                </a>
              
                
                <a class="source" href="jquery.form.html">
                  jquery.form.js
                </a>
              
                
                <a class="source" href="jquery.form.min.html">
                  jquery.form.min.js
                </a>
              
                
                <a class="source" href="jquery.hotkeys.html">
                  jquery.hotkeys.js
                </a>
              
                
                <a class="source" href="jquery.hotkeys.min.html">
                  jquery.hotkeys.min.js
                </a>
              
                
                <a class="source" href="jquery.html">
                  jquery.js
                </a>
              
                
                <a class="source" href="jquery.masonry.html">
                  jquery.masonry.js
                </a>
              
                
                <a class="source" href="jquery.masonry.min.html">
                  jquery.masonry.min.js
                </a>
              
                
                <a class="source" href="jquery.query.html">
                  jquery.query.js
                </a>
              
                
                <a class="source" href="jquery.schedule.html">
                  jquery.schedule.js
                </a>
              
                
                <a class="source" href="jquery.serialize-object.html">
                  jquery.serialize-object.js
                </a>
              
                
                <a class="source" href="jquery.table-hotkeys.html">
                  jquery.table-hotkeys.js
                </a>
              
                
                <a class="source" href="jquery.table-hotkeys.min.html">
                  jquery.table-hotkeys.min.js
                </a>
              
                
                <a class="source" href="jquery.ui.touch-punch.html">
                  jquery.ui.touch-punch.js
                </a>
              
                
                <a class="source" href="suggest.html">
                  suggest.js
                </a>
              
                
                <a class="source" href="suggest.min.html">
                  suggest.min.js
                </a>
              
                
                <a class="source" href="accordion.html">
                  accordion.js
                </a>
              
                
                <a class="source" href="autocomplete.html">
                  autocomplete.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="core.html">
                  core.js
                </a>
              
                
                <a class="source" href="datepicker.html">
                  datepicker.js
                </a>
              
                
                <a class="source" href="dialog.html">
                  dialog.js
                </a>
              
                
                <a class="source" href="draggable.html">
                  draggable.js
                </a>
              
                
                <a class="source" href="droppable.html">
                  droppable.js
                </a>
              
                
                <a class="source" href="effect-blind.html">
                  effect-blind.js
                </a>
              
                
                <a class="source" href="effect-bounce.html">
                  effect-bounce.js
                </a>
              
                
                <a class="source" href="effect-clip.html">
                  effect-clip.js
                </a>
              
                
                <a class="source" href="effect-drop.html">
                  effect-drop.js
                </a>
              
                
                <a class="source" href="effect-explode.html">
                  effect-explode.js
                </a>
              
                
                <a class="source" href="effect-fade.html">
                  effect-fade.js
                </a>
              
                
                <a class="source" href="effect-fold.html">
                  effect-fold.js
                </a>
              
                
                <a class="source" href="effect-highlight.html">
                  effect-highlight.js
                </a>
              
                
                <a class="source" href="effect-puff.html">
                  effect-puff.js
                </a>
              
                
                <a class="source" href="effect-pulsate.html">
                  effect-pulsate.js
                </a>
              
                
                <a class="source" href="effect-scale.html">
                  effect-scale.js
                </a>
              
                
                <a class="source" href="effect-shake.html">
                  effect-shake.js
                </a>
              
                
                <a class="source" href="effect-size.html">
                  effect-size.js
                </a>
              
                
                <a class="source" href="effect-slide.html">
                  effect-slide.js
                </a>
              
                
                <a class="source" href="effect-transfer.html">
                  effect-transfer.js
                </a>
              
                
                <a class="source" href="effect.html">
                  effect.js
                </a>
              
                
                <a class="source" href="menu.html">
                  menu.js
                </a>
              
                
                <a class="source" href="mouse.html">
                  mouse.js
                </a>
              
                
                <a class="source" href="position.html">
                  position.js
                </a>
              
                
                <a class="source" href="progressbar.html">
                  progressbar.js
                </a>
              
                
                <a class="source" href="resizable.html">
                  resizable.js
                </a>
              
                
                <a class="source" href="selectable.html">
                  selectable.js
                </a>
              
                
                <a class="source" href="selectmenu.html">
                  selectmenu.js
                </a>
              
                
                <a class="source" href="slider.html">
                  slider.js
                </a>
              
                
                <a class="source" href="sortable.html">
                  sortable.js
                </a>
              
                
                <a class="source" href="spinner.html">
                  spinner.js
                </a>
              
                
                <a class="source" href="tabs.html">
                  tabs.js
                </a>
              
                
                <a class="source" href="tooltip.html">
                  tooltip.js
                </a>
              
                
                <a class="source" href="widget.html">
                  widget.js
                </a>
              
                
                <a class="source" href="json2.html">
                  json2.js
                </a>
              
                
                <a class="source" href="masonry.min.html">
                  masonry.min.js
                </a>
              
                
                <a class="source" href="mce-view.html">
                  mce-view.js
                </a>
              
                
                <a class="source" href="media-audiovideo.html">
                  media-audiovideo.js
                </a>
              
                
                <a class="source" href="media-editor.html">
                  media-editor.js
                </a>
              
                
                <a class="source" href="media-grid.html">
                  media-grid.js
                </a>
              
                
                <a class="source" href="media-models.html">
                  media-models.js
                </a>
              
                
                <a class="source" href="media-views.html">
                  media-views.js
                </a>
              
                
                <a class="source" href="audiovideo.manifest.html">
                  audiovideo.manifest.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="collection-add.html">
                  collection-add.js
                </a>
              
                
                <a class="source" href="collection-edit.html">
                  collection-edit.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="customize-image-cropper.html">
                  customize-image-cropper.js
                </a>
              
                
                <a class="source" href="edit-attachment-metadata.html">
                  edit-attachment-metadata.js
                </a>
              
                
                <a class="source" href="edit-image.html">
                  edit-image.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="featured-image.html">
                  featured-image.js
                </a>
              
                
                <a class="source" href="gallery-add.html">
                  gallery-add.js
                </a>
              
                
                <a class="source" href="gallery-edit.html">
                  gallery-edit.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="library.html">
                  library.js
                </a>
              
                
                <a class="source" href="media-library.html">
                  media-library.js
                </a>
              
                
                <a class="source" href="region.html">
                  region.js
                </a>
              
                
                <a class="source" href="replace-image.html">
                  replace-image.js
                </a>
              
                
                <a class="source" href="site-icon-cropper.html">
                  site-icon-cropper.js
                </a>
              
                
                <a class="source" href="state-machine.html">
                  state-machine.js
                </a>
              
                
                <a class="source" href="state.html">
                  state.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="grid.manifest.html">
                  grid.manifest.js
                </a>
              
                
                <a class="source" href="models.manifest.html">
                  models.manifest.js
                </a>
              
                
                <a class="source" href="attachment.html">
                  attachment.js
                </a>
              
                
                <a class="source" href="attachments.html">
                  attachments.js
                </a>
              
                
                <a class="source" href="post-image.html">
                  post-image.js
                </a>
              
                
                <a class="source" href="post-media.html">
                  post-media.js
                </a>
              
                
                <a class="source" href="query.html">
                  query.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="manage.html">
                  manage.js
                </a>
              
                
                <a class="source" href="selection-sync.html">
                  selection-sync.js
                </a>
              
                
                <a class="source" href="views.manifest.html">
                  views.manifest.js
                </a>
              
                
                <a class="source" href="attachment-compat.html">
                  attachment-compat.js
                </a>
              
                
                <a class="source" href="attachment-filters.html">
                  attachment-filters.js
                </a>
              
                
                <a class="source" href="all.html">
                  all.js
                </a>
              
                
                <a class="source" href="date.html">
                  date.js
                </a>
              
                
                <a class="source" href="uploaded.html">
                  uploaded.js
                </a>
              
                
                <a class="source" href="attachment.html">
                  attachment.js
                </a>
              
                
                <a class="source" href="details-two-column.html">
                  details-two-column.js
                </a>
              
                
                <a class="source" href="details.html">
                  details.js
                </a>
              
                
                <a class="source" href="edit-library.html">
                  edit-library.js
                </a>
              
                
                <a class="source" href="edit-selection.html">
                  edit-selection.js
                </a>
              
                
                <a class="source" href="library.html">
                  library.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="attachments.html">
                  attachments.js
                </a>
              
                
                <a class="source" href="browser.html">
                  browser.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="button-group.html">
                  button-group.js
                </a>
              
                
                <a class="source" href="button.html">
                  button.js
                </a>
              
                
                <a class="source" href="delete-selected-permanently.html">
                  delete-selected-permanently.js
                </a>
              
                
                <a class="source" href="delete-selected.html">
                  delete-selected.js
                </a>
              
                
                <a class="source" href="select-mode-toggle.html">
                  select-mode-toggle.js
                </a>
              
                
                <a class="source" href="cropper.html">
                  cropper.js
                </a>
              
                
                <a class="source" href="edit-image-details.html">
                  edit-image-details.js
                </a>
              
                
                <a class="source" href="edit-image.html">
                  edit-image.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="image.html">
                  image.js
                </a>
              
                
                <a class="source" href="link.html">
                  link.js
                </a>
              
                
                <a class="source" href="url.html">
                  url.js
                </a>
              
                
                <a class="source" href="focus-manager.html">
                  focus-manager.js
                </a>
              
                
                <a class="source" href="frame.html">
                  frame.js
                </a>
              
                
                <a class="source" href="audio-details.html">
                  audio-details.js
                </a>
              
                
                <a class="source" href="edit-attachments.html">
                  edit-attachments.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="manage.html">
                  manage.js
                </a>
              
                
                <a class="source" href="media-details.html">
                  media-details.js
                </a>
              
                
                <a class="source" href="post.html">
                  post.js
                </a>
              
                
                <a class="source" href="select.html">
                  select.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="iframe.html">
                  iframe.js
                </a>
              
                
                <a class="source" href="image-details.html">
                  image-details.js
                </a>
              
                
                <a class="source" href="label.html">
                  label.js
                </a>
              
                
                <a class="source" href="media-details.html">
                  media-details.js
                </a>
              
                
                <a class="source" href="media-frame.html">
                  media-frame.js
                </a>
              
                
                <a class="source" href="menu-item.html">
                  menu-item.js
                </a>
              
                
                <a class="source" href="menu.html">
                  menu.js
                </a>
              
                
                <a class="source" href="modal.html">
                  modal.js
                </a>
              
                
                <a class="source" href="priority-list.html">
                  priority-list.js
                </a>
              
                
                <a class="source" href="router-item.html">
                  router-item.js
                </a>
              
                
                <a class="source" href="router.html">
                  router.js
                </a>
              
                
                <a class="source" href="search.html">
                  search.js
                </a>
              
                
                <a class="source" href="selection.html">
                  selection.js
                </a>
              
                
                <a class="source" href="settings.html">
                  settings.js
                </a>
              
                
                <a class="source" href="attachment-display.html">
                  attachment-display.js
                </a>
              
                
                <a class="source" href="gallery.html">
                  gallery.js
                </a>
              
                
                <a class="source" href="playlist.html">
                  playlist.js
                </a>
              
                
                <a class="source" href="sidebar.html">
                  sidebar.js
                </a>
              
                
                <a class="source" href="site-icon-cropper.html">
                  site-icon-cropper.js
                </a>
              
                
                <a class="source" href="site-icon-preview.html">
                  site-icon-preview.js
                </a>
              
                
                <a class="source" href="spinner.html">
                  spinner.js
                </a>
              
                
                <a class="source" href="toolbar.html">
                  toolbar.js
                </a>
              
                
                <a class="source" href="embed.html">
                  embed.js
                </a>
              
                
                <a class="source" href="select.html">
                  select.js
                </a>
              
                
                <a class="source" href="editor.html">
                  editor.js
                </a>
              
                
                <a class="source" href="inline.html">
                  inline.js
                </a>
              
                
                <a class="source" href="status-error.html">
                  status-error.js
                </a>
              
                
                <a class="source" href="status.html">
                  status.js
                </a>
              
                
                <a class="source" href="window.html">
                  window.js
                </a>
              
                
                <a class="source" href="video-details.html">
                  video-details.js
                </a>
              
                
                <a class="source" href="view.html">
                  view.js
                </a>
              
                
                <a class="source" href="froogaloop.min.html">
                  froogaloop.min.js
                </a>
              
                
                <a class="source" href="mediaelement-and-player.min.html">
                  mediaelement-and-player.min.js
                </a>
              
                
                <a class="source" href="wp-mediaelement.html">
                  wp-mediaelement.js
                </a>
              
                
                <a class="source" href="wp-playlist.html">
                  wp-playlist.js
                </a>
              
                
                <a class="source" href="handlers.html">
                  handlers.js
                </a>
              
                
                <a class="source" href="plupload.full.min.html">
                  plupload.full.min.js
                </a>
              
                
                <a class="source" href="wp-plupload.html">
                  wp-plupload.js
                </a>
              
                
                <a class="source" href="quicktags.html">
                  quicktags.js
                </a>
              
                
                <a class="source" href="shortcode.html">
                  shortcode.js
                </a>
              
                
                <a class="source" href="swfobject.html">
                  swfobject.js
                </a>
              
                
                <a class="source" href="handlers.html">
                  handlers.js
                </a>
              
                
                <a class="source" href="handlers.min.html">
                  handlers.min.js
                </a>
              
                
                <a class="source" href="swfupload.cookies.html">
                  swfupload.cookies.js
                </a>
              
                
                <a class="source" href="swfupload.queue.html">
                  swfupload.queue.js
                </a>
              
                
                <a class="source" href="swfupload.speed.html">
                  swfupload.speed.js
                </a>
              
                
                <a class="source" href="swfupload.swfobject.html">
                  swfupload.swfobject.js
                </a>
              
                
                <a class="source" href="swfupload.html">
                  swfupload.js
                </a>
              
                
                <a class="source" href="thickbox.html">
                  thickbox.js
                </a>
              
                
                <a class="source" href="wp-langs-en.html">
                  wp-langs-en.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.min.html">
                  plugin.min.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="plugin.html">
                  plugin.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="theme.min.html">
                  theme.min.js
                </a>
              
                
                <a class="source" href="theme.html">
                  theme.js
                </a>
              
                
                <a class="source" href="theme.min.html">
                  theme.min.js
                </a>
              
                
                <a class="source" href="tiny_mce_popup.html">
                  tiny_mce_popup.js
                </a>
              
                
                <a class="source" href="tinymce.html">
                  tinymce.js
                </a>
              
                
                <a class="source" href="tinymce.min.html">
                  tinymce.min.js
                </a>
              
                
                <a class="source" href="editable_selects.html">
                  editable_selects.js
                </a>
              
                
                <a class="source" href="form_utils.html">
                  form_utils.js
                </a>
              
                
                <a class="source" href="mctabs.html">
                  mctabs.js
                </a>
              
                
                <a class="source" href="validate.html">
                  validate.js
                </a>
              
                
                <a class="source" href="tw-sack.html">
                  tw-sack.js
                </a>
              
                
                <a class="source" href="twemoji.html">
                  twemoji.js
                </a>
              
                
                <a class="source" href="underscore.html">
                  underscore.js
                </a>
              
                
                <a class="source" href="underscore.min.html">
                  underscore.min.js
                </a>
              
                
                <a class="source" href="utils.html">
                  utils.js
                </a>
              
                
                <a class="source" href="wp-a11y.html">
                  wp-a11y.js
                </a>
              
                
                <a class="source" href="wp-ajax-response.html">
                  wp-ajax-response.js
                </a>
              
                
                <a class="source" href="wp-api.html">
                  wp-api.js
                </a>
              
                
                <a class="source" href="wp-auth-check.html">
                  wp-auth-check.js
                </a>
              
                
                <a class="source" href="wp-backbone.html">
                  wp-backbone.js
                </a>
              
                
                <a class="source" href="wp-custom-header.html">
                  wp-custom-header.js
                </a>
              
                
                <a class="source" href="wp-embed-template.html">
                  wp-embed-template.js
                </a>
              
                
                <a class="source" href="wp-embed.html">
                  wp-embed.js
                </a>
              
                
                <a class="source" href="wp-emoji-loader.html">
                  wp-emoji-loader.js
                </a>
              
                
                <a class="source" href="wp-emoji.html">
                  wp-emoji.js
                </a>
              
                
                <a class="source" href="wp-list-revisions.html">
                  wp-list-revisions.js
                </a>
              
                
                <a class="source" href="wp-lists.html">
                  wp-lists.js
                </a>
              
                
                <a class="source" href="wp-pointer.html">
                  wp-pointer.js
                </a>
              
                
                <a class="source" href="wp-util.html">
                  wp-util.js
                </a>
              
                
                <a class="source" href="wpdialog.html">
                  wpdialog.js
                </a>
              
                
                <a class="source" href="wplink.html">
                  wplink.js
                </a>
              
                
                <a class="source" href="zxcvbn-async.html">
                  zxcvbn-async.js
                </a>
              
                
                <a class="source" href="zxcvbn.min.html">
                  zxcvbn.min.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>nav-menu.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/**
 * WordPress Administration Navigation Menu
 * Interface JS functions
 *
 * @version 2.0.0
 *
 * @package WordPress
 * @subpackage Administration
 */</span>

<span class="hljs-comment">/* global menus, postboxes, columns, isRtl, navMenuL10n, ajaxurl */</span>

<span class="hljs-keyword">var</span> wpNavMenu;

(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$</span>) </span>{

	<span class="hljs-keyword">var</span> api;

	api = wpNavMenu = {

		<span class="hljs-attr">options</span> : {
			<span class="hljs-attr">menuItemDepthPerLevel</span> : <span class="hljs-number">30</span>, <span class="hljs-comment">// Do not use directly. Use depthToPx and pxToDepth instead.</span>
			globalMaxDepth:  <span class="hljs-number">11</span>,
			<span class="hljs-attr">sortableItems</span>:   <span class="hljs-string">'&gt; *'</span>,
			<span class="hljs-attr">targetTolerance</span>: <span class="hljs-number">0</span>
		},

		<span class="hljs-attr">menuList</span> : <span class="hljs-literal">undefined</span>,	<span class="hljs-comment">// Set in init.</span>
		targetList : <span class="hljs-literal">undefined</span>, <span class="hljs-comment">// Set in init.</span>
		menusChanged : <span class="hljs-literal">false</span>,
		<span class="hljs-attr">isRTL</span>: !! ( <span class="hljs-string">'undefined'</span> != <span class="hljs-keyword">typeof</span> isRtl &amp;&amp; isRtl ),
		<span class="hljs-attr">negateIfRTL</span>: ( <span class="hljs-string">'undefined'</span> != <span class="hljs-keyword">typeof</span> isRtl &amp;&amp; isRtl ) ? <span class="hljs-number">-1</span> : <span class="hljs-number">1</span>,
		<span class="hljs-attr">lastSearch</span>: <span class="hljs-string">''</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Functions that run on init.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		init : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			api.menuList = $(<span class="hljs-string">'#menu-to-edit'</span>);
			api.targetList = api.menuList;

			<span class="hljs-keyword">this</span>.jQueryExtensions();

			<span class="hljs-keyword">this</span>.attachMenuEditListeners();

			<span class="hljs-keyword">this</span>.attachQuickSearchListeners();
			<span class="hljs-keyword">this</span>.attachThemeLocationsListeners();
			<span class="hljs-keyword">this</span>.attachMenuSaveSubmitListeners();

			<span class="hljs-keyword">this</span>.attachTabsPanelListeners();

			<span class="hljs-keyword">this</span>.attachUnsavedChangesListener();

			<span class="hljs-keyword">if</span> ( api.menuList.length )
				<span class="hljs-keyword">this</span>.initSortables();

			<span class="hljs-keyword">if</span> ( menus.oneThemeLocationNoMenus )
				$( <span class="hljs-string">'#posttype-page'</span> ).addSelectedToMenu( api.addMenuItemToBottom );

			<span class="hljs-keyword">this</span>.initManageLocations();

			<span class="hljs-keyword">this</span>.initAccessibility();

			<span class="hljs-keyword">this</span>.initToggles();

			<span class="hljs-keyword">this</span>.initPreviewing();
		},

		<span class="hljs-attr">jQueryExtensions</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>jQuery extensions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$.fn.extend({
				<span class="hljs-attr">menuItemDepth</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">var</span> margin = api.isRTL ? <span class="hljs-keyword">this</span>.eq(<span class="hljs-number">0</span>).css(<span class="hljs-string">'margin-right'</span>) : <span class="hljs-keyword">this</span>.eq(<span class="hljs-number">0</span>).css(<span class="hljs-string">'margin-left'</span>);
					<span class="hljs-keyword">return</span> api.pxToDepth( margin &amp;&amp; <span class="hljs-number">-1</span> != margin.indexOf(<span class="hljs-string">'px'</span>) ? margin.slice(<span class="hljs-number">0</span>, <span class="hljs-number">-2</span>) : <span class="hljs-number">0</span> );
				},
				<span class="hljs-attr">updateDepthClass</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">current, prev</span>) </span>{
					<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
						<span class="hljs-keyword">var</span> t = $(<span class="hljs-keyword">this</span>);
						prev = prev || t.menuItemDepth();
						$(<span class="hljs-keyword">this</span>).removeClass(<span class="hljs-string">'menu-item-depth-'</span>+ prev )
							.addClass(<span class="hljs-string">'menu-item-depth-'</span>+ current );
					});
				},
				<span class="hljs-attr">shiftDepthClass</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">change</span>) </span>{
					<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
						<span class="hljs-keyword">var</span> t = $(<span class="hljs-keyword">this</span>),
							depth = t.menuItemDepth(),
							newDepth = depth + change;

						t.removeClass( <span class="hljs-string">'menu-item-depth-'</span>+ depth )
							.addClass( <span class="hljs-string">'menu-item-depth-'</span>+ ( newDepth ) );

						<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === newDepth ) {
							t.find( <span class="hljs-string">'.is-submenu'</span> ).hide();
						}
					});
				},
				<span class="hljs-attr">childMenuItems</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">var</span> result = $();
					<span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
						<span class="hljs-keyword">var</span> t = $(<span class="hljs-keyword">this</span>), depth = t.menuItemDepth(), next = t.next( <span class="hljs-string">'.menu-item'</span> );
						<span class="hljs-keyword">while</span>( next.length &amp;&amp; next.menuItemDepth() &gt; depth ) {
							result = result.add( next );
							next = next.next( <span class="hljs-string">'.menu-item'</span> );
						}
					});
					<span class="hljs-keyword">return</span> result;
				},
				<span class="hljs-attr">shiftHorizontally</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> dir </span>) </span>{
					<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
						<span class="hljs-keyword">var</span> t = $(<span class="hljs-keyword">this</span>),
							depth = t.menuItemDepth(),
							newDepth = depth + dir;</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Change .menu-item-depth-n class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						t.moveHorizontally( newDepth, depth );
					});
				},
				<span class="hljs-attr">moveHorizontally</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> newDepth, depth </span>) </span>{
					<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
						<span class="hljs-keyword">var</span> t = $(<span class="hljs-keyword">this</span>),
							children = t.childMenuItems(),
							diff = newDepth - depth,
							subItemText = t.find(<span class="hljs-string">'.is-submenu'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Change .menu-item-depth-n class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						t.updateDepthClass( newDepth, depth ).updateParentMenuItemDBId();</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>If it has children, move those too</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						<span class="hljs-keyword">if</span> ( children ) {
							children.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
								<span class="hljs-keyword">var</span> t = $(<span class="hljs-keyword">this</span>),
									thisDepth = t.menuItemDepth(),
									newDepth = thisDepth + diff;
								t.updateDepthClass(newDepth, thisDepth).updateParentMenuItemDBId();
							});
						}</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Show “Sub item” helper text</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						<span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> === newDepth)
							subItemText.hide();
						<span class="hljs-keyword">else</span>
							subItemText.show();
					});
				},
				<span class="hljs-attr">updateParentMenuItemDBId</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
						<span class="hljs-keyword">var</span> item = $(<span class="hljs-keyword">this</span>),
							input = item.find( <span class="hljs-string">'.menu-item-data-parent-id'</span> ),
							depth = <span class="hljs-built_in">parseInt</span>( item.menuItemDepth(), <span class="hljs-number">10</span> ),
							parentDepth = depth - <span class="hljs-number">1</span>,
							parent = item.prevAll( <span class="hljs-string">'.menu-item-depth-'</span> + parentDepth ).first();

						<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === depth ) { <span class="hljs-comment">// Item is on the top level, has no parent</span>
							input.val(<span class="hljs-number">0</span>);
						} <span class="hljs-keyword">else</span> { <span class="hljs-comment">// Find the parent item, and retrieve its object id.</span>
							input.val( parent.find( <span class="hljs-string">'.menu-item-data-db-id'</span> ).val() );
						}
					});
				},
				<span class="hljs-attr">hideAdvancedMenuItemFields</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
						<span class="hljs-keyword">var</span> that = $(<span class="hljs-keyword">this</span>);
						$(<span class="hljs-string">'.hide-column-tog'</span>).not(<span class="hljs-string">':checked'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
							that.find(<span class="hljs-string">'.field-'</span> + $(<span class="hljs-keyword">this</span>).val() ).addClass(<span class="hljs-string">'hidden-field'</span>);
						});
					});
				},
				<span class="hljs-comment">/**
				 * Adds selected menu items to the menu.
				 *
				 * @param jQuery metabox The metabox jQuery object.
				 */</span>
				addSelectedToMenu : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">processMethod</span>) </span>{
					<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === $(<span class="hljs-string">'#menu-to-edit'</span>).length ) {
						<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
					}

					<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						<span class="hljs-keyword">var</span> t = $(<span class="hljs-keyword">this</span>), menuItems = {},
							checkboxes = ( menus.oneThemeLocationNoMenus &amp;&amp; <span class="hljs-number">0</span> === t.find( <span class="hljs-string">'.tabs-panel-active .categorychecklist li input:checked'</span> ).length ) ? t.find( <span class="hljs-string">'#page-all li input[type="checkbox"]'</span> ) : t.find( <span class="hljs-string">'.tabs-panel-active .categorychecklist li input:checked'</span> ),
							re = <span class="hljs-regexp">/menu-item\[([^\]]*)/</span>;

						processMethod = processMethod || api.addMenuItemToBottom;</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>If no items are checked, bail.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						<span class="hljs-keyword">if</span> ( !checkboxes.length )
							<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Show the ajax spinner</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						t.find( <span class="hljs-string">'.button-controls .spinner'</span> ).addClass( <span class="hljs-string">'is-active'</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Retrieve menu item data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						$(checkboxes).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
							<span class="hljs-keyword">var</span> t = $(<span class="hljs-keyword">this</span>),
								listItemDBIDMatch = re.exec( t.attr(<span class="hljs-string">'name'</span>) ),
								listItemDBID = <span class="hljs-string">'undefined'</span> == <span class="hljs-keyword">typeof</span> listItemDBIDMatch[<span class="hljs-number">1</span>] ? <span class="hljs-number">0</span> : <span class="hljs-built_in">parseInt</span>(listItemDBIDMatch[<span class="hljs-number">1</span>], <span class="hljs-number">10</span>);

							<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.className &amp;&amp; <span class="hljs-number">-1</span> != <span class="hljs-keyword">this</span>.className.indexOf(<span class="hljs-string">'add-to-top'</span>) )
								processMethod = api.addMenuItemToTop;
							menuItems[listItemDBID] = t.closest(<span class="hljs-string">'li'</span>).getItemData( <span class="hljs-string">'add-menu-item'</span>, listItemDBID );
						});</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Add the items</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						api.addItemToMenu(menuItems, processMethod, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Deselect the items and hide the ajax spinner</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							checkboxes.removeAttr(<span class="hljs-string">'checked'</span>);
							t.find( <span class="hljs-string">'.button-controls .spinner'</span> ).removeClass( <span class="hljs-string">'is-active'</span> );
						});
					});
				},
				<span class="hljs-attr">getItemData</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> itemType, id </span>) </span>{
					itemType = itemType || <span class="hljs-string">'menu-item'</span>;

					<span class="hljs-keyword">var</span> itemData = {}, i,
					fields = [
						<span class="hljs-string">'menu-item-db-id'</span>,
						<span class="hljs-string">'menu-item-object-id'</span>,
						<span class="hljs-string">'menu-item-object'</span>,
						<span class="hljs-string">'menu-item-parent-id'</span>,
						<span class="hljs-string">'menu-item-position'</span>,
						<span class="hljs-string">'menu-item-type'</span>,
						<span class="hljs-string">'menu-item-title'</span>,
						<span class="hljs-string">'menu-item-url'</span>,
						<span class="hljs-string">'menu-item-description'</span>,
						<span class="hljs-string">'menu-item-attr-title'</span>,
						<span class="hljs-string">'menu-item-target'</span>,
						<span class="hljs-string">'menu-item-classes'</span>,
						<span class="hljs-string">'menu-item-xfn'</span>
					];

					<span class="hljs-keyword">if</span>( !id &amp;&amp; itemType == <span class="hljs-string">'menu-item'</span> ) {
						id = <span class="hljs-keyword">this</span>.find(<span class="hljs-string">'.menu-item-data-db-id'</span>).val();
					}

					<span class="hljs-keyword">if</span>( !id ) <span class="hljs-keyword">return</span> itemData;

					<span class="hljs-keyword">this</span>.find(<span class="hljs-string">'input'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						<span class="hljs-keyword">var</span> field;
						i = fields.length;
						<span class="hljs-keyword">while</span> ( i-- ) {
							<span class="hljs-keyword">if</span>( itemType == <span class="hljs-string">'menu-item'</span> )
								field = fields[i] + <span class="hljs-string">'['</span> + id + <span class="hljs-string">']'</span>;
							<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( itemType == <span class="hljs-string">'add-menu-item'</span> )
								field = <span class="hljs-string">'menu-item['</span> + id + <span class="hljs-string">']['</span> + fields[i] + <span class="hljs-string">']'</span>;

							<span class="hljs-keyword">if</span> (
								<span class="hljs-keyword">this</span>.name &amp;&amp;
								field == <span class="hljs-keyword">this</span>.name
							) {
								itemData[fields[i]] = <span class="hljs-keyword">this</span>.value;
							}
						}
					});

					<span class="hljs-keyword">return</span> itemData;
				},
				<span class="hljs-attr">setItemData</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> itemData, itemType, id </span>) </span>{ <span class="hljs-comment">// Can take a type, such as 'menu-item', or an id.</span>
					itemType = itemType || <span class="hljs-string">'menu-item'</span>;

					<span class="hljs-keyword">if</span>( !id &amp;&amp; itemType == <span class="hljs-string">'menu-item'</span> ) {
						id = $(<span class="hljs-string">'.menu-item-data-db-id'</span>, <span class="hljs-keyword">this</span>).val();
					}

					<span class="hljs-keyword">if</span>( !id ) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;

					<span class="hljs-keyword">this</span>.find(<span class="hljs-string">'input'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
						<span class="hljs-keyword">var</span> t = $(<span class="hljs-keyword">this</span>), field;
						$.each( itemData, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> attr, val </span>) </span>{
							<span class="hljs-keyword">if</span>( itemType == <span class="hljs-string">'menu-item'</span> )
								field = attr + <span class="hljs-string">'['</span> + id + <span class="hljs-string">']'</span>;
							<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( itemType == <span class="hljs-string">'add-menu-item'</span> )
								field = <span class="hljs-string">'menu-item['</span> + id + <span class="hljs-string">']['</span> + attr + <span class="hljs-string">']'</span>;

							<span class="hljs-keyword">if</span> ( field == t.attr(<span class="hljs-string">'name'</span>) ) {
								t.val( val );
							}
						});
					});
					<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
				}
			});
		},

		<span class="hljs-attr">countMenuItems</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> depth </span>) </span>{
			<span class="hljs-keyword">return</span> $( <span class="hljs-string">'.menu-item-depth-'</span> + depth ).length;
		},

		<span class="hljs-attr">moveMenuItem</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> $this, dir </span>) </span>{

			<span class="hljs-keyword">var</span> items, newItemPosition, newDepth,
				menuItems = $( <span class="hljs-string">'#menu-to-edit li'</span> ),
				menuItemsCount = menuItems.length,
				thisItem = $<span class="hljs-keyword">this</span>.parents( <span class="hljs-string">'li.menu-item'</span> ),
				thisItemChildren = thisItem.childMenuItems(),
				thisItemData = thisItem.getItemData(),
				thisItemDepth = <span class="hljs-built_in">parseInt</span>( thisItem.menuItemDepth(), <span class="hljs-number">10</span> ),
				thisItemPosition = <span class="hljs-built_in">parseInt</span>( thisItem.index(), <span class="hljs-number">10</span> ),
				nextItem = thisItem.next(),
				nextItemChildren = nextItem.childMenuItems(),
				nextItemDepth = <span class="hljs-built_in">parseInt</span>( nextItem.menuItemDepth(), <span class="hljs-number">10</span> ) + <span class="hljs-number">1</span>,
				prevItem = thisItem.prev(),
				prevItemDepth = <span class="hljs-built_in">parseInt</span>( prevItem.menuItemDepth(), <span class="hljs-number">10</span> ),
				prevItemId = prevItem.getItemData()[<span class="hljs-string">'menu-item-db-id'</span>];

			<span class="hljs-keyword">switch</span> ( dir ) {
			<span class="hljs-keyword">case</span> <span class="hljs-string">'up'</span>:
				newItemPosition = thisItemPosition - <span class="hljs-number">1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Already at top</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === thisItemPosition )
					<span class="hljs-keyword">break</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>If a sub item is moved to top, shift it to 0 depth</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === newItemPosition &amp;&amp; <span class="hljs-number">0</span> !== thisItemDepth )
					thisItem.moveHorizontally( <span class="hljs-number">0</span>, thisItemDepth );</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>If prev item is sub item, shift to match depth</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> !== prevItemDepth )
					thisItem.moveHorizontally( prevItemDepth, thisItemDepth );</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Does this item have sub items?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( thisItemChildren ) {
					items = thisItem.add( thisItemChildren );</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Move the entire block</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					items.detach().insertBefore( menuItems.eq( newItemPosition ) ).updateParentMenuItemDBId();
				} <span class="hljs-keyword">else</span> {
					thisItem.detach().insertBefore( menuItems.eq( newItemPosition ) ).updateParentMenuItemDBId();
				}
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">'down'</span>:</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Does this item have sub items?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( thisItemChildren ) {
					items = thisItem.add( thisItemChildren ),
						nextItem = menuItems.eq( items.length + thisItemPosition ),
						nextItemChildren = <span class="hljs-number">0</span> !== nextItem.childMenuItems().length;

					<span class="hljs-keyword">if</span> ( nextItemChildren ) {
						newDepth = <span class="hljs-built_in">parseInt</span>( nextItem.menuItemDepth(), <span class="hljs-number">10</span> ) + <span class="hljs-number">1</span>;
						thisItem.moveHorizontally( newDepth, thisItemDepth );
					}</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Have we reached the bottom?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( menuItemsCount === thisItemPosition + items.length )
						<span class="hljs-keyword">break</span>;

					items.detach().insertAfter( menuItems.eq( thisItemPosition + items.length ) ).updateParentMenuItemDBId();
				} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>If next item has sub items, shift depth</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> !== nextItemChildren.length )
						thisItem.moveHorizontally( nextItemDepth, thisItemDepth );</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Have we reached the bottom</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( menuItemsCount === thisItemPosition + <span class="hljs-number">1</span> )
						<span class="hljs-keyword">break</span>;
					thisItem.detach().insertAfter( menuItems.eq( thisItemPosition + <span class="hljs-number">1</span> ) ).updateParentMenuItemDBId();
				}
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">'top'</span>:</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Already at top</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === thisItemPosition )
					<span class="hljs-keyword">break</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Does this item have sub items?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( thisItemChildren ) {
					items = thisItem.add( thisItemChildren );</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Move the entire block</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					items.detach().insertBefore( menuItems.eq( <span class="hljs-number">0</span> ) ).updateParentMenuItemDBId();
				} <span class="hljs-keyword">else</span> {
					thisItem.detach().insertBefore( menuItems.eq( <span class="hljs-number">0</span> ) ).updateParentMenuItemDBId();
				}
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">'left'</span>:</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>As far left as possible</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === thisItemDepth )
					<span class="hljs-keyword">break</span>;
				thisItem.shiftHorizontally( <span class="hljs-number">-1</span> );
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">'right'</span>:</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Can’t be sub item at top</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === thisItemPosition )
					<span class="hljs-keyword">break</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Already sub item of prevItem</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( thisItemData[<span class="hljs-string">'menu-item-parent-id'</span>] === prevItemId )
					<span class="hljs-keyword">break</span>;
				thisItem.shiftHorizontally( <span class="hljs-number">1</span> );
				<span class="hljs-keyword">break</span>;
			}
			$<span class="hljs-keyword">this</span>.focus();
			api.registerChange();
			api.refreshKeyboardAccessibility();
			api.refreshAdvancedAccessibility();
		},

		<span class="hljs-attr">initAccessibility</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> menu = $( <span class="hljs-string">'#menu-to-edit'</span> );

			api.refreshKeyboardAccessibility();
			api.refreshAdvancedAccessibility();</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Refresh the accessibility when the user comes close to the item in any way</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			menu.on( <span class="hljs-string">'mouseenter.refreshAccessibility focus.refreshAccessibility touchstart.refreshAccessibility'</span> , <span class="hljs-string">'.menu-item'</span> , <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
				api.refreshAdvancedAccessibilityOfItem( $( <span class="hljs-keyword">this</span> ).find( <span class="hljs-string">'a.item-edit'</span> ) );
			} );</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>We have to update on click as well because we might hover first, change the item, and then click.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			menu.on( <span class="hljs-string">'click'</span>, <span class="hljs-string">'a.item-edit'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				api.refreshAdvancedAccessibilityOfItem( $( <span class="hljs-keyword">this</span> ) );
			} );</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Links for moving items</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			menu.on( <span class="hljs-string">'click'</span>, <span class="hljs-string">'.menus-move'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $( <span class="hljs-keyword">this</span> ),
					dir = $<span class="hljs-keyword">this</span>.data( <span class="hljs-string">'dir'</span> );

				<span class="hljs-keyword">if</span> ( <span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> dir ) {
					api.moveMenuItem( $( <span class="hljs-keyword">this</span> ).parents( <span class="hljs-string">'li.menu-item'</span> ).find( <span class="hljs-string">'a.item-edit'</span> ), dir );
				}
			});
		},

		<span class="hljs-comment">/**
		 * refreshAdvancedAccessibilityOfItem( [itemToRefresh] )
		 *
		 * Refreshes advanced accessibility buttons for one menu item.
		 * Shows or hides buttons based on the location of the menu item.
		 *
		 * @param  {object} itemToRefresh The menu item that might need its advanced accessibility buttons refreshed
		 */</span>
		refreshAdvancedAccessibilityOfItem : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> itemToRefresh </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Only refresh accessibility when necessary</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( <span class="hljs-literal">true</span> !== $( itemToRefresh ).data( <span class="hljs-string">'needs_accessibility_refresh'</span> ) ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">var</span> thisLink, thisLinkText, primaryItems, itemPosition, title,
				parentItem, parentItemId, parentItemName, subItems,
				$<span class="hljs-keyword">this</span> = $( itemToRefresh ),
				menuItem = $<span class="hljs-keyword">this</span>.closest( <span class="hljs-string">'li.menu-item'</span> ).first(),
				depth = menuItem.menuItemDepth(),
				isPrimaryMenuItem = ( <span class="hljs-number">0</span> === depth ),
				itemName = $<span class="hljs-keyword">this</span>.closest( <span class="hljs-string">'.menu-item-handle'</span> ).find( <span class="hljs-string">'.menu-item-title'</span> ).text(),
				position = <span class="hljs-built_in">parseInt</span>( menuItem.index(), <span class="hljs-number">10</span> ),
				prevItemDepth = ( isPrimaryMenuItem ) ? depth : <span class="hljs-built_in">parseInt</span>( depth - <span class="hljs-number">1</span>, <span class="hljs-number">10</span> ),
				prevItemNameLeft = menuItem.prevAll(<span class="hljs-string">'.menu-item-depth-'</span> + prevItemDepth).first().find( <span class="hljs-string">'.menu-item-title'</span> ).text(),
				prevItemNameRight = menuItem.prevAll(<span class="hljs-string">'.menu-item-depth-'</span> + depth).first().find( <span class="hljs-string">'.menu-item-title'</span> ).text(),
				totalMenuItems = $(<span class="hljs-string">'#menu-to-edit li'</span>).length,
				hasSameDepthSibling = menuItem.nextAll( <span class="hljs-string">'.menu-item-depth-'</span> + depth ).length;

				menuItem.find( <span class="hljs-string">'.field-move'</span> ).toggle( totalMenuItems &gt; <span class="hljs-number">1</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Where can they move this menu item?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> !== position ) {
				thisLink = menuItem.find( <span class="hljs-string">'.menus-move-up'</span> );
				thisLink.attr( <span class="hljs-string">'aria-label'</span>, menus.moveUp ).css( <span class="hljs-string">'display'</span>, <span class="hljs-string">'inline'</span> );
			}

			<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> !== position &amp;&amp; isPrimaryMenuItem ) {
				thisLink = menuItem.find( <span class="hljs-string">'.menus-move-top'</span> );
				thisLink.attr( <span class="hljs-string">'aria-label'</span>, menus.moveToTop ).css( <span class="hljs-string">'display'</span>, <span class="hljs-string">'inline'</span> );
			}

			<span class="hljs-keyword">if</span> ( position + <span class="hljs-number">1</span> !== totalMenuItems &amp;&amp; <span class="hljs-number">0</span> !== position ) {
				thisLink = menuItem.find( <span class="hljs-string">'.menus-move-down'</span> );
				thisLink.attr( <span class="hljs-string">'aria-label'</span>, menus.moveDown ).css( <span class="hljs-string">'display'</span>, <span class="hljs-string">'inline'</span> );
			}

			<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === position &amp;&amp; <span class="hljs-number">0</span> !== hasSameDepthSibling ) {
				thisLink = menuItem.find( <span class="hljs-string">'.menus-move-down'</span> );
				thisLink.attr( <span class="hljs-string">'aria-label'</span>, menus.moveDown ).css( <span class="hljs-string">'display'</span>, <span class="hljs-string">'inline'</span> );
			}

			<span class="hljs-keyword">if</span> ( ! isPrimaryMenuItem ) {
				thisLink = menuItem.find( <span class="hljs-string">'.menus-move-left'</span> ),
				thisLinkText = menus.outFrom.replace( <span class="hljs-string">'%s'</span>, prevItemNameLeft );
				thisLink.attr( <span class="hljs-string">'aria-label'</span>, menus.moveOutFrom.replace( <span class="hljs-string">'%s'</span>, prevItemNameLeft ) ).text( thisLinkText ).css( <span class="hljs-string">'display'</span>, <span class="hljs-string">'inline'</span> );
			}

			<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> !== position ) {
				<span class="hljs-keyword">if</span> ( menuItem.find( <span class="hljs-string">'.menu-item-data-parent-id'</span> ).val() !== menuItem.prev().find( <span class="hljs-string">'.menu-item-data-db-id'</span> ).val() ) {
					thisLink = menuItem.find( <span class="hljs-string">'.menus-move-right'</span> ),
					thisLinkText = menus.under.replace( <span class="hljs-string">'%s'</span>, prevItemNameRight );
					thisLink.attr( <span class="hljs-string">'aria-label'</span>, menus.moveUnder.replace( <span class="hljs-string">'%s'</span>, prevItemNameRight ) ).text( thisLinkText ).css( <span class="hljs-string">'display'</span>, <span class="hljs-string">'inline'</span> );
				}
			}

			<span class="hljs-keyword">if</span> ( isPrimaryMenuItem ) {
				primaryItems = $( <span class="hljs-string">'.menu-item-depth-0'</span> ),
				itemPosition = primaryItems.index( menuItem ) + <span class="hljs-number">1</span>,
				totalMenuItems = primaryItems.length,</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>String together help text for primary menu items</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				title = menus.menuFocus.replace( <span class="hljs-string">'%1$s'</span>, itemName ).replace( <span class="hljs-string">'%2$d'</span>, itemPosition ).replace( <span class="hljs-string">'%3$d'</span>, totalMenuItems );
			} <span class="hljs-keyword">else</span> {
				parentItem = menuItem.prevAll( <span class="hljs-string">'.menu-item-depth-'</span> + <span class="hljs-built_in">parseInt</span>( depth - <span class="hljs-number">1</span>, <span class="hljs-number">10</span> ) ).first(),
				parentItemId = parentItem.find( <span class="hljs-string">'.menu-item-data-db-id'</span> ).val(),
				parentItemName = parentItem.find( <span class="hljs-string">'.menu-item-title'</span> ).text(),
				subItems = $( <span class="hljs-string">'.menu-item .menu-item-data-parent-id[value="'</span> + parentItemId + <span class="hljs-string">'"]'</span> ),
				itemPosition = $( subItems.parents(<span class="hljs-string">'.menu-item'</span>).get().reverse() ).index( menuItem ) + <span class="hljs-number">1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>String together help text for sub menu items</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				title = menus.subMenuFocus.replace( <span class="hljs-string">'%1$s'</span>, itemName ).replace( <span class="hljs-string">'%2$d'</span>, itemPosition ).replace( <span class="hljs-string">'%3$s'</span>, parentItemName );
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>@todo Consider to update just the <code>aria-label</code> attribute.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$<span class="hljs-keyword">this</span>.attr( <span class="hljs-string">'aria-label'</span>, title ).text( title );</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Mark this item’s accessibility as refreshed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$<span class="hljs-keyword">this</span>.data( <span class="hljs-string">'needs_accessibility_refresh'</span>, <span class="hljs-literal">false</span> );
		},

		<span class="hljs-comment">/**
		 * refreshAdvancedAccessibility
		 *
		 * Hides all advanced accessibility buttons and marks them for refreshing.
		 */</span>
		refreshAdvancedAccessibility : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>Hide all the move buttons by default.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$( <span class="hljs-string">'.menu-item-settings .field-move .menus-move'</span> ).hide();</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Mark all menu items as unprocessed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$( <span class="hljs-string">'a.item-edit'</span> ).data( <span class="hljs-string">'needs_accessibility_refresh'</span>, <span class="hljs-literal">true</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>All open items have to be refreshed or they will show no links</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$( <span class="hljs-string">'.menu-item-edit-active a.item-edit'</span> ).each( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				api.refreshAdvancedAccessibilityOfItem( <span class="hljs-keyword">this</span> );
			} );
		},

		<span class="hljs-attr">refreshKeyboardAccessibility</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			$( <span class="hljs-string">'a.item-edit'</span> ).off( <span class="hljs-string">'focus'</span> ).on( <span class="hljs-string">'focus'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
				$(<span class="hljs-keyword">this</span>).off( <span class="hljs-string">'keydown'</span> ).on( <span class="hljs-string">'keydown'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{

					<span class="hljs-keyword">var</span> arrows,
						$<span class="hljs-keyword">this</span> = $( <span class="hljs-keyword">this</span> ),
						thisItem = $<span class="hljs-keyword">this</span>.parents( <span class="hljs-string">'li.menu-item'</span> ),
						thisItemData = thisItem.getItemData();</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>Bail if it’s not an arrow key</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( <span class="hljs-number">37</span> != e.which &amp;&amp; <span class="hljs-number">38</span> != e.which &amp;&amp; <span class="hljs-number">39</span> != e.which &amp;&amp; <span class="hljs-number">40</span> != e.which )
						<span class="hljs-keyword">return</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Avoid multiple keydown events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					$<span class="hljs-keyword">this</span>.off(<span class="hljs-string">'keydown'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Bail if there is only one menu item</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( <span class="hljs-number">1</span> === $(<span class="hljs-string">'#menu-to-edit li'</span>).length )
						<span class="hljs-keyword">return</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>If RTL, swap left/right arrows</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					arrows = { <span class="hljs-string">'38'</span>: <span class="hljs-string">'up'</span>, <span class="hljs-string">'40'</span>: <span class="hljs-string">'down'</span>, <span class="hljs-string">'37'</span>: <span class="hljs-string">'left'</span>, <span class="hljs-string">'39'</span>: <span class="hljs-string">'right'</span> };
					<span class="hljs-keyword">if</span> ( $(<span class="hljs-string">'body'</span>).hasClass(<span class="hljs-string">'rtl'</span>) )
						arrows = { <span class="hljs-string">'38'</span> : <span class="hljs-string">'up'</span>, <span class="hljs-string">'40'</span> : <span class="hljs-string">'down'</span>, <span class="hljs-string">'39'</span> : <span class="hljs-string">'left'</span>, <span class="hljs-string">'37'</span> : <span class="hljs-string">'right'</span> };

					<span class="hljs-keyword">switch</span> ( arrows[e.which] ) {
					<span class="hljs-keyword">case</span> <span class="hljs-string">'up'</span>:
						api.moveMenuItem( $<span class="hljs-keyword">this</span>, <span class="hljs-string">'up'</span> );
						<span class="hljs-keyword">break</span>;
					<span class="hljs-keyword">case</span> <span class="hljs-string">'down'</span>:
						api.moveMenuItem( $<span class="hljs-keyword">this</span>, <span class="hljs-string">'down'</span> );
						<span class="hljs-keyword">break</span>;
					<span class="hljs-keyword">case</span> <span class="hljs-string">'left'</span>:
						api.moveMenuItem( $<span class="hljs-keyword">this</span>, <span class="hljs-string">'left'</span> );
						<span class="hljs-keyword">break</span>;
					<span class="hljs-keyword">case</span> <span class="hljs-string">'right'</span>:
						api.moveMenuItem( $<span class="hljs-keyword">this</span>, <span class="hljs-string">'right'</span> );
						<span class="hljs-keyword">break</span>;
					}</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Put focus back on same menu item</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					$( <span class="hljs-string">'#edit-'</span> + thisItemData[<span class="hljs-string">'menu-item-db-id'</span>] ).focus();
					<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
				});
			});
		},

		<span class="hljs-attr">initPreviewing</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>Update the item handle title when the navigation label is changed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$( <span class="hljs-string">'#menu-to-edit'</span> ).on( <span class="hljs-string">'change input'</span>, <span class="hljs-string">'.edit-menu-item-title'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
				<span class="hljs-keyword">var</span> input = $( e.currentTarget ), title, titleEl;
				title = input.val();
				titleEl = input.closest( <span class="hljs-string">'.menu-item'</span> ).find( <span class="hljs-string">'.menu-item-title'</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>Don’t update to empty title.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( title ) {
					titleEl.text( title ).removeClass( <span class="hljs-string">'no-title'</span> );
				} <span class="hljs-keyword">else</span> {
					titleEl.text( navMenuL10n.untitled ).addClass( <span class="hljs-string">'no-title'</span> );
				}
			} );
		},

		<span class="hljs-attr">initToggles</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>init postboxes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			postboxes.add_postbox_toggles(<span class="hljs-string">'nav-menus'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>adjust columns functions for menus UI</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			columns.useCheckboxesForHidden();
			columns.checked = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">field</span>) </span>{
				$(<span class="hljs-string">'.field-'</span> + field).removeClass(<span class="hljs-string">'hidden-field'</span>);
			};
			columns.unchecked = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">field</span>) </span>{
				$(<span class="hljs-string">'.field-'</span> + field).addClass(<span class="hljs-string">'hidden-field'</span>);
			};</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>hide fields</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			api.menuList.hideAdvancedMenuItemFields();

			$(<span class="hljs-string">'.hide-postbox-tog'</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> hidden = $( <span class="hljs-string">'.accordion-container li.accordion-section'</span> ).filter(<span class="hljs-string">':hidden'</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.id; }).get().join(<span class="hljs-string">','</span>);
				$.post(ajaxurl, {
					<span class="hljs-attr">action</span>: <span class="hljs-string">'closed-postboxes'</span>,
					<span class="hljs-attr">hidden</span>: hidden,
					<span class="hljs-attr">closedpostboxesnonce</span>: jQuery(<span class="hljs-string">'#closedpostboxesnonce'</span>).val(),
					<span class="hljs-attr">page</span>: <span class="hljs-string">'nav-menus'</span>
				});
			});
		},

		<span class="hljs-attr">initSortables</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> currentDepth = <span class="hljs-number">0</span>, originalDepth, minDepth, maxDepth,
				prev, next, prevBottom, nextThreshold, helperHeight, transport,
				menuEdge = api.menuList.offset().left,
				body = $(<span class="hljs-string">'body'</span>), maxChildDepth,
				menuMaxDepth = initialMenuMaxDepth();

			<span class="hljs-keyword">if</span>( <span class="hljs-number">0</span> !== $( <span class="hljs-string">'#menu-to-edit li'</span> ).length )
				$( <span class="hljs-string">'.drag-instructions'</span> ).show();</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>Use the right edge if RTL.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			menuEdge += api.isRTL ? api.menuList.width() : <span class="hljs-number">0</span>;

			api.menuList.sortable({
				<span class="hljs-attr">handle</span>: <span class="hljs-string">'.menu-item-handle'</span>,
				<span class="hljs-attr">placeholder</span>: <span class="hljs-string">'sortable-placeholder'</span>,
				<span class="hljs-attr">items</span>: api.options.sortableItems,
				<span class="hljs-attr">start</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e, ui</span>) </span>{
					<span class="hljs-keyword">var</span> height, width, parent, children, tempHolder;</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>handle placement for rtl orientation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( api.isRTL )
						ui.item[<span class="hljs-number">0</span>].style.right = <span class="hljs-string">'auto'</span>;

					transport = ui.item.children(<span class="hljs-string">'.menu-item-transport'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>Set depths. currentDepth must be set before children are located.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					originalDepth = ui.item.menuItemDepth();
					updateCurrentDepth(ui, originalDepth);</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>Attach child elements to parent
Skip the placeholder</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					parent = ( ui.item.next()[<span class="hljs-number">0</span>] == ui.placeholder[<span class="hljs-number">0</span>] ) ? ui.item.next() : ui.item;
					children = parent.childMenuItems();
					transport.append( children );</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>Update the height of the placeholder to match the moving item.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					height = transport.outerHeight();</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>If there are children, account for distance between top of children and parent</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					height += ( height &gt; <span class="hljs-number">0</span> ) ? (ui.placeholder.css(<span class="hljs-string">'margin-top'</span>).slice(<span class="hljs-number">0</span>, <span class="hljs-number">-2</span>) * <span class="hljs-number">1</span>) : <span class="hljs-number">0</span>;
					height += ui.helper.outerHeight();
					helperHeight = height;
					height -= <span class="hljs-number">2</span>; <span class="hljs-comment">// Subtract 2 for borders</span>
					ui.placeholder.height(height);</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>Update the width of the placeholder to match the moving item.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					maxChildDepth = originalDepth;
					children.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
						<span class="hljs-keyword">var</span> depth = $(<span class="hljs-keyword">this</span>).menuItemDepth();
						maxChildDepth = (depth &gt; maxChildDepth) ? depth : maxChildDepth;
					});
					width = ui.helper.find(<span class="hljs-string">'.menu-item-handle'</span>).outerWidth(); <span class="hljs-comment">// Get original width</span>
					width += api.depthToPx(maxChildDepth - originalDepth); <span class="hljs-comment">// Account for children</span>
					width -= <span class="hljs-number">2</span>; <span class="hljs-comment">// Subtract 2 for borders</span>
					ui.placeholder.width(width);</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>Update the list of menu items.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					tempHolder = ui.placeholder.next( <span class="hljs-string">'.menu-item'</span> );
					tempHolder.css( <span class="hljs-string">'margin-top'</span>, helperHeight + <span class="hljs-string">'px'</span> ); <span class="hljs-comment">// Set the margin to absorb the placeholder</span>
					ui.placeholder.detach(); <span class="hljs-comment">// detach or jQuery UI will think the placeholder is a menu item</span>
					$(<span class="hljs-keyword">this</span>).sortable( <span class="hljs-string">'refresh'</span> ); <span class="hljs-comment">// The children aren't sortable. We should let jQ UI know.</span>
					ui.item.after( ui.placeholder ); <span class="hljs-comment">// reattach the placeholder.</span>
					tempHolder.css(<span class="hljs-string">'margin-top'</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">// reset the margin</span></pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>Now that the element is complete, we can update…</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					updateSharedVars(ui);
				},
				<span class="hljs-attr">stop</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e, ui</span>) </span>{
					<span class="hljs-keyword">var</span> children, subMenuTitle,
						depthChange = currentDepth - originalDepth;</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>Return child elements to the list</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					children = transport.children().insertAfter(ui.item);</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>Add “sub menu” description</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					subMenuTitle = ui.item.find( <span class="hljs-string">'.item-title .is-submenu'</span> );
					<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> &lt; currentDepth )
						subMenuTitle.show();
					<span class="hljs-keyword">else</span>
						subMenuTitle.hide();</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>Update depth classes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> !== depthChange ) {
						ui.item.updateDepthClass( currentDepth );
						children.shiftDepthClass( depthChange );
						updateMenuMaxDepth( depthChange );
					}</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>Register a change</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					api.registerChange();</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>Update the item data.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					ui.item.updateParentMenuItemDBId();</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>address sortable’s incorrectly-calculated top in opera</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					ui.item[<span class="hljs-number">0</span>].style.top = <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>handle drop placement for rtl orientation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( api.isRTL ) {
						ui.item[<span class="hljs-number">0</span>].style.left = <span class="hljs-string">'auto'</span>;
						ui.item[<span class="hljs-number">0</span>].style.right = <span class="hljs-number">0</span>;
					}

					api.refreshKeyboardAccessibility();
					api.refreshAdvancedAccessibility();
				},
				<span class="hljs-attr">change</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e, ui</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>Make sure the placeholder is inside the menu.
Otherwise fix it, or we’re in trouble.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span>( ! ui.placeholder.parent().hasClass(<span class="hljs-string">'menu'</span>) )
						(prev.length) ? prev.after( ui.placeholder ) : api.menuList.prepend( ui.placeholder );

					updateSharedVars(ui);
				},
				<span class="hljs-attr">sort</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e, ui</span>) </span>{
					<span class="hljs-keyword">var</span> offset = ui.helper.offset(),
						edge = api.isRTL ? offset.left + ui.helper.width() : offset.left,
						depth = api.negateIfRTL * api.pxToDepth( edge - menuEdge );</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>Check and correct if depth is not within range.
Also, if the dragged element is dragged upwards over
an item, shift the placeholder to a child position.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( depth &gt; maxDepth || offset.top &lt; ( prevBottom - api.options.targetTolerance ) ) {
						depth = maxDepth;
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( depth &lt; minDepth ) {
						depth = minDepth;
					}

					<span class="hljs-keyword">if</span>( depth != currentDepth )
						updateCurrentDepth(ui, depth);</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>If we overlap the next element, manually shift downwards</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span>( nextThreshold &amp;&amp; offset.top + helperHeight &gt; nextThreshold ) {
						next.after( ui.placeholder );
						updateSharedVars( ui );
						$( <span class="hljs-keyword">this</span> ).sortable( <span class="hljs-string">'refreshPositions'</span> );
					}
				}
			});

			<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateSharedVars</span>(<span class="hljs-params">ui</span>) </span>{
				<span class="hljs-keyword">var</span> depth;

				prev = ui.placeholder.prev( <span class="hljs-string">'.menu-item'</span> );
				next = ui.placeholder.next( <span class="hljs-string">'.menu-item'</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>Make sure we don’t select the moving item.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span>( prev[<span class="hljs-number">0</span>] == ui.item[<span class="hljs-number">0</span>] ) prev = prev.prev( <span class="hljs-string">'.menu-item'</span> );
				<span class="hljs-keyword">if</span>( next[<span class="hljs-number">0</span>] == ui.item[<span class="hljs-number">0</span>] ) next = next.next( <span class="hljs-string">'.menu-item'</span> );

				prevBottom = (prev.length) ? prev.offset().top + prev.height() : <span class="hljs-number">0</span>;
				nextThreshold = (next.length) ? next.offset().top + next.height() / <span class="hljs-number">3</span> : <span class="hljs-number">0</span>;
				minDepth = (next.length) ? next.menuItemDepth() : <span class="hljs-number">0</span>;

				<span class="hljs-keyword">if</span>( prev.length )
					maxDepth = ( (depth = prev.menuItemDepth() + <span class="hljs-number">1</span>) &gt; api.options.globalMaxDepth ) ? api.options.globalMaxDepth : depth;
				<span class="hljs-keyword">else</span>
					maxDepth = <span class="hljs-number">0</span>;
			}

			<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateCurrentDepth</span>(<span class="hljs-params">ui, depth</span>) </span>{
				ui.placeholder.updateDepthClass( depth, currentDepth );
				currentDepth = depth;
			}

			<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initialMenuMaxDepth</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">if</span>( ! body[<span class="hljs-number">0</span>].className ) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
				<span class="hljs-keyword">var</span> match = body[<span class="hljs-number">0</span>].className.match(<span class="hljs-regexp">/menu-max-depth-(\d+)/</span>);
				<span class="hljs-keyword">return</span> match &amp;&amp; match[<span class="hljs-number">1</span>] ? <span class="hljs-built_in">parseInt</span>( match[<span class="hljs-number">1</span>], <span class="hljs-number">10</span> ) : <span class="hljs-number">0</span>;
			}

			<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateMenuMaxDepth</span>(<span class="hljs-params"> depthChange </span>) </span>{
				<span class="hljs-keyword">var</span> depth, newDepth = menuMaxDepth;
				<span class="hljs-keyword">if</span> ( depthChange === <span class="hljs-number">0</span> ) {
					<span class="hljs-keyword">return</span>;
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( depthChange &gt; <span class="hljs-number">0</span> ) {
					depth = maxChildDepth + depthChange;
					<span class="hljs-keyword">if</span>( depth &gt; menuMaxDepth )
						newDepth = depth;
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( depthChange &lt; <span class="hljs-number">0</span> &amp;&amp; maxChildDepth == menuMaxDepth ) {
					<span class="hljs-keyword">while</span>( ! $(<span class="hljs-string">'.menu-item-depth-'</span> + newDepth, api.menuList).length &amp;&amp; newDepth &gt; <span class="hljs-number">0</span> )
						newDepth--;
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>Update the depth class.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				body.removeClass( <span class="hljs-string">'menu-max-depth-'</span> + menuMaxDepth ).addClass( <span class="hljs-string">'menu-max-depth-'</span> + newDepth );
				menuMaxDepth = newDepth;
			}
		},

		<span class="hljs-attr">initManageLocations</span> : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
			$(<span class="hljs-string">'#menu-locations-wrap form'</span>).submit(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
				<span class="hljs-built_in">window</span>.onbeforeunload = <span class="hljs-literal">null</span>;
			});
			$(<span class="hljs-string">'.menu-location-menus select'</span>).on(<span class="hljs-string">'change'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> editLink = $(<span class="hljs-keyword">this</span>).closest(<span class="hljs-string">'tr'</span>).find(<span class="hljs-string">'.locations-edit-menu-link'</span>);
				<span class="hljs-keyword">if</span> ($(<span class="hljs-keyword">this</span>).find(<span class="hljs-string">'option:selected'</span>).data(<span class="hljs-string">'orig'</span>))
					editLink.show();
				<span class="hljs-keyword">else</span>
					editLink.hide();
			});
		},

		<span class="hljs-attr">attachMenuEditListeners</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;
			$(<span class="hljs-string">'#update-nav-menu'</span>).bind(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
				<span class="hljs-keyword">if</span> ( e.target &amp;&amp; e.target.className ) {
					<span class="hljs-keyword">if</span> ( <span class="hljs-number">-1</span> != e.target.className.indexOf(<span class="hljs-string">'item-edit'</span>) ) {
						<span class="hljs-keyword">return</span> that.eventOnClickEditLink(e.target);
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-number">-1</span> != e.target.className.indexOf(<span class="hljs-string">'menu-save'</span>) ) {
						<span class="hljs-keyword">return</span> that.eventOnClickMenuSave(e.target);
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-number">-1</span> != e.target.className.indexOf(<span class="hljs-string">'menu-delete'</span>) ) {
						<span class="hljs-keyword">return</span> that.eventOnClickMenuDelete(e.target);
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-number">-1</span> != e.target.className.indexOf(<span class="hljs-string">'item-delete'</span>) ) {
						<span class="hljs-keyword">return</span> that.eventOnClickMenuItemDelete(e.target);
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-number">-1</span> != e.target.className.indexOf(<span class="hljs-string">'item-cancel'</span>) ) {
						<span class="hljs-keyword">return</span> that.eventOnClickCancelLink(e.target);
					}
				}
			});
			$(<span class="hljs-string">'#add-custom-links input[type="text"]'</span>).keypress(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
				$(<span class="hljs-string">'#customlinkdiv'</span>).removeClass(<span class="hljs-string">'form-invalid'</span>);

				<span class="hljs-keyword">if</span> ( e.keyCode === <span class="hljs-number">13</span> ) {
					e.preventDefault();
					$( <span class="hljs-string">'#submit-customlinkdiv'</span> ).click();
				}
			});
		},

		<span class="hljs-attr">attachMenuSaveSubmitListeners</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-comment">/*
			 * When a navigation menu is saved, store a JSON representation of all form data
			 * in a single input to avoid PHP `max_input_vars` limitations. See #14134.
			 */</span>
			$( <span class="hljs-string">'#update-nav-menu'</span> ).submit( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> navMenuData = $( <span class="hljs-string">'#update-nav-menu'</span> ).serializeArray();
				$( <span class="hljs-string">'[name="nav-menu-data"]'</span> ).val( <span class="hljs-built_in">JSON</span>.stringify( navMenuData ) );
			});
		},

		<span class="hljs-attr">attachThemeLocationsListeners</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> loc = $(<span class="hljs-string">'#nav-menu-theme-locations'</span>), params = {};
			params.action = <span class="hljs-string">'menu-locations-save'</span>;
			params[<span class="hljs-string">'menu-settings-column-nonce'</span>] = $(<span class="hljs-string">'#menu-settings-column-nonce'</span>).val();
			loc.find(<span class="hljs-string">'input[type="submit"]'</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				loc.find(<span class="hljs-string">'select'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					params[<span class="hljs-keyword">this</span>.name] = $(<span class="hljs-keyword">this</span>).val();
				});
				loc.find( <span class="hljs-string">'.spinner'</span> ).addClass( <span class="hljs-string">'is-active'</span> );
				$.post( ajaxurl, params, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					loc.find( <span class="hljs-string">'.spinner'</span> ).removeClass( <span class="hljs-string">'is-active'</span> );
				});
				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			});
		},

		<span class="hljs-attr">attachQuickSearchListeners</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> searchTimer,
				inputEvent;</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>Prevent form submission.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$( <span class="hljs-string">'#nav-menu-meta'</span> ).on( <span class="hljs-string">'submit'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> event </span>) </span>{
				event.preventDefault();
			});

			<span class="hljs-comment">/*
			 * Use feature detection to determine whether inputs should use
			 * the `keyup` or `input` event. Input is preferred but lacks support
			 * in legacy browsers. See changeset 34078, see also ticket #26600#comment:59
			 */</span>
			<span class="hljs-keyword">if</span> ( <span class="hljs-string">'oninput'</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">document</span>.createElement( <span class="hljs-string">'input'</span> ) ) {
				inputEvent = <span class="hljs-string">'input'</span>;
			} <span class="hljs-keyword">else</span> {
				inputEvent = <span class="hljs-string">'keyup'</span>;
			}

			$( <span class="hljs-string">'#nav-menu-meta'</span> ).on( inputEvent, <span class="hljs-string">'.quick-search'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $( <span class="hljs-keyword">this</span> );

				$<span class="hljs-keyword">this</span>.attr( <span class="hljs-string">'autocomplete'</span>, <span class="hljs-string">'off'</span> );

				<span class="hljs-keyword">if</span> ( searchTimer ) {
					clearTimeout( searchTimer );
				}

				searchTimer = setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					api.updateQuickSearchResults( $<span class="hljs-keyword">this</span> );
 				}, <span class="hljs-number">500</span> );
			}).on( <span class="hljs-string">'blur'</span>, <span class="hljs-string">'.quick-search'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				api.lastSearch = <span class="hljs-string">''</span>;
			});
		},

		<span class="hljs-attr">updateQuickSearchResults</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">input</span>) </span>{
			<span class="hljs-keyword">var</span> panel, params,
				minSearchLength = <span class="hljs-number">2</span>,
				q = input.val();

			<span class="hljs-comment">/*
			 * Minimum characters for a search. Also avoid a new AJAX search when
			 * the pressed key (e.g. arrows) doesn't change the searched term.
			 */</span>
			<span class="hljs-keyword">if</span> ( q.length &lt; minSearchLength || api.lastSearch == q ) {
				<span class="hljs-keyword">return</span>;
			}

			api.lastSearch = q;

			panel = input.parents(<span class="hljs-string">'.tabs-panel'</span>);
			params = {
				<span class="hljs-string">'action'</span>: <span class="hljs-string">'menu-quick-search'</span>,
				<span class="hljs-string">'response-format'</span>: <span class="hljs-string">'markup'</span>,
				<span class="hljs-string">'menu'</span>: $(<span class="hljs-string">'#menu'</span>).val(),
				<span class="hljs-string">'menu-settings-column-nonce'</span>: $(<span class="hljs-string">'#menu-settings-column-nonce'</span>).val(),
				<span class="hljs-string">'q'</span>: q,
				<span class="hljs-string">'type'</span>: input.attr(<span class="hljs-string">'name'</span>)
			};

			$( <span class="hljs-string">'.spinner'</span>, panel ).addClass( <span class="hljs-string">'is-active'</span> );

			$.post( ajaxurl, params, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">menuMarkup</span>) </span>{
				api.processQuickSearchQueryResponse(menuMarkup, params, panel);
			});
		},

		<span class="hljs-attr">addCustomLink</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> processMethod </span>) </span>{
			<span class="hljs-keyword">var</span> url = $(<span class="hljs-string">'#custom-menu-item-url'</span>).val(),
				label = $(<span class="hljs-string">'#custom-menu-item-name'</span>).val();

			processMethod = processMethod || api.addMenuItemToBottom;

			<span class="hljs-keyword">if</span> ( <span class="hljs-string">''</span> === url || <span class="hljs-string">'http://'</span> == url ) {
				$(<span class="hljs-string">'#customlinkdiv'</span>).addClass(<span class="hljs-string">'form-invalid'</span>);
				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>Show the ajax spinner</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$( <span class="hljs-string">'.customlinkdiv .spinner'</span> ).addClass( <span class="hljs-string">'is-active'</span> );
			<span class="hljs-keyword">this</span>.addLinkToMenu( url, label, processMethod, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>Remove the ajax spinner</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				$( <span class="hljs-string">'.customlinkdiv .spinner'</span> ).removeClass( <span class="hljs-string">'is-active'</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>Set custom link form back to defaults</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				$(<span class="hljs-string">'#custom-menu-item-name'</span>).val(<span class="hljs-string">''</span>).blur();
				$(<span class="hljs-string">'#custom-menu-item-url'</span>).val(<span class="hljs-string">'http://'</span>);
			});
		},

		<span class="hljs-attr">addLinkToMenu</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">url, label, processMethod, callback</span>) </span>{
			processMethod = processMethod || api.addMenuItemToBottom;
			callback = callback || <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{};

			api.addItemToMenu({
				<span class="hljs-string">'-1'</span>: {
					<span class="hljs-string">'menu-item-type'</span>: <span class="hljs-string">'custom'</span>,
					<span class="hljs-string">'menu-item-url'</span>: url,
					<span class="hljs-string">'menu-item-title'</span>: label
				}
			}, processMethod, callback);
		},

		<span class="hljs-attr">addItemToMenu</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">menuItem, processMethod, callback</span>) </span>{
			<span class="hljs-keyword">var</span> menu = $(<span class="hljs-string">'#menu'</span>).val(),
				nonce = $(<span class="hljs-string">'#menu-settings-column-nonce'</span>).val(),
				params;

			processMethod = processMethod || <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{};
			callback = callback || <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{};

			params = {
				<span class="hljs-string">'action'</span>: <span class="hljs-string">'add-menu-item'</span>,
				<span class="hljs-string">'menu'</span>: menu,
				<span class="hljs-string">'menu-settings-column-nonce'</span>: nonce,
				<span class="hljs-string">'menu-item'</span>: menuItem
			};

			$.post( ajaxurl, params, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">menuMarkup</span>) </span>{
				<span class="hljs-keyword">var</span> ins = $(<span class="hljs-string">'#menu-instructions'</span>);

				menuMarkup = $.trim( menuMarkup ); <span class="hljs-comment">// Trim leading whitespaces</span>
				processMethod(menuMarkup, params);</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>Make it stand out a bit more visually, by adding a fadeIn</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				$( <span class="hljs-string">'li.pending'</span> ).hide().fadeIn(<span class="hljs-string">'slow'</span>);
				$( <span class="hljs-string">'.drag-instructions'</span> ).show();
				<span class="hljs-keyword">if</span>( ! ins.hasClass( <span class="hljs-string">'menu-instructions-inactive'</span> ) &amp;&amp; ins.siblings().length )
					ins.addClass( <span class="hljs-string">'menu-instructions-inactive'</span> );

				callback();
			});
		},

		<span class="hljs-comment">/**
		 * Process the add menu item request response into menu list item. Appends to menu.
		 *
		 * @param {string} menuMarkup The text server response of menu item markup.
		 *
		 * @fires document#menu-item-added Passes menuMarkup as a jQuery object.
		 */</span>
		addMenuItemToBottom : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> menuMarkup </span>) </span>{
			<span class="hljs-keyword">var</span> $menuMarkup = $( menuMarkup );
			$menuMarkup.hideAdvancedMenuItemFields().appendTo( api.targetList );
			api.refreshKeyboardAccessibility();
			api.refreshAdvancedAccessibility();
			$( <span class="hljs-built_in">document</span> ).trigger( <span class="hljs-string">'menu-item-added'</span>, [ $menuMarkup ] );
		},

		<span class="hljs-comment">/**
		 * Process the add menu item request response into menu list item. Prepends to menu.
		 *
		 * @param {string} menuMarkup The text server response of menu item markup.
		 *
		 * @fires document#menu-item-added Passes menuMarkup as a jQuery object.
		 */</span>
		addMenuItemToTop : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> menuMarkup </span>) </span>{
			<span class="hljs-keyword">var</span> $menuMarkup = $( menuMarkup );
			$menuMarkup.hideAdvancedMenuItemFields().prependTo( api.targetList );
			api.refreshKeyboardAccessibility();
			api.refreshAdvancedAccessibility();
			$( <span class="hljs-built_in">document</span> ).trigger( <span class="hljs-string">'menu-item-added'</span>, [ $menuMarkup ] );
		},

		<span class="hljs-attr">attachUnsavedChangesListener</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			$(<span class="hljs-string">'#menu-management input, #menu-management select, #menu-management, #menu-management textarea, .menu-location-menus select'</span>).change(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
				api.registerChange();
			});

			<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> !== $(<span class="hljs-string">'#menu-to-edit'</span>).length || <span class="hljs-number">0</span> !== $(<span class="hljs-string">'.menu-location-menus select'</span>).length ) {
				<span class="hljs-built_in">window</span>.onbeforeunload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
					<span class="hljs-keyword">if</span> ( api.menusChanged )
						<span class="hljs-keyword">return</span> navMenuL10n.saveAlert;
				};
			} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>Make the post boxes read-only, as they can’t be used yet</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				$( <span class="hljs-string">'#menu-settings-column'</span> ).find( <span class="hljs-string">'input,select'</span> ).end().find( <span class="hljs-string">'a'</span> ).attr( <span class="hljs-string">'href'</span>, <span class="hljs-string">'#'</span> ).unbind( <span class="hljs-string">'click'</span> );
			}
		},

		<span class="hljs-attr">registerChange</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			api.menusChanged = <span class="hljs-literal">true</span>;
		},

		<span class="hljs-attr">attachTabsPanelListeners</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			$(<span class="hljs-string">'#menu-settings-column'</span>).bind(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
				<span class="hljs-keyword">var</span> selectAreaMatch, panelId, wrapper, items,
					target = $(e.target);

				<span class="hljs-keyword">if</span> ( target.hasClass(<span class="hljs-string">'nav-tab-link'</span>) ) {

					panelId = target.data( <span class="hljs-string">'type'</span> );

					wrapper = target.parents(<span class="hljs-string">'.accordion-section-content'</span>).first();</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>upon changing tabs, we want to uncheck all checkboxes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					$(<span class="hljs-string">'input'</span>, wrapper).removeAttr(<span class="hljs-string">'checked'</span>);

					$(<span class="hljs-string">'.tabs-panel-active'</span>, wrapper).removeClass(<span class="hljs-string">'tabs-panel-active'</span>).addClass(<span class="hljs-string">'tabs-panel-inactive'</span>);
					$(<span class="hljs-string">'#'</span> + panelId, wrapper).removeClass(<span class="hljs-string">'tabs-panel-inactive'</span>).addClass(<span class="hljs-string">'tabs-panel-active'</span>);

					$(<span class="hljs-string">'.tabs'</span>, wrapper).removeClass(<span class="hljs-string">'tabs'</span>);
					target.parent().addClass(<span class="hljs-string">'tabs'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>select the search bar</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					$(<span class="hljs-string">'.quick-search'</span>, wrapper).focus();</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p>Hide controls in the search tab if no items found.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( ! wrapper.find( <span class="hljs-string">'.tabs-panel-active .menu-item-title'</span> ).length ) {
						wrapper.addClass( <span class="hljs-string">'has-no-menu-item'</span> );
					} <span class="hljs-keyword">else</span> {
						wrapper.removeClass( <span class="hljs-string">'has-no-menu-item'</span> );
					}

					e.preventDefault();
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( target.hasClass(<span class="hljs-string">'select-all'</span>) ) {
					selectAreaMatch = <span class="hljs-regexp">/#(.*)$/</span>.exec(e.target.href);
					<span class="hljs-keyword">if</span> ( selectAreaMatch &amp;&amp; selectAreaMatch[<span class="hljs-number">1</span>] ) {
						items = $(<span class="hljs-string">'#'</span> + selectAreaMatch[<span class="hljs-number">1</span>] + <span class="hljs-string">' .tabs-panel-active .menu-item-title input'</span>);
						<span class="hljs-keyword">if</span>( items.length === items.filter(<span class="hljs-string">':checked'</span>).length )
							items.removeAttr(<span class="hljs-string">'checked'</span>);
						<span class="hljs-keyword">else</span>
							items.prop(<span class="hljs-string">'checked'</span>, <span class="hljs-literal">true</span>);
						<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
					}
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( target.hasClass(<span class="hljs-string">'submit-add-to-menu'</span>) ) {
					api.registerChange();

					<span class="hljs-keyword">if</span> ( e.target.id &amp;&amp; <span class="hljs-string">'submit-customlinkdiv'</span> == e.target.id )
						api.addCustomLink( api.addMenuItemToBottom );
					<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( e.target.id &amp;&amp; <span class="hljs-number">-1</span> != e.target.id.indexOf(<span class="hljs-string">'submit-'</span>) )
						$(<span class="hljs-string">'#'</span> + e.target.id.replace(<span class="hljs-regexp">/submit-/</span>, <span class="hljs-string">''</span>)).addSelectedToMenu( api.addMenuItemToBottom );
					<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
				}
			});

			<span class="hljs-comment">/*
			 * Delegate the `click` event and attach it just to the pagination
			 * links thus excluding the current page `&lt;span&gt;`. See ticket #35577.
			 */</span>
			$( <span class="hljs-string">'#nav-menu-meta'</span> ).on( <span class="hljs-string">'click'</span>, <span class="hljs-string">'a.page-numbers'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> $container = $( <span class="hljs-keyword">this</span> ).closest( <span class="hljs-string">'.inside'</span> );

				$.post( ajaxurl, <span class="hljs-keyword">this</span>.href.replace( <span class="hljs-regexp">/.*\?/</span>, <span class="hljs-string">''</span> ).replace( <span class="hljs-regexp">/action=([^&amp;]*)/</span>, <span class="hljs-string">''</span> ) + <span class="hljs-string">'&amp;action=menu-get-metabox'</span>,
					<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> resp </span>) </span>{
						<span class="hljs-keyword">var</span> metaBoxData = $.parseJSON( resp ),
							toReplace;

						<span class="hljs-keyword">if</span> ( <span class="hljs-number">-1</span> === resp.indexOf( <span class="hljs-string">'replace-id'</span> ) ) {
							<span class="hljs-keyword">return</span>;
						}</pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <p>Get the post type menu meta box to update.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						toReplace = <span class="hljs-built_in">document</span>.getElementById( metaBoxData[<span class="hljs-string">'replace-id'</span>] );

						<span class="hljs-keyword">if</span> ( ! metaBoxData.markup || ! toReplace ) {
							<span class="hljs-keyword">return</span>;
						}</pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <p>Update the post type menu meta box with new content from the response.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						$container.html( metaBoxData.markup );
					}
				);

				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			});
		},

		<span class="hljs-attr">eventOnClickEditLink</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">clickedEl</span>) </span>{
			<span class="hljs-keyword">var</span> settings, item,
			matchedSection = <span class="hljs-regexp">/#(.*)$/</span>.exec(clickedEl.href);
			<span class="hljs-keyword">if</span> ( matchedSection &amp;&amp; matchedSection[<span class="hljs-number">1</span>] ) {
				settings = $(<span class="hljs-string">'#'</span>+matchedSection[<span class="hljs-number">1</span>]);
				item = settings.parent();
				<span class="hljs-keyword">if</span>( <span class="hljs-number">0</span> !== item.length ) {
					<span class="hljs-keyword">if</span>( item.hasClass(<span class="hljs-string">'menu-item-edit-inactive'</span>) ) {
						<span class="hljs-keyword">if</span>( ! settings.data(<span class="hljs-string">'menu-item-data'</span>) ) {
							settings.data( <span class="hljs-string">'menu-item-data'</span>, settings.getItemData() );
						}
						settings.slideDown(<span class="hljs-string">'fast'</span>);
						item.removeClass(<span class="hljs-string">'menu-item-edit-inactive'</span>)
							.addClass(<span class="hljs-string">'menu-item-edit-active'</span>);
					} <span class="hljs-keyword">else</span> {
						settings.slideUp(<span class="hljs-string">'fast'</span>);
						item.removeClass(<span class="hljs-string">'menu-item-edit-active'</span>)
							.addClass(<span class="hljs-string">'menu-item-edit-inactive'</span>);
					}
					<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
				}
			}
		},

		<span class="hljs-attr">eventOnClickCancelLink</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">clickedEl</span>) </span>{
			<span class="hljs-keyword">var</span> settings = $( clickedEl ).closest( <span class="hljs-string">'.menu-item-settings'</span> ),
				thisMenuItem = $( clickedEl ).closest( <span class="hljs-string">'.menu-item'</span> );
			thisMenuItem.removeClass(<span class="hljs-string">'menu-item-edit-active'</span>).addClass(<span class="hljs-string">'menu-item-edit-inactive'</span>);
			settings.setItemData( settings.data(<span class="hljs-string">'menu-item-data'</span>) ).hide();
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		},

		<span class="hljs-attr">eventOnClickMenuSave</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">var</span> locs = <span class="hljs-string">''</span>,
			menuName = $(<span class="hljs-string">'#menu-name'</span>),
			menuNameVal = menuName.val();</pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <p>Cancel and warn if invalid menu name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span>( !menuNameVal || menuNameVal == menuName.attr(<span class="hljs-string">'title'</span>) || !menuNameVal.replace(<span class="hljs-regexp">/\s+/</span>, <span class="hljs-string">''</span>) ) {
				menuName.parent().addClass(<span class="hljs-string">'form-invalid'</span>);
				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <p>Copy menu theme locations</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$(<span class="hljs-string">'#nav-menu-theme-locations select'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				locs += <span class="hljs-string">'&lt;input type="hidden" name="'</span> + <span class="hljs-keyword">this</span>.name + <span class="hljs-string">'" value="'</span> + $(<span class="hljs-keyword">this</span>).val() + <span class="hljs-string">'" /&gt;'</span>;
			});
			$(<span class="hljs-string">'#update-nav-menu'</span>).append( locs );</pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <p>Update menu item position data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			api.menuList.find(<span class="hljs-string">'.menu-item-data-position'</span>).val( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index</span>) </span>{ <span class="hljs-keyword">return</span> index + <span class="hljs-number">1</span>; } );
			<span class="hljs-built_in">window</span>.onbeforeunload = <span class="hljs-literal">null</span>;

			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		},

		<span class="hljs-attr">eventOnClickMenuDelete</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>Delete warning AYS</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">window</span>.confirm( navMenuL10n.warnDeleteMenu ) ) {
				<span class="hljs-built_in">window</span>.onbeforeunload = <span class="hljs-literal">null</span>;
				<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
			}
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		},

		<span class="hljs-attr">eventOnClickMenuItemDelete</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">clickedEl</span>) </span>{
			<span class="hljs-keyword">var</span> itemID = <span class="hljs-built_in">parseInt</span>(clickedEl.id.replace(<span class="hljs-string">'delete-'</span>, <span class="hljs-string">''</span>), <span class="hljs-number">10</span>);
			api.removeMenuItem( $(<span class="hljs-string">'#menu-item-'</span> + itemID) );
			api.registerChange();
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		},

		<span class="hljs-comment">/**
		 * Process the quick search response into a search result
		 *
		 * @param string resp The server response to the query.
		 * @param object req The request arguments.
		 * @param jQuery panel The tabs panel we're searching in.
		 */</span>
		processQuickSearchQueryResponse : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resp, req, panel</span>) </span>{
			<span class="hljs-keyword">var</span> matched, newID,
			takenIDs = {},
			form = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'nav-menu-meta'</span>),
			pattern = <span class="hljs-regexp">/menu-item[(\[^]\]*/</span>,
			$items = $(<span class="hljs-string">'&lt;div&gt;'</span>).html(resp).find(<span class="hljs-string">'li'</span>),
			wrapper = panel.closest( <span class="hljs-string">'.accordion-section-content'</span> ),
			$item;

			<span class="hljs-keyword">if</span>( ! $items.length ) {
				$(<span class="hljs-string">'.categorychecklist'</span>, panel).html( <span class="hljs-string">'&lt;li&gt;&lt;p&gt;'</span> + navMenuL10n.noResultsFound + <span class="hljs-string">'&lt;/p&gt;&lt;/li&gt;'</span> );
				$( <span class="hljs-string">'.spinner'</span>, panel ).removeClass( <span class="hljs-string">'is-active'</span> );
				wrapper.addClass( <span class="hljs-string">'has-no-menu-item'</span> );
				<span class="hljs-keyword">return</span>;
			}

			$items.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
				$item = $(<span class="hljs-keyword">this</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <p>make a unique DB ID number</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				matched = pattern.exec($item.html());

				<span class="hljs-keyword">if</span> ( matched &amp;&amp; matched[<span class="hljs-number">1</span>] ) {
					newID = matched[<span class="hljs-number">1</span>];
					<span class="hljs-keyword">while</span>( form.elements[<span class="hljs-string">'menu-item['</span> + newID + <span class="hljs-string">'][menu-item-type]'</span>] || takenIDs[ newID ] ) {
						newID--;
					}

					takenIDs[newID] = <span class="hljs-literal">true</span>;
					<span class="hljs-keyword">if</span> ( newID != matched[<span class="hljs-number">1</span>] ) {
						$item.html( $item.html().replace(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(
							<span class="hljs-string">'menu-item\\['</span> + matched[<span class="hljs-number">1</span>] + <span class="hljs-string">'\\]'</span>, <span class="hljs-string">'g'</span>),
							<span class="hljs-string">'menu-item['</span> + newID + <span class="hljs-string">']'</span>
						) );
					}
				}
			});

			$(<span class="hljs-string">'.categorychecklist'</span>, panel).html( $items );
			$( <span class="hljs-string">'.spinner'</span>, panel ).removeClass( <span class="hljs-string">'is-active'</span> );
			wrapper.removeClass( <span class="hljs-string">'has-no-menu-item'</span> );
		},

		<span class="hljs-comment">/**
		 * Remove a menu item.
		 * @param  {object} el The element to be removed as a jQuery object.
		 *
		 * @fires document#menu-removing-item Passes the element to be removed.
		 */</span>
		removeMenuItem : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el</span>) </span>{
			<span class="hljs-keyword">var</span> children = el.childMenuItems();

			$( <span class="hljs-built_in">document</span> ).trigger( <span class="hljs-string">'menu-removing-item'</span>, [ el ] );
			el.addClass(<span class="hljs-string">'deleting'</span>).animate({
					<span class="hljs-attr">opacity</span> : <span class="hljs-number">0</span>,
					<span class="hljs-attr">height</span>: <span class="hljs-number">0</span>
				}, <span class="hljs-number">350</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
					<span class="hljs-keyword">var</span> ins = $(<span class="hljs-string">'#menu-instructions'</span>);
					el.remove();
					children.shiftDepthClass( <span class="hljs-number">-1</span> ).updateParentMenuItemDBId();
					<span class="hljs-keyword">if</span> ( <span class="hljs-number">0</span> === $( <span class="hljs-string">'#menu-to-edit li'</span> ).length ) {
						$( <span class="hljs-string">'.drag-instructions'</span> ).hide();
						ins.removeClass( <span class="hljs-string">'menu-instructions-inactive'</span> );
					}
					api.refreshAdvancedAccessibility();
				});
		},

		<span class="hljs-attr">depthToPx</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">depth</span>) </span>{
			<span class="hljs-keyword">return</span> depth * api.options.menuItemDepthPerLevel;
		},

		<span class="hljs-attr">pxToDepth</span> : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">px</span>) </span>{
			<span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(px / api.options.menuItemDepthPerLevel);
		}

	};

	$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{ wpNavMenu.init(); });

})(jQuery);</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
